import{D as ae,B as te,C as oe,J as se,K as ne,i as ie,H as de,L as re,M as ue,N as me,g as pe,O as _e,T as fe,U as ge,h as ye,R as ce}from"./element-plus-ChK2e5qA.js";import{_ as be}from"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import{b as ve,f as Ve}from"./index-D465kfFn.js";import{d as K,a0 as T,r as L,s as we,a1 as Ce,at as ke,c as x,o as p,U as e,L as t,u as o,a9 as Ee,T as A,ab as B,K as y,R as i,a as U,M as V,S as $,i as q}from"./@vue-ygbFPFRc.js";import{s as Te,o as xe,q as Ue,r as he,t as Re,c as De}from"./service-CD4Egw8G.js";import{u as Se}from"./usePaging-B2jDzebD.js";import"./@element-plus-C4Lf8veM.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const Fe={class:"tag-lists"},Le={class:"mb-4"},Ae={class:"flex justify-end mt-4"},Be=K({name:"tagLists"}),cl=K({...Be,setup($e){const r=T({name:"",type:"",category_id:"",is_show:""}),_=L(!1),h=we(),k=L([]),n=T({id:"",name:"",type:1,category_id:"",sort:0,is_show:1}),N=T({name:[{required:!0,message:"请输入标签名称",trigger:"blur"}],type:[{required:!0,message:"请选择标签类型",trigger:"change"}],category_id:[{required:!0,message:"请选择服务分类",trigger:"change"}]}),{pager:c,getLists:f,resetPage:R,resetParams:O}=Se({fetchFun:Te,params:r}),P=s=>({1:"primary",2:"success",3:"info"})[s]||"info",I=()=>{Object.assign(n,{id:"",name:"",type:1,category_id:"",sort:0,is_show:1}),_.value=!0},j=s=>{Object.assign(n,{id:s.id,name:s.name,type:s.type,category_id:s.category_id,sort:s.sort,is_show:s.is_show}),_.value=!0},M=async()=>{var s;await((s=h.value)==null?void 0:s.validate()),n.id?await xe(n):await Ue(n),_.value=!1,f()},z=async(s,l)=>{try{await he({id:l,is_show:s}),f()}catch{f()}},G=async s=>{await Ve.confirm("确定要删除该标签？"),await Re({id:s}),f()},H=async()=>{const s=await De();k.value=Array.isArray(s)?s:[]};return Ce(()=>{f()}),H(),f(),(s,l)=>{const E=oe,u=te,d=ne,w=se,g=ie,D=ae,S=de,J=ve,m=ue,Q=me,W=pe,X=re,Y=be,b=ge,F=fe,Z=ye,ee=ce,C=ke("perms"),le=_e;return p(),x("div",Fe,[e(S,{class:"!border-none",shadow:"never"},{default:t(()=>[e(D,{ref:"formRef",class:"mb-[-16px]",model:o(r),inline:!0},{default:t(()=>[e(u,{class:"w-[200px]",label:"标签名称"},{default:t(()=>[e(E,{modelValue:o(r).name,"onUpdate:modelValue":l[0]||(l[0]=a=>o(r).name=a),placeholder:"输入标签名称",clearable:"",onKeyup:Ee(o(R),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(u,{class:"w-[200px]",label:"标签类型"},{default:t(()=>[e(w,{modelValue:o(r).type,"onUpdate:modelValue":l[1]||(l[1]=a=>o(r).type=a),placeholder:"选择类型",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"风格",value:1}),e(d,{label:"特长",value:2}),e(d,{label:"其他",value:3})]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"w-[200px]",label:"服务分类"},{default:t(()=>[e(w,{modelValue:o(r).category_id,"onUpdate:modelValue":l[2]||(l[2]=a=>o(r).category_id=a),placeholder:"选择分类",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"未分类",value:0}),(p(!0),x(A,null,B(o(k),a=>(p(),y(d,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"w-[200px]",label:"状态"},{default:t(()=>[e(w,{modelValue:o(r).is_show,"onUpdate:modelValue":l[3]||(l[3]=a=>o(r).is_show=a),placeholder:"选择状态",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"显示",value:1}),e(d,{label:"隐藏",value:0})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(g,{type:"primary",onClick:o(R)},{default:t(()=>l[13]||(l[13]=[i("查询")])),_:1},8,["onClick"]),e(g,{onClick:o(O)},{default:t(()=>l[14]||(l[14]=[i("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(S,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[U("div",Le,[V((p(),y(g,{type:"primary",onClick:l[4]||(l[4]=a=>I())},{icon:t(()=>[e(J,{name:"el-icon-Plus"})]),default:t(()=>[l[15]||(l[15]=i(" 新增标签 "))]),_:1})),[[C,["service.styleTag/add"]]])]),V((p(),y(X,{size:"large",data:o(c).lists},{default:t(()=>[e(m,{label:"ID",prop:"id",width:"80"}),e(m,{label:"标签名称",prop:"name","min-width":"150"}),e(m,{label:"标签类型",width:"100"},{default:t(({row:a})=>[e(Q,{type:P(a.type)},{default:t(()=>[i($(a.type_desc),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"服务分类","min-width":"140"},{default:t(({row:a})=>[U("span",null,$(a.category_name||"-"),1)]),_:1}),e(m,{label:"使用人数",prop:"staff_count",width:"100"}),e(m,{label:"排序",prop:"sort",width:"80"}),e(m,{label:"状态",width:"80"},{default:t(({row:a})=>[V(e(W,{modelValue:a.is_show,"onUpdate:modelValue":v=>a.is_show=v,"active-value":1,"inactive-value":0,onChange:v=>z(v,a.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[C,["service.styleTag/changeStatus"]]])]),_:1}),e(m,{label:"创建时间",prop:"create_time",width:"170"}),e(m,{label:"操作",width:"130",fixed:"right"},{default:t(({row:a})=>[V((p(),y(g,{type:"primary",link:"",onClick:v=>j(a)},{default:t(()=>l[16]||(l[16]=[i(" 编辑 ")])),_:2},1032,["onClick"])),[[C,["service.styleTag/edit"]]]),V((p(),y(g,{type:"danger",link:"",onClick:v=>G(a.id)},{default:t(()=>l[17]||(l[17]=[i(" 删除 ")])),_:2},1032,["onClick"])),[[C,["service.styleTag/delete"]]])]),_:1})]),_:1},8,["data"])),[[le,o(c).loading]]),U("div",Ae,[e(Y,{modelValue:o(c),"onUpdate:modelValue":l[5]||(l[5]=a=>q(c)?c.value=a:null),onChange:o(f)},null,8,["modelValue","onChange"])])]),_:1}),e(ee,{modelValue:o(_),"onUpdate:modelValue":l[12]||(l[12]=a=>q(_)?_.value=a:null),title:o(n).id?"编辑标签":"新增标签",width:"500px"},{footer:t(()=>[e(g,{onClick:l[11]||(l[11]=a=>_.value=!1)},{default:t(()=>l[23]||(l[23]=[i("取消")])),_:1}),e(g,{type:"primary",onClick:M},{default:t(()=>l[24]||(l[24]=[i("保存")])),_:1})]),default:t(()=>[e(D,{ref_key:"editFormRef",ref:h,model:o(n),rules:o(N),"label-width":"100px"},{default:t(()=>[e(u,{label:"标签名称",prop:"name"},{default:t(()=>[e(E,{modelValue:o(n).name,"onUpdate:modelValue":l[6]||(l[6]=a=>o(n).name=a),placeholder:"请输入标签名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(u,{label:"标签类型",prop:"type"},{default:t(()=>[e(F,{modelValue:o(n).type,"onUpdate:modelValue":l[7]||(l[7]=a=>o(n).type=a)},{default:t(()=>[e(b,{value:1},{default:t(()=>l[18]||(l[18]=[i("风格")])),_:1}),e(b,{value:2},{default:t(()=>l[19]||(l[19]=[i("特长")])),_:1}),e(b,{value:3},{default:t(()=>l[20]||(l[20]=[i("其他")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"服务分类",prop:"category_id"},{default:t(()=>[e(w,{modelValue:o(n).category_id,"onUpdate:modelValue":l[8]||(l[8]=a=>o(n).category_id=a),placeholder:"选择服务分类",class:"w-full"},{default:t(()=>[(p(!0),x(A,null,B(o(k),a=>(p(),y(d,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"排序",prop:"sort"},{default:t(()=>[e(Z,{modelValue:o(n).sort,"onUpdate:modelValue":l[9]||(l[9]=a=>o(n).sort=a),min:0,max:9999},null,8,["modelValue"])]),_:1}),e(u,{label:"状态",prop:"is_show"},{default:t(()=>[e(F,{modelValue:o(n).is_show,"onUpdate:modelValue":l[10]||(l[10]=a=>o(n).is_show=a)},{default:t(()=>[e(b,{value:1},{default:t(()=>l[21]||(l[21]=[i("显示")])),_:1}),e(b,{value:0},{default:t(()=>l[22]||(l[22]=[i("隐藏")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{cl as default};
