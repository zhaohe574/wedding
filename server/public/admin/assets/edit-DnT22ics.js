import{a0 as U,H as N,O as S,B as F,T as L,U as H,C as M,D as O,i as $}from"./element-plus-ChK2e5qA.js";import{_ as j}from"./index-B-cygYOY.js";import{l as z}from"./lodash-CMKdTQec.js";import{n as G,s as K}from"./message-DXM0L22Z.js";import{e as P,f as A}from"./index-D465kfFn.js";import{u as J,a as Q}from"./vue-router-Cg6aTb_d.js";import{d as w,r as W,a0 as X,s as Y,c,o as d,U as t,M as Z,L as o,u as a,K as h,a as r,R as m,S as p,T as ee,ab as te}from"./@vue-ygbFPFRc.js";import"./@element-plus-C4Lf8veM.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const oe={class:"w-80"},se={class:"flex-1"},ae={class:"w-full max-w-[320px]"},ne={class:"form-tips"},ie=w({name:"noticeEdit"}),je=w({...ie,setup(le){const f=J(),y=Q(),u=W(!1),s=X({id:"",scene_name:"",type:"",scene_desc:"",sms_notice:{status:0,template_id:"",content:"",tips:[]},oa_notice:{},mnp_notice:{},system_notice:{}}),E={"sms_notice.template_id":[{required:!0,message:"请输入模板ID",trigger:"blur"}],"sms_notice.content":[{required:!0,message:"请输入短信内容",trigger:"blur"}]},{removeTab:V}=P(),v=Y(),k=async()=>{u.value=!0;const i=await G({id:f.query.id});Object.keys(i).forEach(e=>{s[e]=i[e]}),u.value=!1},x=async()=>{var e;await((e=v.value)==null?void 0:e.validate());const i={id:s.id,template:z.pick(s,["sms_notice","oa_notice","mnp_notice","system_notice"])};await K(i),A.msgSuccess("操作成功"),V(),y.back()};return f.query.id&&k(),(i,e)=>{const R=U,_=N,l=F,b=H,D=L,g=M,B=O,C=$,q=j,I=S;return d(),c("div",null,[t(_,{class:"!border-none",shadow:"never"},{default:o(()=>[t(R,{content:"编辑通知设置",onBack:e[0]||(e[0]=n=>i.$router.back())})]),_:1}),Z((d(),h(B,{ref_key:"formRef",ref:v,model:a(s),"label-width":"120px",rules:E},{default:o(()=>[t(_,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[4]||(e[4]=r("div",{class:"font-medium mb-7"},"通知名称",-1)),t(l,{label:"通知名称"},{default:o(()=>[m(p(a(s).scene_name),1)]),_:1}),t(l,{label:"通知类型"},{default:o(()=>[m(p(a(s).type),1)]),_:1}),t(l,{label:"通知业务"},{default:o(()=>[m(p(a(s).scene_desc),1)]),_:1})]),_:1}),t(_,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[7]||(e[7]=r("div",{class:"font-medium mb-7"},"短信通知",-1)),t(l,{label:"开启状态",prop:"sms_notice.status",required:""},{default:o(()=>[t(D,{modelValue:a(s).sms_notice.status,"onUpdate:modelValue":e[1]||(e[1]=n=>a(s).sms_notice.status=n)},{default:o(()=>[t(b,{value:"0"},{default:o(()=>e[5]||(e[5]=[m("关闭")])),_:1}),t(b,{value:"1"},{default:o(()=>e[6]||(e[6]=[m("开启")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(l,{label:"模板ID",prop:"sms_notice.template_id"},{default:o(()=>[r("div",oe,[t(g,{modelValue:a(s).sms_notice.template_id,"onUpdate:modelValue":e[2]||(e[2]=n=>a(s).sms_notice.template_id=n),placeholder:"请输入模板ID"},null,8,["modelValue"])])]),_:1}),t(l,{label:"短信内容",prop:"sms_notice.content"},{default:o(()=>[r("div",se,[r("div",ae,[t(g,{type:"textarea",autosize:{minRows:6,maxRows:6},modelValue:a(s).sms_notice.content,"onUpdate:modelValue":e[3]||(e[3]=n=>a(s).sms_notice.content=n)},null,8,["modelValue"])]),r("div",ne,[(d(!0),c(ee,null,te(a(s).sms_notice.tips,(n,T)=>(d(),c("div",{key:T},p(n),1))),128))])])]),_:1})]),_:1})]),_:1},8,["model"])),[[I,a(u)]]),t(q,null,{default:o(()=>[t(C,{type:"primary",onClick:x},{default:o(()=>e[8]||(e[8]=[m("保存")])),_:1})]),_:1})])}}});export{je as default};
