import{i as A,L as P,M as z,N as F,O as S,H as G}from"./element-plus-ChK2e5qA.js";import{b as H,M as v,f as K}from"./index-D465kfFn.js";import{a as j,e as q}from"./menu-BAjNB82t.js";import{u as I}from"./usePaging-B2jDzebD.js";import{_ as J}from"./edit.vue_vue_type_script_setup_true_lang-CjUidcOK.js";import{d as $,s as N,r as Q,at as W,c as y,o as a,U as n,K as p,P as h,L as o,a as B,M as f,R as d,u as m,n as R}from"./@vue-ygbFPFRc.js";import"./@element-plus-C4Lf8veM.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./picker.vue_vue_type_script_setup_true_lang-CMMPCRMJ.js";import"./index-n-Jqn6Y-.js";const X={class:"menu-lists"},Y={key:0},Z={key:1},ee={key:2},te={class:"flex"},oe=$({name:"permission-menu"}),Fe=$({...oe,setup(ie){const w=N(),u=N();let k=!1;const _=Q(!1),{pager:b,getLists:g}=I({fetchFun:j,params:{page_type:0}}),C=async i=>{var e,s;_.value=!0,await R(),i&&((e=u.value)==null||e.setFormData({pid:i})),(s=u.value)==null||s.open("add")},D=async i=>{var e,s;_.value=!0,await R(),(e=u.value)==null||e.open("edit"),(s=u.value)==null||s.getDetail(i)},L=async i=>{await K.confirm("确定要删除？"),await q({id:i}),g()},M=()=>{k=!k,E(b.lists,k)},E=(i,e=!0)=>{var s;for(const l in i)(s=w.value)==null||s.toggleRowExpansion(i[l],e),i[l].children&&E(i[l].children,e)};return g(),(i,e)=>{const s=H,l=A,r=z,x=F,U=P,O=G,c=W("perms"),V=S;return a(),y("div",X,[n(O,{class:"!border-none",shadow:"never"},{default:o(()=>[B("div",null,[f((a(),p(l,{type:"primary",onClick:e[0]||(e[0]=t=>C())},{icon:o(()=>[n(s,{name:"el-icon-Plus"})]),default:o(()=>[e[2]||(e[2]=d(" 新增 "))]),_:1})),[[c,["auth.menu/add"]]]),n(l,{onClick:M},{default:o(()=>e[3]||(e[3]=[d(" 展开/折叠 ")])),_:1})]),f((a(),p(U,{ref_key:"tableRef",ref:w,class:"mt-4",size:"large",data:m(b).lists,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[n(r,{label:"菜单名称",prop:"name","min-width":"150","show-overflow-tooltip":""}),n(r,{label:"类型",prop:"type","min-width":"80"},{default:o(({row:t})=>[t.type==m(v).CATALOGUE?(a(),y("div",Y,"目录")):t.type==m(v).MENU?(a(),y("div",Z,"菜单")):t.type==m(v).BUTTON?(a(),y("div",ee,"按钮")):h("",!0)]),_:1}),n(r,{label:"图标",prop:"icon","min-width":"80"},{default:o(({row:t})=>[B("div",te,[n(s,{name:t.icon,size:20},null,8,["name"])])]),_:1}),n(r,{label:"权限标识",prop:"perms","min-width":"150","show-overflow-tooltip":""}),n(r,{label:"状态",prop:"is_disable","min-width":"100"},{default:o(({row:t})=>[t.is_disable==0?(a(),p(x,{key:0},{default:o(()=>e[4]||(e[4]=[d("正常")])),_:1})):(a(),p(x,{key:1,type:"danger"},{default:o(()=>e[5]||(e[5]=[d("停用")])),_:1}))]),_:1}),n(r,{label:"排序",prop:"sort","min-width":"100"}),n(r,{label:"更新时间",prop:"update_time","min-width":"180"}),n(r,{label:"操作",width:"160",fixed:"right"},{default:o(({row:t})=>[t.type!==m(v).BUTTON?f((a(),p(l,{key:0,type:"primary",link:"",onClick:T=>C(t.id)},{default:o(()=>e[6]||(e[6]=[d(" 新增 ")])),_:2},1032,["onClick"])),[[c,["auth.menu/add"]]]):h("",!0),f((a(),p(l,{type:"primary",link:"",onClick:T=>D(t)},{default:o(()=>e[7]||(e[7]=[d(" 编辑 ")])),_:2},1032,["onClick"])),[[c,["auth.menu/edit"]]]),f((a(),p(l,{type:"danger",link:"",onClick:T=>L(t.id)},{default:o(()=>e[8]||(e[8]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[c,["auth.menu/delete"]]])]),_:1})]),_:1},8,["data"])),[[V,m(b).loading]])]),_:1}),m(_)?(a(),p(J,{key:0,ref_key:"editRef",ref:u,onSuccess:m(g),onClose:e[1]||(e[1]=t=>_.value=!1)},null,8,["onSuccess"])):h("",!0)])}}});export{Fe as default};
