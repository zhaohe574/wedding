import{i as T,L as B,M as D,N as L,O as N,H as P}from"./element-plus-ChK2e5qA.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import{D as $,g,b as M,f as U,E as j}from"./index-D465kfFn.js";import{u as q}from"./usePaging-B2jDzebD.js";import{d as w,ah as F,at as H,c as K,o as n,U as t,L as o,M as d,a as k,K as r,u as l,R as s,P as b,i as O}from"./@vue-ygbFPFRc.js";import"./@element-plus-C4Lf8veM.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const z={class:"flex"},A={class:"flex justify-end mt-4"},G=w({name:"scheduledTask"}),Tt=w({...G,setup(I){const{pager:p,getLists:c}=q({fetchFun:$,params:{}}),h=async f=>{await U.confirm("确定要删除？"),await j({id:f}),c()};return c(),(f,e)=>{const v=M,m=T,y=F("router-link"),a=D,u=L,x=B,C=R,E=P,_=H("perms"),V=N;return n(),K("div",null,[t(E,{shadow:"never",class:"!border-none"},{default:o(()=>[d((n(),r(y,{to:l(g)("crontab.crontab/add:edit")},{default:o(()=>[t(m,{type:"primary",class:"mb-[16px]"},{icon:o(()=>[t(v,{name:"el-icon-Plus"})]),default:o(()=>[e[1]||(e[1]=s(" 新增 "))]),_:1})]),_:1},8,["to"])),[[_,["crontab.crontab/add","crontab.crontab/add:edit"]]]),d((n(),r(x,{ref:"paneTable",class:"m-t-24",data:l(p).lists,style:{width:"100%"}},{default:o(()=>[t(a,{prop:"name",label:"名称","min-width":"120"}),t(a,{prop:"type_desc",label:"类型","min-width":"100"}),t(a,{prop:"command",label:"命令","min-width":"100"}),t(a,{prop:"params",label:"参数","min-width":"80"}),t(a,{prop:"expression",label:"规则","min-width":"100"}),t(a,{prop:"status",label:"状态","min-width":"100"},{default:o(({row:i})=>[i.status==1?(n(),r(u,{key:0,type:"success"},{default:o(()=>e[2]||(e[2]=[s("运行中")])),_:1})):b("",!0),i.status==2?(n(),r(u,{key:1,type:"info"},{default:o(()=>e[3]||(e[3]=[s("已停止")])),_:1})):b("",!0),i.status==3?(n(),r(u,{key:2,type:"danger"},{default:o(()=>e[4]||(e[4]=[s("错误")])),_:1})):b("",!0)]),_:1}),t(a,{prop:"error",label:"错误原因","min-width":"120"}),t(a,{prop:"last_time",label:"最后执行时间",width:"180"}),t(a,{prop:"time",label:"时长","min-width":"100"}),t(a,{prop:"max_time",label:"最大时长","min-width":"100"}),t(a,{label:"操作",width:"120",fixed:"right"},{default:o(({row:i})=>[k("div",z,[t(m,{type:"primary",link:""},{default:o(()=>[d((n(),r(y,{to:{path:l(g)("crontab.crontab/add:edit"),query:{id:i.id}}},{default:o(()=>[t(m,{type:"primary",link:""},{default:o(()=>e[5]||(e[5]=[s(" 编辑 ")])),_:1})]),_:2},1032,["to"])),[[_,["crontab.crontab/edit","crontab.crontab/add:edit"]]])]),_:2},1024),d((n(),r(m,{type:"danger",link:"",onClick:J=>h(i.id)},{default:o(()=>e[6]||(e[6]=[s(" 删除 ")])),_:2},1032,["onClick"])),[[_,["crontab.crontab/delete"]]])])]),_:1})]),_:1},8,["data"])),[[V,l(p).loading]]),k("div",A,[t(C,{modelValue:l(p),"onUpdate:modelValue":e[0]||(e[0]=i=>O(p)?p.value=i:null),onChange:l(c)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{Tt as default};
