import{$ as L,H as N,i as U,L as M,M as O,g as P,O as A}from"./element-plus-ChK2e5qA.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import{b as z,f as F}from"./index-D465kfFn.js";import{d as H,o as K,e as q}from"./wx_oa-CYsxVRsG.js";import{u as G}from"./usePaging-B2jDzebD.js";import{_ as I}from"./edit.vue_vue_type_script_setup_true_lang-aqFHfKfZ.js";import{d as J,s as Q,r as W,b as g,c as X,o as f,U as t,K as v,P as Y,L as n,a as w,M as Z,R as m,u as l,S as h,i as ee,n as b}from"./@vue-ygbFPFRc.js";import"./@element-plus-C4Lf8veM.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-n-Jqn6Y-.js";const te={class:"flex justify-end mt-4"},Ae=J({__name:"keyword_reply",setup(ae){const p=Q(),d=W(!1),k=g(()=>o=>{switch(o){case 1:return"全匹配";case 2:return"模糊匹配"}}),C=g(()=>o=>{switch(o){case 1:return"文本"}}),{pager:r,getLists:s}=G({fetchFun:H,params:{reply_type:2}}),V=async()=>{var o;d.value=!0,await b(),(o=p.value)==null||o.open("add",2)},E=async o=>{var e,c;d.value=!0,await b(),(e=p.value)==null||e.open("edit",2),(c=p.value)==null||c.getDetail(o)},$=async o=>{await F.confirm("确定要删除？"),await K({id:o}),s()},R=async o=>{try{await q({id:o}),s()}catch{s()}};return s(),(o,e)=>{const c=L,y=N,x=z,_=U,i=O,S=P,T=M,B=j,D=A;return f(),X("div",null,[t(y,{class:"!border-none",shadow:"never"},{default:n(()=>[t(c,{type:"warning",title:"温馨提示：1.粉丝在公众号发送内容时，通过关键词可触发关键词回复；2.同时可启用多个关键词回复，有多条关键词匹配时优选选择排序靠前的一条",closable:!1,"show-icon":""})]),_:1}),t(y,{class:"!border-none mt-4",shadow:"never"},{default:n(()=>[w("div",null,[t(_,{class:"mb-4",type:"primary",onClick:e[0]||(e[0]=a=>V())},{icon:n(()=>[t(x,{name:"el-icon-Plus"})]),default:n(()=>[e[3]||(e[3]=m(" 新增 "))]),_:1})]),Z((f(),v(T,{size:"large",data:l(r).lists},{default:n(()=>[t(i,{label:"规则名称",prop:"name","min-width":"120"}),t(i,{label:"关键词",prop:"keyword","min-width":"120"}),t(i,{label:"匹配方式","min-width":"120"},{default:n(({row:a})=>[m(h(l(k)(a.matching_type)),1)]),_:1}),t(i,{label:"回复类型","min-width":"120"},{default:n(({row:a})=>[m(h(l(C)(a.content_type)),1)]),_:1}),t(i,{label:"状态","min-width":"120"},{default:n(({row:a})=>[t(S,{modelValue:a.status,"onUpdate:modelValue":u=>a.status=u,"active-value":1,"inactive-value":0,onChange:u=>R(a.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(i,{label:"排序",prop:"sort","min-width":"120"}),t(i,{label:"操作",width:"120",fixed:"right"},{default:n(({row:a})=>[t(_,{type:"primary",link:"",onClick:u=>E(a)},{default:n(()=>e[4]||(e[4]=[m(" 编辑 ")])),_:2},1032,["onClick"]),t(_,{type:"danger",link:"",onClick:u=>$(a.id)},{default:n(()=>e[5]||(e[5]=[m(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[D,l(r).loading]]),w("div",te,[t(B,{modelValue:l(r),"onUpdate:modelValue":e[1]||(e[1]=a=>ee(r)?r.value=a:null),onChange:l(s)},null,8,["modelValue","onChange"])])]),_:1}),l(d)?(f(),v(I,{key:0,ref_key:"editRef",ref:p,onSuccess:l(s),onClose:e[2]||(e[2]=a=>d.value=!1)},null,8,["onSuccess"])):Y("",!0)])}}});export{Ae as default};
