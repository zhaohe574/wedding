import{D as Re,B as Le,C as Se,J as Me,K as Te,V as Ie,i as Oe,H as Ye,d as je,L as Ke,M as ze,N as Ne,O as Pe,I as qe,G as Ge,T as He,U as Xe,h as Je,R as We,W as Qe,X as Ze}from"./element-plus-ChK2e5qA.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import{d as ie,a0 as j,r as V,l as el,c as C,o as g,U as e,a as u,L as t,u as o,a9 as ae,T as oe,ab as de,K,R as n,S as i,M as ll,O as se,P as ne,i as S}from"./@vue-ygbFPFRc.js";import{A as tl}from"./@element-plus-C4Lf8veM.js";import{h as al,i as ol,g as ue,j as dl,k as sl,l as nl,m as ul,n as il,o as rl,p as ml}from"./crm-B_G7fTMr.js";import{u as _l}from"./usePaging-B2jDzebD.js";import{f as B}from"./index-D465kfFn.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const pl={class:"customer-lists"},fl={class:"mt-4 grid grid-cols-6 gap-4"},vl={class:"text-center"},bl={class:"text-2xl font-bold mt-2"},cl={class:"text-center"},gl={class:"text-2xl font-bold mt-2 text-blue-500"},wl={class:"text-center"},Vl={class:"text-2xl font-bold mt-2 text-orange-500"},yl={class:"text-center"},xl={class:"text-2xl font-bold mt-2 text-green-500"},kl={class:"text-center"},Cl={class:"text-2xl font-bold mt-2 text-red-500"},Ul={class:"text-center"},El={class:"text-2xl font-bold mt-2 text-purple-500"},Dl={class:"flex justify-between mb-4"},Al={class:"flex items-center"},Bl={class:"font-medium"},$l={class:"text-gray-400 text-xs"},Fl={key:0},Rl={key:1,class:"text-gray-400"},Ll={key:0},Sl={key:1,class:"text-gray-400"},Ml={key:0},Tl={class:"text-xs"},Il={class:"text-xs"},Ol={class:"flex justify-end mt-4"},Yl={key:0},jl=ie({name:"customerLists"}),xt=ie({...jl,setup(Kl){const b=j({customer_name:"",customer_mobile:"",intention_level:"",customer_status:"",advisor_id:"",wedding_date:[]}),E=V({}),J=V([]),W=V([]),P=V([]),D=V(!1),Q=V(),r=j({id:0,customer_name:"",customer_mobile:"",customer_wechat:"",gender:0,intention_level:"D",source_channel:1,wedding_date:"",wedding_budget:0,city:"",district:"",wedding_venue:"",remark:""}),re={customer_name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}]},A=V(!1),_=j({id:0,customer_ids:[],advisor_id:"",reason:""}),$=V(!1),Z=V(),f=j({customer_id:0,follow_type:1,follow_content:"",follow_result:1,intention_after:"",duration:0,next_follow_date:""}),me={follow_type:[{required:!0,message:"请选择跟进方式",trigger:"change"}],follow_content:[{required:!0,message:"请输入跟进内容",trigger:"blur"}],follow_result:[{required:!0,message:"请选择跟进结果",trigger:"change"}]},F=V(!1),R=j({id:0,loss_reason:""}),z=V(!1),p=V(null),{pager:M,getLists:L,resetPage:q,resetParams:_e}=_l({fetchFun:al,params:b}),h=s=>({A:"danger",B:"warning",C:"info",D:""})[s]||"",ee=s=>({1:"primary",2:"warning",3:"success",4:"danger",5:"info"})[s]||"info",G=async()=>{E.value=await ol()},pe=async()=>{J.value=await ue()},le=async()=>{W.value=await ue({only_available:1})},fe=s=>{P.value=s.map(l=>l.id)},ve=()=>{Object.assign(r,{id:0,customer_name:"",customer_mobile:"",customer_wechat:"",gender:0,intention_level:"D",source_channel:1,wedding_date:"",wedding_budget:0,city:"",district:"",wedding_venue:"",remark:""}),D.value=!0},be=s=>{Object.assign(r,{id:s.id,customer_name:s.customer_name,customer_mobile:s.customer_mobile,customer_wechat:s.customer_wechat,gender:s.gender,intention_level:s.intention_level,source_channel:s.source_channel,wedding_date:s.wedding_date,wedding_budget:s.wedding_budget,city:s.city,district:s.district,wedding_venue:s.wedding_venue,remark:s.remark}),D.value=!0},ce=async()=>{var s;await((s=Q.value)==null?void 0:s.validate()),r.id?(await dl(r),B.msgSuccess("编辑成功")):(await sl(r),B.msgSuccess("添加成功")),D.value=!1,L(),G()},ge=async s=>{p.value=await nl({id:s.id}),z.value=!0},we=async s=>{await le(),_.id=s.id,_.customer_ids=[],_.advisor_id="",_.reason="",A.value=!0},Ve=async()=>{await le(),_.id=0,_.customer_ids=P.value,_.advisor_id="",_.reason="",A.value=!0},ye=async()=>{if(!_.advisor_id){B.msgError("请选择销售顾问");return}if(_.id)await ul({id:_.id,advisor_id:_.advisor_id,reason:_.reason}),B.msgSuccess("分配成功");else{const s=await il({customer_ids:_.customer_ids,advisor_id:_.advisor_id,reason:_.reason});B.msgSuccess(`成功分配 ${s.success} 个客户`)}A.value=!1,L()},xe=s=>{Object.assign(f,{customer_id:s.id,follow_type:1,follow_content:"",follow_result:1,intention_after:s.intention_level,duration:0,next_follow_date:""}),$.value=!0},ke=async()=>{var s;await((s=Z.value)==null?void 0:s.validate()),await rl({...f,next_follow_time:f.next_follow_date?parseInt(f.next_follow_date):0}),B.msgSuccess("跟进记录添加成功"),$.value=!1,L()},Ce=s=>{R.id=s.id,R.loss_reason="",F.value=!0},Ue=async()=>{await ml(R),B.msgSuccess("已标记为流失"),F.value=!1,L(),G()};return el(()=>{pe(),G()}),L(),(s,l)=>{const w=Se,m=Le,d=Te,k=Me,H=Ie,v=Oe,T=Re,U=Ye,Ee=je,y=ze,I=Ne,De=Ke,Ae=he,x=Ge,O=qe,X=Xe,Be=He,te=Je,Y=We,c=Ze,$e=Qe,Fe=Pe;return g(),C("div",pl,[e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[e(T,{ref:"formRef",class:"mb-[-16px]",model:o(b),inline:!0},{default:t(()=>[e(m,{class:"w-[150px]",label:"客户姓名"},{default:t(()=>[e(w,{modelValue:o(b).customer_name,"onUpdate:modelValue":l[0]||(l[0]=a=>o(b).customer_name=a),placeholder:"输入姓名",clearable:"",onKeyup:ae(o(q),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{class:"w-[150px]",label:"手机号"},{default:t(()=>[e(w,{modelValue:o(b).customer_mobile,"onUpdate:modelValue":l[1]||(l[1]=a=>o(b).customer_mobile=a),placeholder:"输入手机号",clearable:"",onKeyup:ae(o(q),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{class:"w-[120px]",label:"意向等级"},{default:t(()=>[e(k,{modelValue:o(b).intention_level,"onUpdate:modelValue":l[2]||(l[2]=a=>o(b).intention_level=a),placeholder:"选择",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"A-高意向",value:"A"}),e(d,{label:"B-中意向",value:"B"}),e(d,{label:"C-低意向",value:"C"}),e(d,{label:"D-待跟进",value:"D"})]),_:1},8,["modelValue"])]),_:1}),e(m,{class:"w-[120px]",label:"客户状态"},{default:t(()=>[e(k,{modelValue:o(b).customer_status,"onUpdate:modelValue":l[3]||(l[3]=a=>o(b).customer_status=a),placeholder:"选择",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),e(d,{label:"新客户",value:1}),e(d,{label:"跟进中",value:2}),e(d,{label:"已签单",value:3}),e(d,{label:"已流失",value:4}),e(d,{label:"已完成",value:5})]),_:1},8,["modelValue"])]),_:1}),e(m,{class:"w-[150px]",label:"销售顾问"},{default:t(()=>[e(k,{modelValue:o(b).advisor_id,"onUpdate:modelValue":l[4]||(l[4]=a=>o(b).advisor_id=a),placeholder:"选择顾问",clearable:""},{default:t(()=>[e(d,{label:"全部",value:""}),(g(!0),C(oe,null,de(o(J),a=>(g(),K(d,{key:a.id,label:a.advisor_name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{class:"w-[280px]",label:"婚期"},{default:t(()=>[e(H,{modelValue:o(b).wedding_date,"onUpdate:modelValue":l[5]||(l[5]=a=>o(b).wedding_date=a),type:"daterange","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(v,{type:"primary",onClick:o(q)},{default:t(()=>l[37]||(l[37]=[n("查询")])),_:1},8,["onClick"]),e(v,{onClick:o(_e)},{default:t(()=>l[38]||(l[38]=[n("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),u("div",fl,[e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[u("div",vl,[l[39]||(l[39]=u("div",{class:"text-gray-500 text-sm"},"总客户",-1)),u("div",bl,i(o(E).total||0),1)])]),_:1}),e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[u("div",cl,[l[40]||(l[40]=u("div",{class:"text-gray-500 text-sm"},"新客户",-1)),u("div",gl,i(o(E).new||0),1)])]),_:1}),e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[u("div",wl,[l[41]||(l[41]=u("div",{class:"text-gray-500 text-sm"},"跟进中",-1)),u("div",Vl,i(o(E).following||0),1)])]),_:1}),e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[u("div",yl,[l[42]||(l[42]=u("div",{class:"text-gray-500 text-sm"},"已签单",-1)),u("div",xl,i(o(E).signed||0),1)])]),_:1}),e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[u("div",kl,[l[43]||(l[43]=u("div",{class:"text-gray-500 text-sm"},"已流失",-1)),u("div",Cl,i(o(E).lost||0),1)])]),_:1}),e(U,{class:"!border-none",shadow:"never"},{default:t(()=>[u("div",Ul,[l[44]||(l[44]=u("div",{class:"text-gray-500 text-sm"},"今日新增",-1)),u("div",El,i(o(E).today_new||0),1)])]),_:1})]),e(U,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[u("div",Dl,[u("div",null,[e(v,{type:"primary",onClick:ve},{default:t(()=>[e(Ee,{class:"mr-1"},{default:t(()=>[e(o(tl))]),_:1}),l[45]||(l[45]=n("添加客户 "))]),_:1}),e(v,{onClick:Ve,disabled:o(P).length===0},{default:t(()=>l[46]||(l[46]=[n(" 批量分配 ")])),_:1},8,["disabled"])])]),ll((g(),K(De,{size:"large",data:o(M).lists,onSelectionChange:fe},{default:t(()=>[e(y,{type:"selection",width:"50"}),e(y,{label:"客户信息","min-width":"180"},{default:t(({row:a})=>[u("div",Al,[u("div",null,[u("div",Bl,i(a.customer_name),1),u("div",$l,i(a.customer_mobile),1)])])]),_:1}),e(y,{label:"意向等级",width:"100"},{default:t(({row:a})=>[e(I,{type:h(a.intention_level),size:"large"},{default:t(()=>[n(i(a.intention_level),1)]),_:2},1032,["type"])]),_:1}),e(y,{label:"客户状态",width:"100"},{default:t(({row:a})=>[e(I,{type:ee(a.customer_status),size:"small"},{default:t(()=>[n(i(a.customer_status_desc),1)]),_:2},1032,["type"])]),_:1}),e(y,{label:"婚期",width:"110"},{default:t(({row:a})=>[a.wedding_date?(g(),C("div",Fl,[u("div",null,i(a.wedding_date),1),u("div",{class:se(["text-xs",a.days_to_wedding<30?"text-red-500":"text-gray-400"])},i(a.days_to_wedding>0?`还有${a.days_to_wedding}天`:"已过期"),3)])):(g(),C("span",Rl,"-"))]),_:1}),e(y,{label:"预算",width:"100"},{default:t(({row:a})=>[a.wedding_budget?(g(),C("span",Ll,"¥"+i(a.wedding_budget),1)):(g(),C("span",Sl,"-"))]),_:1}),e(y,{label:"销售顾问",width:"100"},{default:t(({row:a})=>[a.advisor?(g(),C("span",Ml,i(a.advisor.advisor_name),1)):(g(),K(I,{key:1,type:"danger",size:"small"},{default:t(()=>l[47]||(l[47]=[n("未分配")])),_:1}))]),_:1}),e(y,{label:"跟进信息",width:"120"},{default:t(({row:a})=>[u("div",Tl,[u("div",null,"跟进: "+i(a.follow_count)+"次",1),u("div",{class:se(a.days_no_follow>7?"text-red-500":"text-gray-400")},i(a.days_no_follow)+"天未跟进 ",3)])]),_:1}),e(y,{label:"来源",width:"80"},{default:t(({row:a})=>[u("span",Il,i(a.source_channel_desc),1)]),_:1}),e(y,{label:"创建时间",prop:"create_time",width:"170"}),e(y,{label:"操作",width:"220",fixed:"right"},{default:t(({row:a})=>[e(v,{type:"primary",link:"",onClick:N=>ge(a)},{default:t(()=>l[48]||(l[48]=[n("详情")])),_:2},1032,["onClick"]),e(v,{type:"success",link:"",onClick:N=>xe(a)},{default:t(()=>l[49]||(l[49]=[n("跟进")])),_:2},1032,["onClick"]),e(v,{type:"warning",link:"",onClick:N=>we(a)},{default:t(()=>l[50]||(l[50]=[n("分配")])),_:2},1032,["onClick"]),e(v,{type:"primary",link:"",onClick:N=>be(a)},{default:t(()=>l[51]||(l[51]=[n("编辑")])),_:2},1032,["onClick"]),a.customer_status<=2?(g(),K(v,{key:0,type:"danger",link:"",onClick:N=>Ce(a)},{default:t(()=>l[52]||(l[52]=[n("流失")])),_:2},1032,["onClick"])):ne("",!0)]),_:1})]),_:1},8,["data"])),[[Fe,o(M).loading]]),u("div",Ol,[e(Ae,{modelValue:o(M),"onUpdate:modelValue":l[6]||(l[6]=a=>S(M)?M.value=a:null),onChange:o(L)},null,8,["modelValue","onChange"])])]),_:1}),e(Y,{modelValue:o(D),"onUpdate:modelValue":l[20]||(l[20]=a=>S(D)?D.value=a:null),title:o(r).id?"编辑客户":"添加客户",width:"700px"},{footer:t(()=>[e(v,{onClick:l[19]||(l[19]=a=>D.value=!1)},{default:t(()=>l[56]||(l[56]=[n("取消")])),_:1}),e(v,{type:"primary",onClick:ce},{default:t(()=>l[57]||(l[57]=[n("确定")])),_:1})]),default:t(()=>[e(T,{model:o(r),"label-width":"100px",rules:re,ref_key:"editFormRef",ref:Q},{default:t(()=>[e(O,{gutter:16},{default:t(()=>[e(x,{span:12},{default:t(()=>[e(m,{label:"客户姓名",prop:"customer_name"},{default:t(()=>[e(w,{modelValue:o(r).customer_name,"onUpdate:modelValue":l[7]||(l[7]=a=>o(r).customer_name=a),placeholder:"输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:12},{default:t(()=>[e(m,{label:"手机号",prop:"customer_mobile"},{default:t(()=>[e(w,{modelValue:o(r).customer_mobile,"onUpdate:modelValue":l[8]||(l[8]=a=>o(r).customer_mobile=a),placeholder:"输入手机号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(O,{gutter:16},{default:t(()=>[e(x,{span:12},{default:t(()=>[e(m,{label:"微信号"},{default:t(()=>[e(w,{modelValue:o(r).customer_wechat,"onUpdate:modelValue":l[9]||(l[9]=a=>o(r).customer_wechat=a),placeholder:"输入微信号"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:12},{default:t(()=>[e(m,{label:"性别"},{default:t(()=>[e(Be,{modelValue:o(r).gender,"onUpdate:modelValue":l[10]||(l[10]=a=>o(r).gender=a)},{default:t(()=>[e(X,{label:0},{default:t(()=>l[53]||(l[53]=[n("未知")])),_:1}),e(X,{label:1},{default:t(()=>l[54]||(l[54]=[n("男")])),_:1}),e(X,{label:2},{default:t(()=>l[55]||(l[55]=[n("女")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(O,{gutter:16},{default:t(()=>[e(x,{span:12},{default:t(()=>[e(m,{label:"意向等级",prop:"intention_level"},{default:t(()=>[e(k,{modelValue:o(r).intention_level,"onUpdate:modelValue":l[11]||(l[11]=a=>o(r).intention_level=a),placeholder:"选择意向等级"},{default:t(()=>[e(d,{label:"A-高意向",value:"A"}),e(d,{label:"B-中意向",value:"B"}),e(d,{label:"C-低意向",value:"C"}),e(d,{label:"D-待跟进",value:"D"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(x,{span:12},{default:t(()=>[e(m,{label:"来源渠道"},{default:t(()=>[e(k,{modelValue:o(r).source_channel,"onUpdate:modelValue":l[12]||(l[12]=a=>o(r).source_channel=a),placeholder:"选择来源"},{default:t(()=>[e(d,{label:"小程序",value:1}),e(d,{label:"H5",value:2}),e(d,{label:"线下",value:3}),e(d,{label:"转介绍",value:4}),e(d,{label:"广告",value:5}),e(d,{label:"其他",value:6})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(O,{gutter:16},{default:t(()=>[e(x,{span:12},{default:t(()=>[e(m,{label:"计划婚期"},{default:t(()=>[e(H,{modelValue:o(r).wedding_date,"onUpdate:modelValue":l[13]||(l[13]=a=>o(r).wedding_date=a),type:"date",placeholder:"选择婚期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:12},{default:t(()=>[e(m,{label:"预算金额"},{default:t(()=>[e(te,{modelValue:o(r).wedding_budget,"onUpdate:modelValue":l[14]||(l[14]=a=>o(r).wedding_budget=a),min:0,precision:2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(O,{gutter:16},{default:t(()=>[e(x,{span:12},{default:t(()=>[e(m,{label:"城市"},{default:t(()=>[e(w,{modelValue:o(r).city,"onUpdate:modelValue":l[15]||(l[15]=a=>o(r).city=a),placeholder:"输入城市"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:12},{default:t(()=>[e(m,{label:"区域"},{default:t(()=>[e(w,{modelValue:o(r).district,"onUpdate:modelValue":l[16]||(l[16]=a=>o(r).district=a),placeholder:"输入区域"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{label:"婚礼场地"},{default:t(()=>[e(w,{modelValue:o(r).wedding_venue,"onUpdate:modelValue":l[17]||(l[17]=a=>o(r).wedding_venue=a),placeholder:"输入婚礼场地"},null,8,["modelValue"])]),_:1}),e(m,{label:"备注"},{default:t(()=>[e(w,{modelValue:o(r).remark,"onUpdate:modelValue":l[18]||(l[18]=a=>o(r).remark=a),type:"textarea",rows:2,placeholder:"输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(Y,{modelValue:o(A),"onUpdate:modelValue":l[24]||(l[24]=a=>S(A)?A.value=a:null),title:"分配销售顾问",width:"500px"},{footer:t(()=>[e(v,{onClick:l[23]||(l[23]=a=>A.value=!1)},{default:t(()=>l[58]||(l[58]=[n("取消")])),_:1}),e(v,{type:"primary",onClick:ye},{default:t(()=>l[59]||(l[59]=[n("确定分配")])),_:1})]),default:t(()=>[e(T,{model:o(_),"label-width":"100px"},{default:t(()=>[e(m,{label:"选择顾问"},{default:t(()=>[e(k,{modelValue:o(_).advisor_id,"onUpdate:modelValue":l[21]||(l[21]=a=>o(_).advisor_id=a),placeholder:"选择销售顾问",style:{width:"100%"}},{default:t(()=>[(g(!0),C(oe,null,de(o(W),a=>(g(),K(d,{key:a.id,label:`${a.advisor_name} (${a.current_customer_count}/${a.max_customer_count})`,value:a.id,disabled:a.current_customer_count>=a.max_customer_count},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"分配原因"},{default:t(()=>[e(w,{modelValue:o(_).reason,"onUpdate:modelValue":l[22]||(l[22]=a=>o(_).reason=a),type:"textarea",rows:2,placeholder:"输入分配原因（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Y,{modelValue:o($),"onUpdate:modelValue":l[32]||(l[32]=a=>S($)?$.value=a:null),title:"添加跟进记录",width:"600px"},{footer:t(()=>[e(v,{onClick:l[31]||(l[31]=a=>$.value=!1)},{default:t(()=>l[61]||(l[61]=[n("取消")])),_:1}),e(v,{type:"primary",onClick:ke},{default:t(()=>l[62]||(l[62]=[n("保存")])),_:1})]),default:t(()=>[e(T,{model:o(f),"label-width":"100px",rules:me,ref_key:"followFormRef",ref:Z},{default:t(()=>[e(m,{label:"跟进方式",prop:"follow_type"},{default:t(()=>[e(k,{modelValue:o(f).follow_type,"onUpdate:modelValue":l[25]||(l[25]=a=>o(f).follow_type=a),placeholder:"选择跟进方式"},{default:t(()=>[e(d,{label:"电话",value:1}),e(d,{label:"微信",value:2}),e(d,{label:"到店",value:3}),e(d,{label:"试妆",value:4}),e(d,{label:"看样片",value:5}),e(d,{label:"上门",value:6}),e(d,{label:"其他",value:7})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"跟进内容",prop:"follow_content"},{default:t(()=>[e(w,{modelValue:o(f).follow_content,"onUpdate:modelValue":l[26]||(l[26]=a=>o(f).follow_content=a),type:"textarea",rows:4,placeholder:"输入跟进内容"},null,8,["modelValue"])]),_:1}),e(m,{label:"跟进结果",prop:"follow_result"},{default:t(()=>[e(k,{modelValue:o(f).follow_result,"onUpdate:modelValue":l[27]||(l[27]=a=>o(f).follow_result=a),placeholder:"选择跟进结果"},{default:t(()=>[e(d,{label:"继续跟进",value:1}),e(d,{label:"意向提升",value:2}),e(d,{label:"意向下降",value:3}),e(d,{label:"已成交",value:4}),e(d,{label:"已流失",value:5})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"跟进后意向"},{default:t(()=>[e(k,{modelValue:o(f).intention_after,"onUpdate:modelValue":l[28]||(l[28]=a=>o(f).intention_after=a),placeholder:"选择意向等级"},{default:t(()=>[e(d,{label:"A-高意向",value:"A"}),e(d,{label:"B-中意向",value:"B"}),e(d,{label:"C-低意向",value:"C"}),e(d,{label:"D-待跟进",value:"D"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"沟通时长"},{default:t(()=>[e(te,{modelValue:o(f).duration,"onUpdate:modelValue":l[29]||(l[29]=a=>o(f).duration=a),min:0},null,8,["modelValue"]),l[60]||(l[60]=u("span",{class:"ml-2 text-gray-400"},"分钟",-1))]),_:1}),e(m,{label:"下次跟进"},{default:t(()=>[e(H,{modelValue:o(f).next_follow_date,"onUpdate:modelValue":l[30]||(l[30]=a=>o(f).next_follow_date=a),type:"datetime",placeholder:"选择下次跟进时间","value-format":"X"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Y,{modelValue:o(F),"onUpdate:modelValue":l[35]||(l[35]=a=>S(F)?F.value=a:null),title:"标记客户流失",width:"500px"},{footer:t(()=>[e(v,{onClick:l[34]||(l[34]=a=>F.value=!1)},{default:t(()=>l[63]||(l[63]=[n("取消")])),_:1}),e(v,{type:"danger",onClick:Ue},{default:t(()=>l[64]||(l[64]=[n("确认标记")])),_:1})]),default:t(()=>[e(T,{model:o(R),"label-width":"100px"},{default:t(()=>[e(m,{label:"流失原因"},{default:t(()=>[e(w,{modelValue:o(R).loss_reason,"onUpdate:modelValue":l[33]||(l[33]=a=>o(R).loss_reason=a),type:"textarea",rows:3,placeholder:"请输入流失原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Y,{modelValue:o(z),"onUpdate:modelValue":l[36]||(l[36]=a=>S(z)?z.value=a:null),title:"客户详情",width:"800px"},{default:t(()=>[o(p)?(g(),C("div",Yl,[e($e,{column:2,border:""},{default:t(()=>[e(c,{label:"客户姓名"},{default:t(()=>[n(i(o(p).customer_name),1)]),_:1}),e(c,{label:"手机号"},{default:t(()=>[n(i(o(p).customer_mobile),1)]),_:1}),e(c,{label:"微信号"},{default:t(()=>[n(i(o(p).customer_wechat||"-"),1)]),_:1}),e(c,{label:"性别"},{default:t(()=>[n(i(o(p).gender_desc),1)]),_:1}),e(c,{label:"意向等级"},{default:t(()=>[e(I,{type:h(o(p).intention_level),size:"large"},{default:t(()=>[n(i(o(p).intention_level)+" - "+i(o(p).intention_level_desc),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"客户状态"},{default:t(()=>[e(I,{type:ee(o(p).customer_status)},{default:t(()=>[n(i(o(p).customer_status_desc),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"计划婚期"},{default:t(()=>[n(i(o(p).wedding_date||"-"),1)]),_:1}),e(c,{label:"预算金额"},{default:t(()=>[n(i(o(p).wedding_budget?"¥"+o(p).wedding_budget:"-"),1)]),_:1}),e(c,{label:"婚礼场地",span:2},{default:t(()=>[n(i(o(p).wedding_venue||"-"),1)]),_:1}),e(c,{label:"城市/区域"},{default:t(()=>[n(i([o(p).city,o(p).district].filter(Boolean).join(" / ")||"-"),1)]),_:1}),e(c,{label:"来源渠道"},{default:t(()=>[n(i(o(p).source_channel_desc),1)]),_:1}),e(c,{label:"销售顾问"},{default:t(()=>{var a;return[n(i(((a=o(p).advisor)==null?void 0:a.advisor_name)||"未分配"),1)]}),_:1}),e(c,{label:"跟进次数"},{default:t(()=>[n(i(o(p).follow_count),1)]),_:1}),e(c,{label:"备注",span:2},{default:t(()=>[n(i(o(p).remark||"-"),1)]),_:1})]),_:1})])):ne("",!0)]),_:1},8,["modelValue"])])}}});export{xt as default};
