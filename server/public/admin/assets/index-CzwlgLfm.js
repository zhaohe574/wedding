import{D as H,B as J,C as G,ae as Q,J as W,K as X,i as Y,H as Z,d as tt,L as et,M as at,q as lt,N as st,g as ot,O as nt}from"./element-plus-ChK2e5qA.js";import{_ as it}from"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import{g as rt,b as dt,f as mt}from"./index-D465kfFn.js";import{d as B,b as pt,a0 as ut,r as ct,a1 as ft,ah as _t,at as bt,c as vt,o as r,U as t,a as o,L as e,u as l,a9 as U,R as d,S as u,M as x,K as c,i as gt}from"./@vue-ygbFPFRc.js";import{R as K,a as xt,c as yt,F as wt}from"./@element-plus-C4Lf8veM.js";import{p as ht,q as Vt,r as Ct,t as kt}from"./staff-C0LmdmFi.js";import{n as Et}from"./service-CD4Egw8G.js";import{u as St}from"./useDictOptions-DB6N0EUo.js";import{u as Dt}from"./usePaging-B2jDzebD.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const Pt={class:"staff-lists"},Ut={class:"mt-4 grid grid-cols-4 gap-4"},Kt={class:"flex items-center justify-between"},Bt={class:"text-2xl font-bold mt-2"},Lt={class:"flex items-center justify-between"},jt={class:"text-2xl font-bold mt-2 text-green-500"},Rt={class:"flex items-center justify-between"},Tt={class:"text-2xl font-bold mt-2 text-red-500"},qt={class:"flex items-center justify-between"},Ft={class:"text-2xl font-bold mt-2 text-orange-500"},It={class:"text-red-500"},Nt={class:"text-orange-500"},Ot={class:"flex justify-end mt-4"},$t=B({name:"staffLists"}),Ee=B({...$t,setup(zt){const S=pt(()=>rt("staff.staff/add:edit")||"/service/staff/edit"),i=ut({name:"",sn:"",category_id:"",status:""}),f=ct({}),{pager:_,getLists:m,resetPage:C,resetParams:L}=Dt({fetchFun:ht,params:i}),{optionsData:j}=St({categories:{api:Et}}),y=async()=>{f.value=await Vt()},R=async(w,a)=>{try{await Ct({id:a,status:w}),m(),y()}catch{m()}},T=async w=>{await mt.confirm("确定要删除该工作人员？"),await kt({id:w}),m(),y()};return ft(()=>{m(),y()}),m(),y(),(w,a)=>{const k=G,b=J,q=Q,E=X,F=W,v=Y,I=H,p=Z,g=tt,N=dt,D=_t("router-link"),n=at,O=lt,P=st,$=ot,z=et,A=it,h=bt("perms"),M=nt;return r(),vt("div",Pt,[t(p,{class:"!border-none",shadow:"never"},{default:e(()=>[t(I,{ref:"formRef",class:"mb-[-16px]",model:l(i),inline:!0},{default:e(()=>[t(b,{class:"w-[200px]",label:"人员名称"},{default:e(()=>[t(k,{modelValue:l(i).name,"onUpdate:modelValue":a[0]||(a[0]=s=>l(i).name=s),placeholder:"输入人员名称",clearable:"",onKeyup:U(l(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{class:"w-[200px]",label:"工号"},{default:e(()=>[t(k,{modelValue:l(i).sn,"onUpdate:modelValue":a[1]||(a[1]=s=>l(i).sn=s),placeholder:"输入工号",clearable:"",onKeyup:U(l(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{class:"w-[200px]",label:"服务分类"},{default:e(()=>[t(q,{modelValue:l(i).category_id,"onUpdate:modelValue":a[2]||(a[2]=s=>l(i).category_id=s),options:l(j).categories,props:{value:"id",label:"name",checkStrictly:!0,emitPath:!1},placeholder:"选择服务分类",clearable:""},null,8,["modelValue","options"])]),_:1}),t(b,{class:"w-[200px]",label:"状态"},{default:e(()=>[t(F,{modelValue:l(i).status,"onUpdate:modelValue":a[3]||(a[3]=s=>l(i).status=s),placeholder:"选择状态",clearable:""},{default:e(()=>[t(E,{label:"全部",value:""}),t(E,{label:"启用",value:1}),t(E,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:e(()=>[t(v,{type:"primary",onClick:l(C)},{default:e(()=>a[5]||(a[5]=[d("查询")])),_:1},8,["onClick"]),t(v,{onClick:l(L)},{default:e(()=>a[6]||(a[6]=[d("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),o("div",Ut,[t(p,{class:"!border-none",shadow:"never"},{default:e(()=>[o("div",Kt,[o("div",null,[a[7]||(a[7]=o("div",{class:"text-gray-500 text-sm"},"全部人员",-1)),o("div",Bt,u(l(f).total||0),1)]),t(g,{class:"text-4xl text-blue-500"},{default:e(()=>[t(l(K))]),_:1})])]),_:1}),t(p,{class:"!border-none",shadow:"never"},{default:e(()=>[o("div",Lt,[o("div",null,[a[8]||(a[8]=o("div",{class:"text-gray-500 text-sm"},"启用人员",-1)),o("div",jt,u(l(f).enable||0),1)]),t(g,{class:"text-4xl text-green-500"},{default:e(()=>[t(l(xt))]),_:1})])]),_:1}),t(p,{class:"!border-none",shadow:"never"},{default:e(()=>[o("div",Rt,[o("div",null,[a[9]||(a[9]=o("div",{class:"text-gray-500 text-sm"},"禁用人员",-1)),o("div",Tt,u(l(f).disable||0),1)]),t(g,{class:"text-4xl text-red-500"},{default:e(()=>[t(l(yt))]),_:1})])]),_:1}),t(p,{class:"!border-none",shadow:"never"},{default:e(()=>[o("div",qt,[o("div",null,[a[10]||(a[10]=o("div",{class:"text-gray-500 text-sm"},"推荐人员",-1)),o("div",Ft,u(l(f).recommend||0),1)]),t(g,{class:"text-4xl text-orange-500"},{default:e(()=>[t(l(wt))]),_:1})])]),_:1})]),t(p,{class:"!border-none mt-4",shadow:"never"},{default:e(()=>[o("div",null,[x((r(),c(D,{to:{path:l(S)}},{default:e(()=>[t(v,{type:"primary",class:"mb-4"},{icon:e(()=>[t(N,{name:"el-icon-Plus"})]),default:e(()=>[a[11]||(a[11]=d(" 新增人员 "))]),_:1})]),_:1},8,["to"])),[[h,["staff.staff/add"]]])]),x((r(),c(z,{size:"large",data:l(_).lists},{default:e(()=>[t(n,{label:"ID",prop:"id",width:"80"}),t(n,{label:"头像",width:"80"},{default:e(({row:s})=>[t(O,{src:s.avatar,size:40},{default:e(()=>[t(g,null,{default:e(()=>[t(l(K))]),_:1})]),_:2},1032,["src"])]),_:1}),t(n,{label:"工号",prop:"sn",width:"120"}),t(n,{label:"姓名",prop:"name","min-width":"100"}),t(n,{label:"服务分类",prop:"category_name","min-width":"100"}),t(n,{label:"服务价格",prop:"price",width:"100"},{default:e(({row:s})=>[o("span",It,"¥"+u(s.price),1)]),_:1}),t(n,{label:"评分",prop:"rating",width:"80"},{default:e(({row:s})=>[o("span",Nt,u(s.rating),1)]),_:1}),t(n,{label:"接单量",prop:"order_count",width:"80"}),t(n,{label:"推荐",width:"80"},{default:e(({row:s})=>[s.is_recommend?(r(),c(P,{key:0,type:"warning"},{default:e(()=>a[12]||(a[12]=[d("推荐")])),_:1})):(r(),c(P,{key:1,type:"info"},{default:e(()=>a[13]||(a[13]=[d("普通")])),_:1}))]),_:1}),t(n,{label:"状态",width:"80"},{default:e(({row:s})=>[x(t($,{modelValue:s.status,"onUpdate:modelValue":V=>s.status=V,"active-value":1,"inactive-value":0,onChange:V=>R(V,s.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[h,["staff.staff/changeStatus"]]])]),_:1}),t(n,{label:"排序",prop:"sort",width:"80"}),t(n,{label:"创建时间",prop:"create_time",width:"170"}),t(n,{label:"操作",width:"150",fixed:"right"},{default:e(({row:s})=>[x((r(),c(v,{type:"primary",link:""},{default:e(()=>[t(D,{to:{path:l(S),query:{id:s.id}}},{default:e(()=>a[14]||(a[14]=[d(" 编辑 ")])),_:2},1032,["to"])]),_:2},1024)),[[h,["staff.staff/edit"]]]),x((r(),c(v,{type:"danger",link:"",onClick:V=>T(s.id)},{default:e(()=>a[15]||(a[15]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[h,["staff.staff/delete"]]])]),_:1})]),_:1},8,["data"])),[[M,l(_).loading]]),o("div",Ot,[t(A,{modelValue:l(_),"onUpdate:modelValue":a[4]||(a[4]=s=>gt(_)?_.value=s:null),onChange:l(m)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{Ee as default};
