import{H as O,B as T,C as $,h as G,g as H,T as K,U as q,i as J,v as M,a6 as Q,D as W}from"./element-plus-ChK2e5qA.js";import{b as X,d as Y}from"./index-D465kfFn.js";import{_ as Z}from"./picker-mSew3b7I.js";import{I as ee}from"./@element-plus-C4Lf8veM.js";import{D as te}from"./vuedraggable-RHgmLr3o.js";import oe from"./activity-picker-B1T9V4C9.js";import{g as le}from"./decoration-gfwwbLJf.js";import{d as ae,b as ie,r as w,w as se,c as E,o as u,U as t,L as o,a as s,K as f,P as C,R as r,S as y,u as U}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-n-Jqn6Y-.js";import"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import"./article-Be81dFL2.js";import"./usePaging-B2jDzebD.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";const ne={key:0,class:"mt-4"},re={class:"mb-2 flex items-center justify-between"},me={class:"text-sm text-gray-600"},de={class:"selected-activity-item mb-2 p-3 bg-gray-50 rounded-lg flex items-center"},ue={class:"drag-handle cursor-move mr-3"},pe={class:"flex-shrink-0 mr-3"},ce={class:"w-16 h-16 flex items-center justify-center bg-gray-200 rounded"},_e={class:"flex-1 min-w-0"},ve={class:"text-sm font-medium text-gray-900 truncate"},fe={class:"text-xs text-gray-500 mt-1"},ye=ae({__name:"attr",props:{content:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})}},emits:["update:content"],setup(A,{emit:h}){const B=h,p=A,l=ie({get:()=>p.content.data_source?p.content:{...p.content,data_source:"auto"},set:a=>{B("update:content",a)}}),x=w(),n=w([]);se(()=>p.content.activity_ids,async a=>{a&&a.length>0?await b(a):n.value=[]},{immediate:!0});const b=async a=>{try{const c=(await le({limit:100})).data||[];n.value=a.map(m=>c.find(_=>_.id===m)).filter(Boolean)}catch(e){console.error("加载活动详情失败:",e)}},D=()=>{var a;(a=x.value)==null||a.open(l.value.activity_ids||[])},R=async a=>{l.value.activity_ids=a,await b(a)},P=a=>{n.value.splice(a,1),l.value.activity_ids=n.value.map(e=>e.id)},N=()=>{l.value.activity_ids=n.value.map(a=>a.id)};return(a,e)=>{const c=$,m=T,_=G,j=H,z=Z,v=O,d=q,g=K,V=J,k=X,I=M,S=Q,F=W;return u(),E("div",null,[t(F,{"label-width":"80px"},{default:o(()=>[t(v,{shadow:"never",class:"!border-none flex mt-2"},{default:o(()=>[e[7]||(e[7]=s("div",{class:"flex items-end mb-4"},[s("div",{class:"text-base text-[#101010] font-medium"},"基础设置")],-1)),t(m,{label:"组件标题"},{default:o(()=>[t(c,{modelValue:l.value.title,"onUpdate:modelValue":e[0]||(e[0]=i=>l.value.title=i),placeholder:"请输入标题",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),t(m,{label:"显示数量"},{default:o(()=>[t(_,{modelValue:l.value.show_count,"onUpdate:modelValue":e[1]||(e[1]=i=>l.value.show_count=i),min:1,max:10,style:{width:"300px"}},null,8,["modelValue"])]),_:1}),t(m,{label:"查看更多"},{default:o(()=>[t(j,{modelValue:l.value.show_more,"onUpdate:modelValue":e[2]||(e[2]=i=>l.value.show_more=i),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),l.value.show_more?(u(),f(m,{key:0,label:"更多链接"},{default:o(()=>[t(z,{modelValue:l.value.more_link,"onUpdate:modelValue":e[3]||(e[3]=i=>l.value.more_link=i)},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1}),t(v,{shadow:"never",class:"!border-none flex mt-2"},{default:o(()=>[e[12]||(e[12]=s("div",{class:"flex items-end mb-4"},[s("div",{class:"text-base text-[#101010] font-medium"},"展示样式")],-1)),t(g,{modelValue:l.value.style,"onUpdate:modelValue":e[4]||(e[4]=i=>l.value.style=i)},{default:o(()=>[t(d,{value:1},{default:o(()=>e[8]||(e[8]=[r("大图样式")])),_:1}),t(d,{value:2},{default:o(()=>e[9]||(e[9]=[r("网格样式")])),_:1}),t(d,{value:3},{default:o(()=>e[10]||(e[10]=[r("横向滑动")])),_:1}),t(d,{value:4},{default:o(()=>e[11]||(e[11]=[r("列表样式")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{shadow:"never",class:"!border-none flex mt-2"},{default:o(()=>[e[16]||(e[16]=s("div",{class:"flex items-end mb-4"},[s("div",{class:"text-base text-[#101010] font-medium"},"数据来源")],-1)),t(g,{modelValue:l.value.data_source,"onUpdate:modelValue":e[5]||(e[5]=i=>l.value.data_source=i)},{default:o(()=>[t(d,{value:"auto"},{default:o(()=>e[13]||(e[13]=[r("自动获取最新活动")])),_:1}),t(d,{value:"manual"},{default:o(()=>e[14]||(e[14]=[r("手动选择活动")])),_:1})]),_:1},8,["modelValue"]),l.value.data_source==="manual"?(u(),E("div",ne,[s("div",re,[s("span",me,"已选择 "+y(n.value.length)+" 个活动",1),t(V,{type:"primary",size:"small",onClick:D},{default:o(()=>e[15]||(e[15]=[r(" 选择活动 ")])),_:1})]),n.value.length?(u(),f(U(te),{key:0,modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=i=>n.value=i),"item-key":"id",animation:"300",handle:".drag-handle",onEnd:N},{item:o(({element:i,index:L})=>[s("div",de,[s("div",ue,[t(k,{name:"el-icon-Rank",size:18,color:"#999"})]),s("div",pe,[t(I,{src:i.cover_image,fit:"cover",class:"w-16 h-16 rounded"},{error:o(()=>[s("div",ce,[t(k,{name:"el-icon-Picture",size:24,color:"#ccc"})])]),_:2},1032,["src"])]),s("div",_e,[s("div",ve,y(i.title),1),s("div",fe,y(i.create_time_text),1)]),t(V,{type:"danger",text:"",icon:U(ee),onClick:xe=>P(L)},null,8,["icon","onClick"])])]),_:1},8,["modelValue"])):(u(),f(S,{key:1,description:"暂未选择活动","image-size":80}))])):C("",!0)]),_:1})]),_:1}),t(oe,{ref_key:"activityPickerRef",ref:x,onConfirm:R},null,512)])}}}),st=Y(ye,[["__scopeId","data-v-375dba05"]]);export{st as default};
