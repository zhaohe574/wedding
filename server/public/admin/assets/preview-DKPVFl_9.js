import{i as I,s as ee,r as te,R as oe,d as ae}from"./element-plus-ChK2e5qA.js";import{d as re,r as N,b as g,c as f,o as p,T as C,a as n,U as i,K as M,P as B,L as m,R as P,ab as R,O as S,H as ne,Q as j,u as y,Z as x,i as ie,S as q}from"./@vue-ygbFPFRc.js";import{W as D,R as z,X as le,F as se,O,H as u,k as pe,v as me,h as ce,Y as ue,Z as de,I as fe}from"./@element-plus-C4Lf8veM.js";import{m as ve,d as _e}from"./index-D465kfFn.js";import{e as W}from"./index-Dc-LK47z.js";import{e as $}from"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./attr-BLn4dXxi.js";import"./picker-mSew3b7I.js";import"./index-n-Jqn6Y-.js";import"./index.vue_vue_type_script_setup_true_lang-CCtv5BMP.js";import"./article-Be81dFL2.js";import"./usePaging-B2jDzebD.js";import"./vuedraggable-RHgmLr3o.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";import"./activity-picker-B1T9V4C9.js";import"./decoration-gfwwbLJf.js";import"./content-BQ6OU_EV.js";import"./decoration-img-BIfH34zk.js";import"./decoration-img.vue_vue_type_style_index_0_scoped_2e762fcb_lang-CPJCPwt5.js";import"./attr-DgxMlG-i.js";import"./index-DlQH-CEM.js";import"./picker-COC_GcuI.js";import"./index-dAc1fhtT.js";import"./index-DFyja3d3.js";import"./index.vue_vue_type_script_setup_true_lang-T0yi5BSL.js";import"./content.vue_vue_type_script_setup_true_lang-CV2k-xVG.js";import"./attr-CpSMUUXJ.js";import"./coupon-Bb8ktR8y.js";import"./content-Bfq4E6kT.js";import"./attr-wy4Pr9aX.js";import"./content-CIwgBdc-.js";import"./attr.vue_vue_type_script_setup_true_lang-CPDOKPev.js";import"./content-CJlZcFa2.js";import"./attr-le259Bxl.js";import"./content-CdkfhcGl.js";import"./attr-CyCLQ9IJ.js";import"./content-BCEjTGP9.js";import"./attr-DOghvc79.js";import"./content-Do_SXDz6.js";import"./attr.vue_vue_type_script_setup_true_lang-DPeh7y8f.js";import"./content.vue_vue_type_script_setup_true_lang-z0esV6ev.js";import"./attr.vue_vue_type_script_setup_true_lang-B68_HuaL.js";import"./add-nav.vue_vue_type_script_setup_true_lang-Bxl6DtTr.js";import"./content-CNFtbjj6.js";import"./attr.vue_vue_type_script_setup_true_lang-8tJxPhk9.js";import"./content.vue_vue_type_script_setup_true_lang-BbPCoKEJ.js";import"./attr.vue_vue_type_script_setup_true_lang-CM9uYZiS.js";import"./content-Bt4jFCVM.js";import"./attr-eWMVL8pp.js";import"./content-weNVlIqW.js";import"./attr.vue_vue_type_script_setup_true_lang-BpRXhSj1.js";import"./content.vue_vue_type_script_setup_true_lang-DbRye1Hn.js";import"./attr.vue_vue_type_script_setup_true_lang-DroeJmYH.js";import"./index.vue_vue_type_script_setup_true_lang-CbFJlk7l.js";import"./content-CTgGItEq.js";import"./content.vue_vue_type_script_setup_true_lang-TIXtfs6k.js";import"./attr-C2_OfPec.js";import"./content-CeJZa8eD.js";import"./attr-F-ID1n2K.js";import"./content-CosC0GA_.js";import"./attr.vue_vue_type_script_setup_true_lang-DMv5qI4Z.js";import"./content-CYB3jMH8.js";import"./attr-CK15FsTZ.js";import"./service-CD4Egw8G.js";import"./content-CRTqMYbP.js";import"./attr-D8rmzcRM.js";import"./content-BDa0bMEZ.js";import"./attr-WYGs4mbd.js";import"./staff-C0LmdmFi.js";import"./content-Bog4oqys.js";import"./content-BiLGyk80.js";import"./attr-DS6mi41F.js";import"./attr.vue_vue_type_script_setup_true_lang-Ddi2l4zy.js";import"./content.vue_vue_type_script_setup_true_lang-C-wmjWAW.js";import"./attr.vue_vue_type_script_setup_true_lang-D259oKt5.js";import"./content-iS7AcNG_.js";import"./content-BxQo12fg.js";import"./attr.vue_vue_type_script_setup_true_lang-BWDkIuv7.js";const ye={class:"pages-preview-wrapper"},he={class:"flex justify-center gap-2"},be={class:"pages-preview-content"},ge={class:"shadow pages-preview"},ke=["onClick"],De={key:0,class:"widget-btns py-[5px]"},Ve={key:0,class:"grid grid-cols-3 gap-4"},Ce=["onClick"],Me={class:"text-center"},Pe={class:"w-12 h-12 mx-auto mb-2 bg-gray-100 rounded-lg flex items-center justify-center"},Se={class:"text-sm font-medium"},xe={class:"text-xs text-gray-400 mt-1"},We={key:1,class:"text-center py-8 text-gray-400"},$e=re({__name:"preview",props:{pageMeta:{type:Object,default:()=>null},pageData:{type:Array,default:()=>[]},modelValue:{type:Number,default:0},activeMenu:{type:String,default:"1"}},emits:["update:modelValue","updatePageData"],setup(b,{emit:U}){const w={1:"home",2:"user",3:"service"},F=[{name:"search",title:"搜索框",icon:"Search"},{name:"banner",title:"轮播图",icon:D},{name:"nav",title:"导航菜单",icon:"Grid"},{name:"middle-banner",title:"中部轮播图",icon:D},{name:"staff-showcase",title:"人员推荐",icon:z},{name:"service-packages",title:"服务套餐",icon:le},{name:"portfolio-gallery",title:"案例作品",icon:D},{name:"customer-reviews",title:"客户评价",icon:se},{name:"activity-zone",title:"活动专区",icon:O},{name:"order-quick-entry",title:"订单快捷入口",icon:u},{name:"news",title:"最新资讯",icon:u},{name:"quick-entry",title:"快捷入口",icon:u},{name:"coupon-receive",title:"优惠券领取",icon:O},{name:"data-stats",title:"数据统计",icon:u},{name:"faq",title:"常见问题",icon:u},{name:"service-process",title:"服务流程",icon:u},{name:"notice-bar",title:"公告通知",icon:u},{name:"hot-topics",title:"热门话题",icon:u},{name:"store-map",title:"门店地图",icon:u},{name:"wedding-countdown",title:"婚礼倒计时",icon:pe},{name:"user-info",title:"用户信息",icon:z},{name:"my-service",title:"我的服务",icon:u},{name:"user-banner",title:"用户横幅",icon:D}],h=N(!1),r=b,c=U,A=N(-1),H=g(()=>{const t=w[r.activeMenu];return t||(console.warn("未知的页面类型:",r.activeMenu,"使用默认值: home"),"home")}),T=g(()=>{const t=H.value;return F.filter(e=>{var v;const a=W[e.name],l=(v=a==null?void 0:a.options)==null?void 0:v.call(a),d=l==null?void 0:l.pageScope;return!d||!Array.isArray(d)?!0:d.includes(t)})}),L=()=>{r.modelValue===-1?c("update:modelValue",A.value):(A.value=r.modelValue,c("update:modelValue",-1))},Z=(t,e)=>{t.disabled||c("update:modelValue",e)},G=g(()=>t=>t===0),K=g(()=>t=>{var e;return((e=r.pageData)==null?void 0:e.length)===t+1}),V=g(()=>t=>(t==null?void 0:t.enabled)==0),Q=t=>{t.enabled!==void 0&&(t.enabled=t.enabled?0:1)},E=(t,e)=>{if(t<0||t>=r.pageData.length||e<0||e>=r.pageData.length)return;const a=$(r.pageData),l=a.splice(t,1)[0];a.splice(e,0,l),c("updatePageData",a),c("update:modelValue",e)},k=t=>r.pageData.some(e=>e.name===t),X=t=>{var v;if(k(t.name))return;const e=W[t.name];if(!e){console.error("组件配置不存在:",t.name);return}const a=(v=e.options)==null?void 0:v.call(e);if(!a){console.error("组件options方法不存在:",t.name);return}const l={id:ve(),...a},d=$(r.pageData);d.push(l),c("updatePageData",d),c("update:modelValue",d.length-1),h.value=!1},Y=t=>{const e=$(r.pageData);e.splice(t,1),c("updatePageData",e),r.modelValue>=e.length?c("update:modelValue",Math.max(0,e.length-1)):r.modelValue===t&&c("update:modelValue",Math.max(0,t-1))};return(t,e)=>{const a=I,l=te,d=ee,v=ae,J=oe;return p(),f(C,null,[n("div",ye,[n("div",he,[b.pageMeta!==null?(p(),M(a,{key:0,onClick:L},{default:m(()=>e[3]||(e[3]=[P("页面设置")])),_:1})):B("",!0),i(a,{type:"primary",onClick:e[0]||(e[0]=o=>h.value=!0)},{default:m(()=>e[4]||(e[4]=[P("添加组件")])),_:1})]),i(d,{class:"pages-preview-container"},{default:m(()=>[n("div",be,[n("div",ge,[(p(!0),f(C,null,R(b.pageData,(o,s)=>(p(),f("div",{key:o.id,class:S(["relative",{"cursor-pointer":!(o!=null&&o.disabled)}]),onClick:_=>Z(o,s)},[n("div",{class:S(["absolute w-full h-full z-[100] border-dashed",{select:s==b.modelValue,hide:V.value(o.content),"border-[#dcdfe6] border-2":!(o!=null&&o.disabled)}])},null,2),ne(t.$slots,"default",{},()=>{var _;return[(p(),M(j((_=y(W)[o==null?void 0:o.name])==null?void 0:_.content),{content:o.content,styles:o.styles,key:o.id},null,8,["content","styles"]))]},!0),s==b.modelValue?(p(),f("div",De,[n("div",null,[i(l,{effect:"dark",content:V.value(o.content)?"显示":"隐藏",placement:"right"},{default:m(()=>[i(a,{class:"py-[5px]",type:"primary",icon:V.value(o.content)?y(me):y(ce),onClick:_=>Q(o.content)},null,8,["icon","onClick"])]),_:2},1032,["content"])]),n("div",null,[i(l,{effect:"dark",content:"上移",placement:"right"},{default:m(()=>[i(a,{class:"py-[5px]",type:"primary",icon:y(ue),disabled:G.value(s),onClick:x(_=>E(s,s-1),["stop"])},null,8,["icon","disabled","onClick"])]),_:2},1024)]),n("div",null,[i(l,{effect:"dark",content:"下移",placement:"right"},{default:m(()=>[i(a,{class:"py-[5px]",type:"primary",icon:y(de),disabled:K.value(s),onClick:x(_=>E(s,s+1),["stop"])},null,8,["icon","disabled","onClick"])]),_:2},1024)]),n("div",null,[i(l,{effect:"dark",content:"删除组件",placement:"right"},{default:m(()=>[i(a,{class:"py-[5px]",type:"danger",icon:y(fe),onClick:x(_=>Y(s),["stop"])},null,8,["icon","onClick"])]),_:2},1024)])])):B("",!0)],10,ke))),128))])])]),_:3})]),i(J,{modelValue:y(h),"onUpdate:modelValue":e[2]||(e[2]=o=>ie(h)?h.value=o:null),title:"添加组件",width:"600px"},{footer:m(()=>[i(a,{onClick:e[1]||(e[1]=o=>h.value=!1)},{default:m(()=>e[5]||(e[5]=[P("关闭")])),_:1})]),default:m(()=>[T.value.length>0?(p(),f("div",Ve,[(p(!0),f(C,null,R(T.value,o=>(p(),f("div",{key:o.name,class:S(["p-4 border rounded-lg cursor-pointer hover:border-primary hover:bg-blue-50 transition-colors",{"border-primary bg-blue-50":k(o.name),"opacity-50":k(o.name)}]),onClick:s=>X(o)},[n("div",Me,[n("div",Pe,[i(v,{class:"text-xl text-gray-500"},{default:m(()=>[(p(),M(j(o.icon)))]),_:2},1024)]),n("div",Se,q(o.title),1),n("div",xe,q(k(o.name)?"已添加":"点击添加"),1)])],10,Ce))),128))])):(p(),f("div",We," 暂无可添加的组件 "))]),_:1},8,["modelValue"])],64)}}}),Wo=_e($e,[["__scopeId","data-v-1f5e3f9d"]]);export{Wo as default};
