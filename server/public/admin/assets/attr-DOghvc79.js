import{H as z,B as G,C as H,T as J,U as P,h as q,J as Q,K as W,g as X,i as Y,$ as Z,D as ee,E as te}from"./element-plus-ChK2e5qA.js";import{b as oe,d as ae}from"./index-D465kfFn.js";import{I as le}from"./@element-plus-C4Lf8veM.js";import{D as se}from"./vuedraggable-RHgmLr3o.js";import{a as ne}from"./decoration-gfwwbLJf.js";import{d as ie,b as re,r as E,l as de,c as V,o as u,U as l,L as s,K as y,P as k,a as n,u as i,R as p,S as me,T as C,ab as U,i as ue}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";const pe={class:"topic-list"},ce={class:"topic-item mb-4 p-4 bg-gray-50 rounded-lg"},_e={class:"flex items-start"},fe={class:"drag-handle cursor-move mr-3 mt-2"},ve={class:"flex-1 min-w-0"},be={class:"flex items-center gap-2 flex-wrap mb-2"},xe={class:"font-medium text-gray-900"},ye={class:"ml-4 flex flex-col gap-2 flex-shrink-0"},ge={class:"mt-2"},Ve=ie({__name:"attr",props:{content:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})}},emits:["update:content"],setup(D,{emit:T}){const g=T,f=D,o=re({get:()=>f.content,set:t=>{g("update:content",t)}});function B(){var t;Array.isArray((t=f.content)==null?void 0:t.data)||g("update:content",{...f.content,data:[]})}const c=E([]),v=E("");de(()=>{B(),N()});async function N(){try{const t=await ne();c.value=Array.isArray(t)?t:(t==null?void 0:t.lists)??(t==null?void 0:t.data)??[]}catch(t){console.error("加载话题列表失败",t),c.value=[]}}function R(t){const e=c.value.find(m=>m.id===t);return(e==null?void 0:e.name)||""}function O(t,e){if(!e)return;const m=Array.isArray(o.value.data)?[...o.value.data]:[],r=m[t];m[t]={topic_id:e,is_show:(r==null?void 0:r.is_show)??"1",sort:(r==null?void 0:r.sort)??t},o.value={...o.value,data:m}}function I(t){if(!t)return;v.value="";const e=Array.isArray(o.value.data)?[...o.value.data]:[];e.push({topic_id:t,is_show:"1",sort:e.length}),o.value={...o.value,data:e},te.success("添加成功")}function S(t){const e=Array.isArray(o.value.data)?[...o.value.data]:[];e.splice(t,1),o.value={...o.value,data:e}}return(t,e)=>{const m=H,r=G,_=P,w=J,F=q,b=z,L=oe,h=W,A=Q,$=X,j=Y,K=Z,M=ee;return u(),V("div",null,[l(M,{"label-width":"80px"},{default:s(()=>[l(b,{shadow:"never",class:"!border-none flex mt-2"},{default:s(()=>[e[8]||(e[8]=n("div",{class:"flex items-end mb-4"},[n("div",{class:"text-base text-[#101010] font-medium"},"基础设置")],-1)),l(r,{label:"组件标题"},{default:s(()=>[l(m,{modelValue:i(o).title,"onUpdate:modelValue":e[0]||(e[0]=a=>i(o).title=a),placeholder:"请输入标题",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),l(r,{label:"话题来源"},{default:s(()=>[l(w,{modelValue:i(o).source,"onUpdate:modelValue":e[1]||(e[1]=a=>i(o).source=a)},{default:s(()=>[l(_,{value:1},{default:s(()=>e[6]||(e[6]=[p("手动选择")])),_:1}),l(_,{value:2},{default:s(()=>e[7]||(e[7]=[p("自动获取热门")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"显示数量"},{default:s(()=>[l(F,{modelValue:i(o).show_count,"onUpdate:modelValue":e[2]||(e[2]=a=>i(o).show_count=a),min:5,max:20,style:{width:"300px"}},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{shadow:"never",class:"!border-none flex mt-2"},{default:s(()=>[e[12]||(e[12]=n("div",{class:"flex items-end mb-4"},[n("div",{class:"text-base text-[#101010] font-medium"},"展示样式")],-1)),l(w,{modelValue:i(o).style,"onUpdate:modelValue":e[3]||(e[3]=a=>i(o).style=a)},{default:s(()=>[l(_,{value:1},{default:s(()=>e[9]||(e[9]=[p("标签云")])),_:1}),l(_,{value:2},{default:s(()=>e[10]||(e[10]=[p("横向滑动")])),_:1}),l(_,{value:3},{default:s(()=>e[11]||(e[11]=[p("列表式")])),_:1})]),_:1},8,["modelValue"])]),_:1}),i(o).source==1?(u(),y(b,{key:0,shadow:"never",class:"!border-none flex mt-2"},{default:s(()=>[e[15]||(e[15]=n("div",{class:"flex items-end mb-4"},[n("div",{class:"text-base text-[#101010] font-medium"},"话题列表"),n("div",{class:"text-xs text-tx-secondary ml-2"},"从已存在的话题中选择")],-1)),n("div",pe,[l(i(se),{"model-value":Array.isArray(i(o).data)?i(o).data:[],"onUpdate:modelValue":e[4]||(e[4]=a=>g("update:content",{...f.content,data:a})),"item-key":(a,x)=>a&&a.topic_id?a.topic_id:"i"+x,animation:"300",handle:".drag-handle"},{item:s(({element:a,index:x})=>[n("div",ce,[n("div",_e,[n("div",fe,[l(L,{name:"el-icon-Rank",size:18,color:"#999"})]),n("div",ve,[n("div",be,[n("span",xe,me(R(a.topic_id)||"未选择"),1)]),l(r,{label:"选择话题",class:"!mb-0","label-width":"80px"},{default:s(()=>[l(A,{"model-value":a.topic_id||"",placeholder:"选择话题",filterable:"",clearable:"",style:{width:"280px"},onChange:d=>O(x,d)},{default:s(()=>[(u(!0),V(C,null,U(i(c),d=>(u(),y(h,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:2},1024)]),n("div",ye,[l($,{modelValue:a.is_show,"onUpdate:modelValue":d=>a.is_show=d,"active-value":"1","inactive-value":"0","active-text":"显示"},null,8,["modelValue","onUpdate:modelValue"]),l(j,{type:"danger",text:"",icon:i(le),onClick:d=>S(x)},{default:s(()=>e[13]||(e[13]=[p(" 删除 ")])),_:2},1032,["icon","onClick"])])])])]),_:1},8,["model-value","item-key"]),n("div",ge,[e[14]||(e[14]=n("span",{class:"text-sm text-gray-500 mr-2"},"添加话题：",-1)),l(A,{modelValue:i(v),"onUpdate:modelValue":e[5]||(e[5]=a=>ue(v)?v.value=a:null),placeholder:"请选择要展示的话题",filterable:"",clearable:"",style:{width:"280px"},onChange:I},{default:s(()=>[(u(!0),V(C,null,U(i(c),a=>(u(),y(h,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])]),_:1})):k("",!0),i(o).source==2?(u(),y(b,{key:1,shadow:"never",class:"!border-none flex mt-2"},{default:s(()=>[l(K,{title:"自动获取热门话题",type:"info",closable:!1,description:"系统将自动获取最热门的话题，按参与人数排序。无需手动选择。"})]),_:1})):k("",!0)]),_:1})])}}}),at=ae(Ve,[["__scopeId","data-v-6920b713"]]);export{at as default};
