import{H as $,B as z,h as G,a7 as H,T as J,U as P,f as q,J as Q,K as W,g as X,i as Y,D as Z,E as tt}from"./element-plus-ChK2e5qA.js";import{b as et,d as ot}from"./index-D465kfFn.js";import{I as lt}from"./@element-plus-C4Lf8veM.js";import{D as at}from"./vuedraggable-RHgmLr3o.js";import{c as st}from"./decoration-gfwwbLJf.js";import{d as nt,b as it,r as E,l as dt,c as g,o as p,U as a,L as n,a as s,u as i,R as v,S as rt,T as A,ab as k,K as U,i as mt}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";const ut={class:"notice-list"},pt={class:"notice-item mb-4 p-4 bg-gray-50 rounded-lg"},ct={class:"flex items-start"},_t={class:"drag-handle cursor-move mr-3 mt-2"},ft={class:"flex-1 min-w-0"},vt={class:"flex items-center gap-2 flex-wrap mb-2"},xt={class:"font-medium text-gray-900"},bt={class:"ml-4 flex flex-col gap-2 flex-shrink-0"},yt={class:"mt-2"},gt=nt({__name:"attr",props:{content:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})}},emits:["update:content"],setup(N,{emit:C}){const x=C,c=N,l=it({get:()=>c.content,set:e=>{x("update:content",e)}});function D(){var e;Array.isArray((e=c.content)==null?void 0:e.data)||x("update:content",{...c.content,data:[]})}const u=E([]),_=E("");dt(()=>{D(),B()});async function B(){try{const e=await st();u.value=Array.isArray(e)?e:(e==null?void 0:e.lists)??(e==null?void 0:e.data)??[]}catch(e){console.error("加载公告列表失败",e),u.value=[]}}function R(e){const t=u.value.find(m=>m.id===e);return(t==null?void 0:t.title)||""}function O(e,t){if(!t)return;const m=Array.isArray(l.value.data)?[...l.value.data]:[],d=m[e];m[e]={notice_id:t,is_show:(d==null?void 0:d.is_show)??"1",sort:(d==null?void 0:d.sort)??e},l.value={...l.value,data:m}}function S(e){if(!e)return;_.value="";const t=Array.isArray(l.value.data)?[...l.value.data]:[];t.push({notice_id:e,is_show:"1",sort:t.length}),l.value={...l.value,data:t},tt.success("添加成功")}function F(e){const t=Array.isArray(l.value.data)?[...l.value.data]:[];t.splice(e,1),l.value={...l.value,data:t}}return(e,t)=>{const m=G,d=z,I=H,b=$,y=P,L=J,V=q,T=et,w=W,h=Q,j=X,K=Y,M=Z;return p(),g("div",null,[a(M,{"label-width":"80px"},{default:n(()=>[a(b,{shadow:"never",class:"!border-none flex mt-2"},{default:n(()=>[t[8]||(t[8]=s("div",{class:"flex items-end mb-4"},[s("div",{class:"text-base text-[#101010] font-medium"},"基础设置")],-1)),a(d,{label:"显示数量"},{default:n(()=>[a(m,{modelValue:i(l).show_count,"onUpdate:modelValue":t[0]||(t[0]=o=>i(l).show_count=o),min:1,max:5,style:{width:"300px"}},null,8,["modelValue"])]),_:1}),a(d,{label:"滚动速度"},{default:n(()=>[a(I,{modelValue:i(l).scroll_speed,"onUpdate:modelValue":t[1]||(t[1]=o=>i(l).scroll_speed=o),min:10,max:100,step:10,"show-input":"",style:{width:"300px"}},null,8,["modelValue"]),t[7]||(t[7]=s("div",{class:"text-xs text-gray-500 mt-1"},"单位：像素/秒",-1))]),_:1})]),_:1}),a(b,{shadow:"never",class:"!border-none flex mt-2"},{default:n(()=>[t[12]||(t[12]=s("div",{class:"flex items-end mb-4"},[s("div",{class:"text-base text-[#101010] font-medium"},"展示样式")],-1)),a(L,{modelValue:i(l).style,"onUpdate:modelValue":t[2]||(t[2]=o=>i(l).style=o)},{default:n(()=>[a(y,{value:1},{default:n(()=>t[9]||(t[9]=[v("横向滚动")])),_:1}),a(y,{value:2},{default:n(()=>t[10]||(t[10]=[v("纵向滚动")])),_:1}),a(y,{value:3},{default:n(()=>t[11]||(t[11]=[v("静态展示")])),_:1})]),_:1},8,["modelValue"]),a(d,{label:"背景颜色",class:"mt-4"},{default:n(()=>[a(V,{modelValue:i(l).bg_color,"onUpdate:modelValue":t[3]||(t[3]=o=>i(l).bg_color=o),"show-alpha":""},null,8,["modelValue"])]),_:1}),a(d,{label:"文字颜色"},{default:n(()=>[a(V,{modelValue:i(l).text_color,"onUpdate:modelValue":t[4]||(t[4]=o=>i(l).text_color=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(b,{shadow:"never",class:"!border-none flex mt-2"},{default:n(()=>[t[15]||(t[15]=s("div",{class:"flex items-end mb-4"},[s("div",{class:"text-base text-[#101010] font-medium"},"公告列表"),s("div",{class:"text-xs text-tx-secondary ml-2"},"从已存在的公告中选择")],-1)),s("div",ut,[a(i(at),{"model-value":Array.isArray(i(l).data)?i(l).data:[],"onUpdate:modelValue":t[5]||(t[5]=o=>x("update:content",{...c.content,data:o})),"item-key":(o,f)=>o&&o.notice_id?o.notice_id:"i"+f,animation:"300",handle:".drag-handle"},{item:n(({element:o,index:f})=>[s("div",pt,[s("div",ct,[s("div",_t,[a(T,{name:"el-icon-Rank",size:18,color:"#999"})]),s("div",ft,[s("div",vt,[s("span",xt,rt(R(o.notice_id)||"未选择"),1)]),a(d,{label:"选择公告",class:"!mb-0","label-width":"80px"},{default:n(()=>[a(h,{"model-value":o.notice_id||"",placeholder:"选择公告",filterable:"",clearable:"",style:{width:"280px"},onChange:r=>O(f,r)},{default:n(()=>[(p(!0),g(A,null,k(i(u),r=>(p(),U(w,{key:r.id,label:r.title,value:r.id},null,8,["label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:2},1024)]),s("div",bt,[a(j,{modelValue:o.is_show,"onUpdate:modelValue":r=>o.is_show=r,"active-value":"1","inactive-value":"0","active-text":"显示"},null,8,["modelValue","onUpdate:modelValue"]),a(K,{type:"danger",text:"",icon:i(lt),onClick:r=>F(f)},{default:n(()=>t[13]||(t[13]=[v(" 删除 ")])),_:2},1032,["icon","onClick"])])])])]),_:1},8,["model-value","item-key"]),s("div",yt,[t[14]||(t[14]=s("span",{class:"text-sm text-gray-500 mr-2"},"添加公告：",-1)),a(h,{modelValue:i(_),"onUpdate:modelValue":t[6]||(t[6]=o=>mt(_)?_.value=o:null),placeholder:"请选择要展示的公告",filterable:"",clearable:"",style:{width:"280px"},onChange:S},{default:n(()=>[(p(!0),g(A,null,k(i(u),o=>(p(),U(w,{key:o.id,label:o.title,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])]),_:1})]),_:1})])}}}),oe=ot(gt,[["__scopeId","data-v-52de4db8"]]);export{oe as default};
