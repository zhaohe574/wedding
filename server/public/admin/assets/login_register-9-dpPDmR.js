import{_ as q}from"./index-B-cygYOY.js";import{H as C,B,a8 as D,F as U,g as R,i as F,D as S}from"./element-plus-ChK2e5qA.js";import{g as L,s as N}from"./user-BjTiOoX0.js";import{d as y,r as P,a0 as b,at as W,c as j,o as w,U as l,M as A,L as r,a as t,u as i,R as a,S as _,K as G}from"./@vue-ygbFPFRc.js";import"./index-D465kfFn.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./@element-plus-C4Lf8veM.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";const H={class:"login-register"},I={class:"mt-1 ml-2"},K={class:"mt-1 ml-2"},M={class:"mt-1 ml-2"},T={href:"https://open.weixin.qq.com/",target:"_blank"},z=y({name:"loginRegister"}),Ce=y({...z,setup(J){const d=P(),o=b({login_way:[],coerce_mobile:0,login_agreement:0,third_auth:0,wechat_auth:0,qq_auth:0}),V=b({loginWay:[{required:!0,validator:(s,e,m)=>{if(o.login_way.join("").length===0)m(new Error("登录方式至少选择一项！"));else{if(o.login_way!==""){if(!d.value)return;d.value.validateField("checkPass")}m()}},trigger:"change"}],coerce_mobile:[{required:!0,trigger:"blur"}],login_agreement:[{required:!0,trigger:"blur"}],third_auth:[{required:!0,trigger:"blur"}]}),g=async()=>{try{const s=await L();for(const e in o)o[e]=s[e]}catch(s){console.log("获取=>",s)}},k=async()=>{var s;await((s=d.value)==null?void 0:s.validate());try{await N(o),g()}catch(e){console.log("保存=>",e)}};return g(),(s,e)=>{const m=U,f=D,u=B,p=R,v=C,c=F,h=S,x=q,E=W("perms");return w(),j("div",H,[l(h,{ref_key:"formRef",ref:d,rules:i(V),model:i(o),"label-width":"120px"},{default:r(()=>[l(v,{shadow:"never",class:"!border-none"},{default:r(()=>[e[10]||(e[10]=t("div",{class:"font-medium mb-7"},"通用设置",-1)),l(u,{label:"登录方式",prop:"login_way"},{default:r(()=>[t("div",null,[l(f,{modelValue:i(o).login_way,"onUpdate:modelValue":e[0]||(e[0]=n=>i(o).login_way=n)},{default:r(()=>[l(m,{value:"1"},{default:r(()=>e[5]||(e[5]=[a("账号密码登录")])),_:1}),l(m,{value:"2"},{default:r(()=>e[6]||(e[6]=[a("手机验证码登录")])),_:1})]),_:1},8,["modelValue"]),e[7]||(e[7]=t("div",{class:"form-tips"},"系统通用登录方式，至少选择一项",-1))])]),_:1}),l(u,{label:"强制绑定手机",prop:"coerce_mobile"},{default:r(()=>[t("div",null,[l(p,{modelValue:i(o).coerce_mobile,"onUpdate:modelValue":e[1]||(e[1]=n=>i(o).coerce_mobile=n),"active-value":1,"inactive-value":0},null,8,["modelValue"]),t("span",I,_(i(o).coerce_mobile?"开启":"关闭"),1),e[8]||(e[8]=t("div",{class:"form-tips"},[a(" 1、如果开启，则新用户在注册完成之后要强制绑定手机号"),t("br"),a(" 2、老用户登录时如果检测到没有绑定手机，则要重新绑定手机号 ")],-1))])]),_:1}),l(u,{label:"政策协议",prop:"login_agreement"},{default:r(()=>[t("div",null,[l(p,{modelValue:i(o).login_agreement,"onUpdate:modelValue":e[2]||(e[2]=n=>i(o).login_agreement=n),"active-value":1,"inactive-value":0},null,8,["modelValue"]),t("span",K,_(i(o).login_agreement?"开启":"关闭"),1),e[9]||(e[9]=t("div",{class:"form-tips"},"登录/注册会员时，是否显示服务协议和隐私政策",-1))])]),_:1})]),_:1}),l(v,{shadow:"never",class:"!border-none mt-4"},{default:r(()=>[e[15]||(e[15]=t("div",{class:"font-medium mb-7"},"第三方设置",-1)),l(u,{label:"第三方登录",prop:"third_auth"},{default:r(()=>[t("div",null,[l(p,{modelValue:i(o).third_auth,"onUpdate:modelValue":e[3]||(e[3]=n=>i(o).third_auth=n),"active-value":1,"inactive-value":0},null,8,["modelValue"]),t("span",M,_(i(o).third_auth?"开启":"关闭"),1),e[12]||(e[12]=t("div",{class:"form-tips"},"登录时支持第三方登录，新用户授权即自动注册账号",-1)),t("div",null,[l(m,{modelValue:i(o).wechat_auth,"onUpdate:modelValue":e[4]||(e[4]=n=>i(o).wechat_auth=n),"true-value":1,"false-value":0},{default:r(()=>e[11]||(e[11]=[a(" 微信登录 ")])),_:1},8,["modelValue"])])])]),_:1}),l(u,{label:"微信开放平台"},{default:r(()=>[t("div",null,[t("a",T,[l(c,{type:"primary",link:"",class:"underline"},{default:r(()=>e[13]||(e[13]=[a(" 前往微信开放平台 ")])),_:1})]),e[14]||(e[14]=t("div",{class:"form-tips"},[a(" 1、在各渠道使用微信授权登录时，强烈建议配置微信开放平台"),t("br"),a(" 2、微信开放平台关联公众号、小程序和APP后，可实现各端用户账号统一，识别买家唯一微信身份"),t("br"),a(" 3、没有配置微信开放平台，同一微信号会生成多个用户，配置微信开放平台后已生成的用户账号无法合并 ")],-1))])]),_:1})]),_:1})]),_:1},8,["rules","model"]),A((w(),G(x,null,{default:r(()=>[l(c,{type:"primary",onClick:k},{default:r(()=>e[16]||(e[16]=[a("保存")])),_:1})]),_:1})),[[E,["setting.user.user/setRegisterConfig"]]])])}}});export{Ce as default};
