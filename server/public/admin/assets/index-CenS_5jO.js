import{D as P,B as A,J as H,K as J,C as z,i as G,H as Q,L as W,M as X,N as Y,g as Z,O as ee,f as le,h as te,R as ae,E as g,a as oe}from"./element-plus-ChK2e5qA.js";import{u as ne,v as se,w as ie,x as de,y as ue}from"./review-BZd6SHk0.js";import{d as me,r as _,a0 as T,b as re,l as pe,c as ce,o as R,U as e,L as t,R as s,M as fe,K as _e,S as U}from"./@vue-ygbFPFRc.js";import"./@element-plus-C4Lf8veM.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-D465kfFn.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-DRRUpF4H.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DDSL_IW4.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const ve={class:"tag-container"},We=me({__name:"index",setup(ge){const v=_(!1),b=_([]),r=_(!1),y=_(),i=T({type:void 0,name:""}),o=T({id:0,name:"",type:1,color:"",sort:0,status:1}),D={name:[{required:!0,message:"请输入标签名称",trigger:"blur"}],type:[{required:!0,message:"请选择标签类型",trigger:"change"}]},S=re(()=>o.id?"编辑标签":"添加标签"),B=n=>({1:"success",2:"warning",3:"danger"})[n]||"info",c=async()=>{v.value=!0;try{const n=await ne(i);b.value=n.lists||[]}finally{v.value=!1}},L=()=>{i.type=void 0,i.name="",c()},M=()=>{Object.assign(o,{id:0,name:"",type:1,color:"",sort:0,status:1}),r.value=!0},h=n=>{Object.assign(o,n),r.value=!0},I=async()=>{var n;await((n=y.value)==null?void 0:n.validate()),o.id?await se(o):await ie(o),g.success("操作成功"),r.value=!1,c()},N=async n=>{await oe.confirm("确定删除该标签吗？","提示"),await de({id:n.id}),g.success("删除成功"),c()},O=async n=>{await ue({id:n.id}),g.success("操作成功")};return pe(()=>{c()}),(n,l)=>{const p=J,V=H,d=A,w=z,u=G,E=P,C=Q,m=X,k=Y,x=Z,$=W,q=le,j=te,F=ae,K=ee;return R(),ce("div",ve,[e(C,{shadow:"never",class:"mb-4"},{default:t(()=>[e(E,{model:i,inline:""},{default:t(()=>[e(d,{label:"标签类型"},{default:t(()=>[e(V,{modelValue:i.type,"onUpdate:modelValue":l[0]||(l[0]=a=>i.type=a),placeholder:"请选择",clearable:"",style:{width:"120px"}},{default:t(()=>[e(p,{label:"好评标签",value:1}),e(p,{label:"中评标签",value:2}),e(p,{label:"差评标签",value:3})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"标签名称"},{default:t(()=>[e(w,{modelValue:i.name,"onUpdate:modelValue":l[1]||(l[1]=a=>i.name=a),placeholder:"请输入",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(u,{type:"primary",onClick:c},{default:t(()=>l[9]||(l[9]=[s("搜索")])),_:1}),e(u,{onClick:L},{default:t(()=>l[10]||(l[10]=[s("重置")])),_:1}),e(u,{type:"success",onClick:M},{default:t(()=>l[11]||(l[11]=[s("添加标签")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{shadow:"never"},{default:t(()=>[fe((R(),_e($,{data:b.value},{default:t(()=>[e(m,{label:"ID",width:"80",prop:"id"}),e(m,{label:"标签名称","min-width":"150"},{default:t(({row:a})=>[e(k,{color:a.color||void 0,effect:"plain"},{default:t(()=>[s(U(a.name),1)]),_:2},1032,["color"])]),_:1}),e(m,{label:"类型",width:"120"},{default:t(({row:a})=>[e(k,{type:B(a.type)},{default:t(()=>[s(U(a.type_text),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"使用次数",width:"100",prop:"use_count"}),e(m,{label:"排序",width:"80",prop:"sort"}),e(m,{label:"状态",width:"100"},{default:t(({row:a})=>[e(x,{modelValue:a.status,"onUpdate:modelValue":f=>a.status=f,"active-value":1,"inactive-value":0,onChange:f=>O(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(m,{label:"操作",width:"150"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:f=>h(a)},{default:t(()=>l[12]||(l[12]=[s("编辑")])),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:f=>N(a)},{default:t(()=>l[13]||(l[13]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[K,v.value]])]),_:1}),e(F,{modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=a=>r.value=a),title:S.value,width:"500px"},{footer:t(()=>[e(u,{onClick:l[7]||(l[7]=a=>r.value=!1)},{default:t(()=>l[14]||(l[14]=[s("取消")])),_:1}),e(u,{type:"primary",onClick:I},{default:t(()=>l[15]||(l[15]=[s("确定")])),_:1})]),default:t(()=>[e(E,{model:o,"label-width":"80px",rules:D,ref_key:"formRef",ref:y},{default:t(()=>[e(d,{label:"标签名称",prop:"name"},{default:t(()=>[e(w,{modelValue:o.name,"onUpdate:modelValue":l[2]||(l[2]=a=>o.name=a),placeholder:"请输入标签名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(d,{label:"标签类型",prop:"type"},{default:t(()=>[e(V,{modelValue:o.type,"onUpdate:modelValue":l[3]||(l[3]=a=>o.type=a),placeholder:"请选择"},{default:t(()=>[e(p,{label:"好评标签",value:1}),e(p,{label:"中评标签",value:2}),e(p,{label:"差评标签",value:3})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"标签颜色"},{default:t(()=>[e(q,{modelValue:o.color,"onUpdate:modelValue":l[4]||(l[4]=a=>o.color=a)},null,8,["modelValue"])]),_:1}),e(d,{label:"排序"},{default:t(()=>[e(j,{modelValue:o.sort,"onUpdate:modelValue":l[5]||(l[5]=a=>o.sort=a),min:0},null,8,["modelValue"])]),_:1}),e(d,{label:"状态"},{default:t(()=>[e(x,{modelValue:o.status,"onUpdate:modelValue":l[6]||(l[6]=a=>o.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{We as default};
