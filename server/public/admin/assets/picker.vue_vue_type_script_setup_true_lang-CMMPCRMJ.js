import{a5 as L,s as M,i as W,C as $,r as I}from"./element-plus-ChK2e5qA.js";import{p as T,q as z,b as R}from"./index-D465kfFn.js";import{d as U,r as O,s as P,a0 as j,b as q,w as D,n as b,l as K,c as r,o as u,U as n,L as a,a as i,T as v,ab as V,O as Z,u as h,S as A,Z as k,K as G,R as H}from"./@vue-ygbFPFRc.js";import{c as J}from"./@vueuse-yz9uDhpq.js";const Q={class:"icon-select"},X={class:"flex justify-between"},Y=["onClick"],ee={class:"h-[280px]"},oe={class:"flex flex-wrap"},se={key:0,class:"flex items-center"},re=U({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(te,{emit:w}){const p=w,f=O(0),_=[{name:"element图标",icons:T()},{name:"本地图标",icons:z()}],d=P(),e=j({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),C=()=>{e.inputFocus=e.popoverVisible=!0},y=()=>{e.inputFocus=!1,e.popoverVisible=e.mouseoverSelect},g=s=>{e.mouseoverSelect=e.popoverVisible=!1,p("update:modelValue",s),p("change",s)},S=()=>{p("update:modelValue",""),p("change","")},x=q(()=>{var l;const s=((l=_[f.value])==null?void 0:l.icons)??[];if(!e.inputValue)return s;const o=e.inputValue.toLowerCase();return s.filter(c=>{if(c.toLowerCase().indexOf(o)!==-1)return c})}),B=()=>{b(()=>{var o;const s=(o=d.value)==null?void 0:o.$el.offsetWidth;e.popoverWidth=s<300?300:s})};return J(document.body,"click",()=>{e.popoverVisible=!!(e.inputFocus||e.mouseoverSelect)}),D(()=>e.popoverVisible,async s=>{var o,l;await b(),s?(o=d.value)==null||o.focus():(l=d.value)==null||l.blur()}),K(()=>{B()}),(s,o)=>{const l=R,c=W,E=M,F=I,N=L;return u(),r("div",Q,[n(N,{trigger:"contextmenu",visible:e.popoverVisible,"onUpdate:visible":o[3]||(o[3]=t=>e.popoverVisible=t),width:e.popoverWidth},{reference:a(()=>[n(h($),{ref_key:"inputRef",ref:d,modelValue:e.inputValue,"onUpdate:modelValue":o[2]||(o[2]=t=>e.inputValue=t),modelModifiers:{trim:!0},placeholder:"搜索图标",autofocus:!1,disabled:s.disabled,onFocus:C,onBlur:y,clearable:""},{prepend:a(()=>[s.modelValue?(u(),r("div",se,[n(F,{class:"flex-1 w-20",content:s.modelValue,placement:"top"},{default:a(()=>[(u(),G(l,{class:"mr-1",key:s.modelValue,name:s.modelValue,size:16},null,8,["name"]))]),_:1},8,["content"])])):(u(),r(v,{key:1},[H("无")],64))]),append:a(()=>[n(c,null,{default:a(()=>[n(l,{name:"el-icon-Close",size:18,onClick:S})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:a(()=>[i("div",{onMouseover:o[0]||(o[0]=k(t=>e.mouseoverSelect=!0,["stop"])),onMouseout:o[1]||(o[1]=k(t=>e.mouseoverSelect=!1,["stop"]))},[i("div",null,[i("div",X,[o[4]||(o[4]=i("div",{class:"mb-3"},"请选择图标",-1)),i("div",null,[(u(),r(v,null,V(_,(t,m)=>i("span",{key:m,class:Z(["cursor-pointer text-sm ml-2",{"text-primary":m==h(f)}]),onClick:le=>f.value=m},A(t.name),11,Y)),64))])]),i("div",ee,[n(E,null,{default:a(()=>[i("div",oe,[(u(!0),r(v,null,V(x.value,t=>(u(),r("div",{key:t,class:"m-1"},[n(c,{onClick:m=>g(t)},{default:a(()=>[n(l,{name:t,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}});export{re as _};
