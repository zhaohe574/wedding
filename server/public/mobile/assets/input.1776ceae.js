import{s as e,as as t,aZ as o,q as n,c as l,v as s,x as a,d as r,o as u,b as i,w as c,y as d,f,z as p,g as m,h,F as v,e as y,A as g,n as b,j as w,t as x,m as S,b0 as C,a5 as $}from"./index-e3492752.js";import{u as k,a as I,i as j,F as B,_ as E}from"./icon.e613abcd.js";import{e as _,b as L,d as F,u as N,a as V,f as W}from"./index.f1be293a.js";import{i as A}from"./is-number.7ef6fec2.js";import{U as P,I as T,C as O}from"./event.5568c9d8.js";import{t as z,u as H,b as R,a as q}from"./index.23c2867d.js";import"./index.89b6df5d.js";import{i as G}from"./is-empty.c0d66e4a.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";const Z=/\s/;const D=/^\s+/;function J(e){return e?e.slice(0,function(e){let t=e.length;for(;t--&&Z.test(e.charAt(t)););return t}(e)+1).replace(D,""):e}const K=new RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const M="\\ud800-\\udfff",Q=`[${M}]`,X="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Y="\\ud83c[\\udffb-\\udfff]",ee=`[^${M}]`,te="(?:\\ud83c[\\udde6-\\uddff]){2}",oe="[\\ud800-\\udbff][\\udc00-\\udfff]",ne=`${`(?:${X}|${Y})`}?`,le="[\\ufe0e\\ufe0f]?",se=le+ne+`(?:\\u200d(?:${[ee,te,oe].join("|")})${le}${ne})*`,ae=`(?:${[`${ee+X}?`,X,te,oe,Q].join("|")})`,re=new RegExp(`${Y}(?=${Y})|${ae}${se}`,"g");function ue(e){return function(e){return K.test(e)}(e)?function(e){return e.match(re)||[]}(e):function(e){return e.split("")}(e)}function ie(e){return e!=e}function ce(e,t,o){return t==t?function(e,t,o){let n=o-1;const l=e.length;for(;++n<l;)if(e[n]===t)return n;return-1}(e,t,o):function(e,t,o,n=!1){const l=e.length;let s=o+(n?1:-1);for(;n?s--:++s<l;)if(t(e[s],s,e))return s;return-1}(e,ie,o)}function de(e,t,o){const n=e.length;return o=void 0===o?n:o,!t&&o>=n?e:function(e,t,o){let n=-1,l=e.length;t<0&&(t=-t>l?0:l+t),(o=o>l?l:o)<0&&(o+=l),l=t>o?0:o-t>>>0,t>>>=0;const s=Array.from({length:l});for(;++n<l;)s[n]=e[n+t];return s}(e,t,o)}function fe(e,t){if((e=z(e))&&void 0===t)return J(e);if(!e||!(t=_(t)))return e;const o=ue(e),n=ue(t),l=function(e,t){let o=-1;const n=e.length;for(;++o<n&&ce(t,e[o],0)>-1;);return o}(o,n),s=function(e,t){let o=e.length;for(;o--&&ce(t,e[o],0)>-1;);return o}(o,n)+1;return de(o,l,s).join("")}const pe=L({modelValue:{type:F([String,Number,Object]),default:""},size:k,height:{type:[String,Number]},disabled:Boolean,type:{type:String,values:["text","number","idcard","digit","textarea","password","select"],default:"text"},placeholder:String,textAlign:{type:String,values:["left","center","right"],default:"left"},placeholderStyle:I,border:{type:Boolean,default:!0},borderColor:{type:String,default:"tn-gray-disabled"},underline:Boolean,customStyle:I,customClass:String,maxlength:{type:Number,default:-1},autoHeight:{type:Boolean,default:!0},confirmType:{type:String,values:["","send","search","next","go","done","return"],default:"done"},focus:Boolean,clearable:Boolean,showPassword:{type:Boolean,default:!0},cursorSpacing:{type:Number,default:0},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},showConfirmBar:{type:Boolean,default:!0},rightIcon:String,trim:{type:Boolean,default:!0},showWordLimit:{type:Boolean,default:!1},wordLimitColor:String,validateEvent:{type:Boolean,default:!0}}),me=(t,o)=>{const{form:n,formItem:r}=R(),u=e(String(G(t.modelValue,"")));s((()=>t.modelValue),(e=>{var o;u.value=String(G(e,"")),t.validateEvent&&(null==(o=null==r?void 0:r.validate)||o.call(r,"change").catch((e=>{})))}));const[i,c]=(t=>{const o=e(t);return[o,()=>{o.value=!o.value}]})(!1),d=l((()=>G(null==n?void 0:n.statusIcon,!1))),f=l((()=>G(null==r?void 0:r.validateState,""))),p=l((()=>f.value&&B[f.value])),m=l((()=>i.value?"eye-hide":"eye")),h=l((()=>{let e=!1;return f.value&&d.value&&p.value&&(e=!0),t.showPassword&&(e=!0),t.rightIcon&&(e=!0),t.clearable&&(e=!0),e})),v=q(t.disabled),y=l((()=>"textarea"===t.type&&!!(null==t?void 0:t.maxlength)&&!!(null==t?void 0:t.showWordLimit))),g=l((()=>{var e;return t.showWordLimit&&"textarea"===t.type&&(null==(e=u.value)?void 0:e.length)||0})),b=e=>{e=t.trim?fe(e):e,o(P,w(e)),a((()=>{o(T,w(e)),o(O,w(e))}))},w=e=>""===e?"":"number"===t.type||"digit"===t.type?Number.parseFloat(e):e;return{inputText:u,needStatusIcon:d,validateState:f,validateIcon:p,passwordVisible:i,passwordIcon:m,showIcon:h,disabled:v,showWordLimit:y,currentWordCount:g,togglePasswordVisible:c,inputInputEvent:e=>{const{value:t}=e.detail;b(t)},inputFocusEvent:e=>{o("focus",e)},inputBlurEvent:e=>{var n;o("blur",e),t.validateEvent&&(null==(n=null==r?void 0:r.validate)||n.call(r,"blur").catch((e=>{})))},clearClickEvent:()=>{v.value||(b(""),o("clear"))},confirmEvent:e=>{const{value:t}=e.detail;o("confirm",w(t))},inputClickEvent:()=>{"select"===t.type&&o("click")}}},he=U(r({__name:"input",props:pe,emits:{[P]:e=>t(e)||A(e),[T]:e=>t(e)||A(e),[O]:e=>t(e)||A(e),click:()=>!0,focus:e=>o(e),blur:e=>o(e),clear:()=>!0,confirm:e=>t(e)||A(e)},setup(e,{emit:t}){const o=e,{inputText:s,needStatusIcon:a,validateState:r,validateIcon:k,passwordVisible:I,passwordIcon:B,showIcon:_,disabled:L,showWordLimit:F,currentWordCount:A,togglePasswordVisible:P,inputInputEvent:T,inputFocusEvent:O,inputBlurEvent:z,clearClickEvent:R,confirmEvent:q,inputClickEvent:G}=me(o,t),{ns:U,inputClass:Z,inputStyle:D,placeholderStyle:J,wordLimitClass:K,wordLimitStyle:M}=((e,t,o)=>{const s=N("input"),a=H(e.size),[r,u]=V(n(e,"borderColor"),"border"),[i,c]=V(n(e,"wordLimitColor"),"text"),d=l((()=>{const t={color:"var(--tn-text-color-secondary)"};return j(e.placeholderStyle)||Object.assign(t,e.placeholderStyle),Object.entries(t).map((([e,t])=>`${e}:${t}`)).join(";")})),f=l((()=>{const n=[s.b()];return o.value&&"select"!==e.type&&n.push(s.m("disabled")),a.value&&n.push(s.m(a.value)),e.textAlign&&n.push(s.m(`text-${e.textAlign}`)),"error"===t.value&&n.push(s.m("error")),(e.border||e.underline||"error"===t.value)&&(n.push(e.underline?"tn-border-bottom":"tn-border"),"error"===t.value?n.push("tn-red_border"):r.value&&n.push(r.value)),e.underline&&n.push(s.m("underline")),e.customClass&&n.push(e.customClass),n.join(" ")})),p=l((()=>{const o={};return e.height&&(o.height=W(e.height)),e.border&&u.value&&"error"!==t.value&&(o.borderColor=u.value),j(e.customStyle)||Object.assign(o,e.customStyle),o})),m=l((()=>{const e=[s.e("word-limit")];return i.value&&e.push(i.value),e.join(" ")})),h=l((()=>{const e={};return i.value||(e.color=c.value||"var(--tn-color-gray)"),e}));return{ns:s,inputClass:f,inputStyle:p,placeholderStyle:d,wordLimitClass:m,wordLimitStyle:h}})(o,r,L);return(e,t)=>{const o=S,n=C,l=$;return u(),i(o,{class:d([f(Z),`${"textarea"===e.type?f(U).m("textarea"):f(U).m("input")}`,f(U).is("show-word-limit",f(F))]),style:b(f(D)),onClick:f(G)},{default:c((()=>[e.$slots.prefix?(u(),i(o,{key:0,class:d([f(U).em("slot","left")])},{default:c((()=>[p(e.$slots,"prefix",{},void 0,!0)])),_:3},8,["class"])):m("v-if",!0),m(" 文本域 "),"textarea"===e.type?(u(),i(n,{key:1,class:d([f(U).e("base"),f(U).e("textarea"),f(U).is("custom-height",!!e.height)]),value:f(s),placeholder:e.placeholder,"placeholder-style":f(J),disabled:f(L),maxlength:e.maxlength,focus:e.focus,"confirm-type":e.confirmType,"auto-height":!e.height&&e.autoHeight,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"cursor-spacing":e.cursorSpacing,"show-confirm-bar":e.showConfirmBar,onInput:f(T),onFocus:f(O),onBlur:f(z),onConfirm:f(q)},null,8,["class","value","placeholder","placeholder-style","disabled","maxlength","focus","confirm-type","auto-height","selection-start","selection-end","cursor-spacing","show-confirm-bar","onInput","onFocus","onBlur","onConfirm"])):(u(),h(v,{key:2},[m(" 文本框 "),y(l,{class:d([f(U).e("base"),f(U).e("input"),f(U).em("input",e.type)]),type:"password"===e.type||"select"===e.type?"text":e.type,value:f(s),placeholder:e.placeholder,password:"password"===e.type&&!f(I),"placeholder-style":f(J),disabled:f(L)||"select"===e.type,maxlength:e.maxlength,focus:e.focus,"confirm-type":e.confirmType,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"cursor-spacing":e.cursorSpacing,"show-confirm-bar":e.showConfirmBar,onInput:f(T),onFocus:f(O),onBlur:f(z),onConfirm:f(q)},null,8,["class","type","value","placeholder","password","placeholder-style","disabled","maxlength","focus","confirm-type","selection-start","selection-end","cursor-spacing","show-confirm-bar","onInput","onFocus","onBlur","onConfirm"])],2112)),m(" 图标 "),f(_)?(u(),i(o,{key:3,class:d([f(U).e("icon")])},{default:c((()=>[m(" 右边图标 "),e.rightIcon?(u(),i(o,{key:0,class:d([f(U).em("icon","custom")])},{default:c((()=>[y(E,{name:e.rightIcon},null,8,["name"])])),_:1},8,["class"])):m("v-if",!0),m(" 密码显示/隐藏 "),"password"===e.type&&e.showPassword?(u(),i(o,{key:1,class:d([f(U).em("icon","password")]),onClick:g(f(P),["stop"])},{default:c((()=>[y(E,{name:f(B)},null,8,["name"])])),_:1},8,["class","onClick"])):e.clearable&&f(s)?(u(),h(v,{key:2},[m(" 清除按钮 "),y(o,{class:d([f(U).em("icon","clear")]),onClick:g(f(R),["stop"])},{default:c((()=>[y(E,{name:"close"})])),_:1},8,["class","onClick"])],2112)):m("v-if",!0),m(" 错误提示图标 "),f(r)&&f(k)&&f(a)?(u(),i(o,{key:3,class:d([f(U).em("icon",`validate-${f(r)}`)])},{default:c((()=>[y(E,{name:f(k)},null,8,["name"])])),_:1},8,["class"])):m("v-if",!0)])),_:1},8,["class"])):m("v-if",!0),e.$slots.suffix?(u(),i(o,{key:4,class:d([f(U).em("slot","right")])},{default:c((()=>[p(e.$slots,"suffix",{},void 0,!0)])),_:3},8,["class"])):m("v-if",!0),m(" 字数统计 "),f(F)?(u(),i(o,{key:5,class:d([f(K)]),style:b(f(M))},{default:c((()=>[w(x(f(A))+" / "+x(e.maxlength),1)])),_:1},8,["class","style"])):m("v-if",!0)])),_:3},8,["class","style","onClick"])}}}),[["__scopeId","data-v-b1f46cc7"]]);export{he as _};
