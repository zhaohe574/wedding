import{d as e,u as a,a1 as s,c as t,s as l,M as o,o as i,h as n,e as c,w as r,g as u,f as p,j as d,y as m,t as b,F as f,aj as _,ak as j,aH as v,aq as h,r as g,a as y,m as x,l as $}from"./index-e3492752.js";import{_ as k}from"./page-meta.a4be6114.js";import{_ as w}from"./icon.e613abcd.js";import{_ as I}from"./input.1776ceae.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";import"./is-number.7ef6fec2.js";import"./_objectToString.c905654b.js";import"./event.5568c9d8.js";import"./index.23c2867d.js";import"./install.8446dea8.js";import"./is-empty.c0d66e4a.js";import"./is-boolean.00bf65dc.js";import"./index.89b6df5d.js";import"./index.04c93aab.js";import"./debounce.096fb07a.js";import"./clone-deep.2124c060.js";const z=V(e({__name:"bind_mobile",setup(e){const V=a(),z=s(),C=t((()=>V.primaryColor)),T=l("获取验证码"),B=l(!0),D=o({type:"bind",mobile:"",code:""}),H=t((()=>D.mobile&&D.code)),M=async()=>{if(!D.mobile)return uni.$u.toast("请输入手机号码");B.value&&(await _({scene:j.BIND_MOBILE,mobile:D.mobile}),uni.$u.toast("发送成功"),(()=>{let e=60;B.value=!1,T.value=`${e}秒`;const a=setInterval((()=>{e--,e>0?T.value=`${e}秒`:(clearInterval(a),T.value="获取验证码",B.value=!0)}),1e3)})())},S=async()=>{if(!D.mobile)return uni.$u.toast("请输入手机号码");if(!D.code)return uni.$u.toast("请输入验证码");try{await v(D,{token:z.temToken}),uni.$u.toast("绑定成功"),z.login(z.temToken),h()}catch(e){uni.$u.toast(e||"绑定失败")}};return(e,a)=>{const s=g(y("page-meta"),k),t=x,l=g(y("tn-icon"),w),o=g(y("tn-input"),I),_=$;return i(),n(f,null,[c(s,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),c(t,{class:"bind-mobile-container"},{default:r((()=>[u(" 背景装饰 "),c(t,{class:"bg-decoration"},{default:r((()=>[c(t,{class:"circle circle-1"}),c(t,{class:"circle circle-2"})])),_:1}),u(" 主内容区 "),c(t,{class:"content"},{default:r((()=>[u(" 头部区域 "),c(t,{class:"header-section"},{default:r((()=>[c(t,{class:"icon-wrapper"},{default:r((()=>[c(l,{name:"phone",size:"80",color:p(C)},null,8,["color"])])),_:1}),c(t,{class:"title-text"},{default:r((()=>[d("绑定手机号")])),_:1}),c(t,{class:"subtitle-text"},{default:r((()=>[d("为了您的账号安全，请绑定手机号")])),_:1})])),_:1}),u(" 表单卡片 "),c(t,{class:"form-card"},{default:r((()=>[u(" 手机号 "),c(t,{class:"input-group"},{default:r((()=>[c(t,{class:"input-wrapper"},{default:r((()=>[c(l,{name:"phone",size:"36",color:"#9ca3af",class:"input-icon"}),c(o,{class:"custom-input",modelValue:D.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>D.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1})])),_:1}),u(" 验证码 "),c(t,{class:"input-group"},{default:r((()=>[c(t,{class:"input-wrapper"},{default:r((()=>[c(l,{name:"shield-check",size:"36",color:"#9ca3af",class:"input-icon"}),c(o,{class:"custom-input",modelValue:D.code,"onUpdate:modelValue":a[1]||(a[1]=e=>D.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),c(t,{class:m(["code-btn",{"code-btn-active":B.value&&D.mobile}]),onClick:M},{default:r((()=>[d(b(T.value),1)])),_:1},8,["class"])])),_:1})])),_:1}),u(" 确定按钮 "),c(t,{class:"btn-wrapper"},{default:r((()=>[c(t,{class:m(["btn-primary",{"btn-disabled":!p(H)}]),onClick:S,"hover-class":"btn-hover"},{default:r((()=>[c(_,{class:"btn-text"},{default:r((()=>[d("确定")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-8e1c5ec6"]]);export{z as default};
