import{_ as e}from"./page-meta.a4be6114.js";import{a0 as t,d as s,u as a,r as n,a as r,o as l,b as o,w as c,g as i,e as u,n as p,f as d,j as m,t as f,A as y,h as _,F as v,k as g,l as x,m as b,p as k,C as w,a1 as h,a2 as j,c as C,i as F,E as I,G as O,S as q,B as z,M as B,P as L,a3 as S}from"./index-e3492752.js";import{T as E}from"./avatar.b1292efe.js";import{_ as M}from"./icon.e613abcd.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import{u as P}from"./admin.5b05ff33.js";import{_ as U,a as J,b as N,c as T,d as V,e as D,f as G,g as $,h as H,i as K}from"./wedding-countdown.10928399.js";import{_ as Q}from"./customer-service.vue_vue_type_script_setup_true_lang.48bdf1c5.js";import{_ as R}from"./tabbar.vue_vue_type_script_setup_true_lang.d2dbfaf9.js";import"./badge.46a4bc76.js";import"./index.f1be293a.js";import"./index.89b6df5d.js";import"./is-number.7ef6fec2.js";import"./_objectToString.c905654b.js";import"./is-empty.c0d66e4a.js";import"./index.04c93aab.js";import"./coupon.4848d9a7.js";import"./u-icon.c576501f.js";import"./u-parse.f46a604d.js";const W=A(s({__name:"user-info",props:{pageMeta:{type:Object,default:()=>[]},content:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})},user:{type:Object,default:()=>({})},isLogin:{type:Boolean}},setup(e){const{copy:s}={copy:e=>{t({data:String(e)})}},w=a();return(t,a)=>{const h=n(r("tn-avatar"),E),j=n(r("tn-icon"),M),C=x,F=b,I=k;return l(),o(F,{class:"user-info-wrapper"},{default:c((()=>[i(" 用户信息卡片 "),u(F,{class:"user-card mx-[24rpx] mt-[24rpx] rounded-[24rpx] overflow-hidden"},{default:c((()=>[i(" 用户信息区域 "),u(F,{class:"user-content p-[32rpx]"},{default:c((()=>[u(F,{class:"flex items-center justify-between"},{default:c((()=>[i(" 左侧：头像和信息 "),e.isLogin?(l(),o(F,{key:0,class:"flex items-center flex-1",onClick:a[1]||(a[1]=e=>{g({url:"/pages/user_data/user_data"})})},{default:c((()=>[i(" 头像 "),u(F,{class:"avatar-wrapper"},{default:c((()=>[u(h,{url:e.user.avatar||"/static/images/user/default_avatar.png",size:140,shape:"circle"},null,8,["url"]),i(" VIP标识 "),e.user.is_vip?(l(),o(F,{key:0,class:"vip-badge",style:p({backgroundColor:d(w).accentColor})},{default:c((()=>[u(j,{name:"vip",size:"20",color:"#FFFFFF"}),u(C,{class:"vip-text"},{default:c((()=>[m("VIP")])),_:1})])),_:1},8,["style"])):i("v-if",!0)])),_:1}),i(" 用户信息 "),u(F,{class:"user-info-section ml-[24rpx] flex-1"},{default:c((()=>[u(F,{class:"flex items-center mb-[12rpx]"},{default:c((()=>[u(C,{class:"user-nickname"},{default:c((()=>[m(f(e.user.nickname),1)])),_:1}),i(" 认证标识 "),e.user.is_verified?(l(),o(F,{key:0,class:"verified-badge",style:p({backgroundColor:d(w).primaryColor+"15"})},{default:c((()=>[u(C,{class:"verified-text",style:p({color:d(w).primaryColor})},{default:c((()=>[m("已认证")])),_:1},8,["style"])])),_:1},8,["style"])):i("v-if",!0)])),_:1}),u(F,{class:"flex items-center account-row",onClick:a[0]||(a[0]=y((t=>d(s)(e.user.account)),["stop"]))},{default:c((()=>[u(C,{class:"account-text"},{default:c((()=>[m("账号："+f(e.user.account),1)])),_:1}),u(j,{name:"copy",size:"28",color:"#94A3B8",class:"ml-[8rpx]"})])),_:1})])),_:1})])),_:1})):(l(),_(v,{key:1},[i(" 未登录状态 "),u(I,{class:"flex items-center flex-1","hover-class":"none",url:"/pages/login/login"},{default:c((()=>[u(F,{class:"avatar-wrapper"},{default:c((()=>[u(h,{url:"/static/images/user/default_avatar.png",size:140,shape:"circle"})])),_:1}),u(F,{class:"ml-[24rpx]"},{default:c((()=>[u(C,{class:"user-nickname"},{default:c((()=>[m("未登录")])),_:1}),u(F,{class:"mt-[8rpx]"},{default:c((()=>[u(C,{class:"login-tip"},{default:c((()=>[m("点击登录享受更多服务")])),_:1})])),_:1})])),_:1})])),_:1})],2112)),i(" 右侧：设置按钮 "),e.isLogin?(l(),o(I,{key:2,"hover-class":"none",url:"/pages/user_set/user_set",class:"ml-[24rpx]"},{default:c((()=>[u(F,{class:"setting-btn",style:p({backgroundColor:d(w).primaryColor+"15"})},{default:c((()=>[u(j,{name:"set",color:d(w).primaryColor,size:44},null,8,["color"])])),_:1},8,["style"])])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ac506823"]]),X=A(s({__name:"my-service",props:{content:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})}},setup(e){const t=e,s=w(),{getImageUrl:y}=s,g=h(),k=P(),q=a(),{userInfo:z}=j(g),{isLogin:B}=j(k),L=e=>{I(e)},S=e=>{const t=[q.primaryColor+"15",q.secondaryColor+"15",q.ctaColor+"15",q.accentColor+"15"];return t[e%t.length]},E=C((()=>{var e;return(null==(e=s.config)?void 0:e.feature_switch)||{}})),A=C((()=>{var e;const t=[];if(1===E.value.staff_center&&(null==(e=z.value)?void 0:e.is_staff)&&t.push({name:"服务人员中心",image:"resource/image/adminapi/default/menu_role.png",link:{path:"/packages/pages/staff_center/staff_center",name:"服务人员中心",type:"shop"},is_show:"1"}),1===E.value.admin_dashboard){const e=B.value?"/packages/pages/admin_dashboard/admin_dashboard":"/packages/pages/admin_login/admin_login";t.push({name:"管理员看板",image:"resource/image/adminapi/default/menu_admin.png",link:{path:e,name:"管理员看板",type:"shop"},is_show:"1"})}return t})),U=C((()=>{var e;return[...(null==(e=t.content.data)?void 0:e.filter((e=>"1"==e.is_show)))||[],...A.value]}));return(t,s)=>{const a=x,g=b,k=O,w=n(r("tn-icon"),M);return l(),o(g,{class:"my-service mx-[24rpx] mt-[24rpx]"},{default:c((()=>[i(" 标题 "),e.content.title?(l(),o(g,{key:0,class:"title-section mb-[20rpx] px-[8rpx]"},{default:c((()=>[u(a,{class:"text-[32rpx] font-semibold text-[#1E293B]"},{default:c((()=>[m(f(e.content.title),1)])),_:1})])),_:1})):i("v-if",!0),i(" 网格布局 "),1==e.content.style?(l(),o(g,{key:1,class:"service-grid bg-white rounded-[16rpx] p-[24rpx]"},{default:c((()=>[u(g,{class:"grid grid-cols-4 gap-[32rpx]"},{default:c((()=>[(l(!0),_(v,null,F(d(U),((e,t)=>(l(),o(g,{key:t,class:"service-item flex flex-col items-center",onClick:t=>L(e.link)},{default:c((()=>[i(" 图标容器 "),u(g,{class:"icon-wrapper mb-[16rpx] p-[20rpx] rounded-[20rpx]",style:p({backgroundColor:S(t)})},{default:c((()=>[u(k,{class:"w-[56rpx] h-[56rpx]",src:d(y)(e.image),mode:"aspectFit"},null,8,["src"])])),_:2},1032,["style"]),i(" 文字 "),u(a,{class:"text-[24rpx] text-[#334155] text-center"},{default:c((()=>[m(f(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):i("v-if",!0),i(" 列表布局 "),2==e.content.style?(l(),o(g,{key:2,class:"service-list bg-white rounded-[16rpx] overflow-hidden"},{default:c((()=>[(l(!0),_(v,null,F(d(U),((e,t)=>(l(),o(g,{key:t,class:"service-list-item flex items-center px-[32rpx] py-[28rpx] border-b border-[#F1F5F9] last:border-b-0",onClick:t=>L(e.link)},{default:c((()=>[i(" 图标 "),u(g,{class:"icon-wrapper p-[16rpx] rounded-[16rpx]",style:p({backgroundColor:S(t)})},{default:c((()=>[u(k,{class:"w-[48rpx] h-[48rpx]",src:d(y)(e.image),mode:"aspectFit"},null,8,["src"])])),_:2},1032,["style"]),i(" 文字 "),u(a,{class:"flex-1 ml-[24rpx] text-[28rpx] text-[#1E293B]"},{default:c((()=>[m(f(e.name),1)])),_:2},1024),i(" 箭头 "),u(w,{name:"right",size:"32",color:"#CBD5E1"})])),_:2},1032,["onClick"])))),128))])),_:1})):i("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-045082fe"]]),Y=A(s({__name:"user-banner",props:{content:{type:Object,default:()=>({})},styles:{type:Object,default:()=>({})}},setup(e){const t=e,{getImageUrl:s}=w(),n=a(),r=C((()=>{var e;return(null==(e=t.content.data)?void 0:e.filter((e=>"1"==e.is_show)))||[]}));return(t,a)=>{const p=O,m=b,f=q,y=z;return d(r).length&&e.content.enabled?(l(),o(m,{key:0,class:"user-banner mx-[24rpx] mt-[24rpx]"},{default:c((()=>[u(y,{class:"banner-swiper","indicator-dots":d(r).length>1,"indicator-color":d(n).primaryColor+"30","indicator-active-color":d(n).primaryColor,autoplay:!0,circular:!0,interval:5e3,duration:300},{default:c((()=>[(l(!0),_(v,null,F(d(r),((e,t)=>(l(),o(f,{key:t,onClick:t=>{return s=e.link,void I(s);var s}},{default:c((()=>[u(m,{class:"banner-item"},{default:c((()=>[u(p,{class:"banner-image",mode:"aspectFill",src:d(s)(e.image)},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["indicator-dots","indicator-color","indicator-active-color"])])),_:1})):i("v-if",!0)}}}),[["__scopeId","data-v-7e06adc0"]]),Z=A(s({__name:"user",setup(t){const s=B({meta:[],pages:[]}),a=h(),{userInfo:p,isLogin:m}=j(a),f=e=>{var t;return 0!==(null==(t=e.content)?void 0:t.enabled)};C((()=>{var e;const{bg_type:t,bg_color:a}=(null==(e=s.meta[0])?void 0:e.content)??{};return 1==t&&a?{"background-color":a}:{"background-color":"#f5f5f5"}}));return L((()=>{var e;m.value&&!(null==(e=p.value)?void 0:e.id)&&a.getUser(),(async()=>{try{const e=await S({id:2});(null==e?void 0:e.meta)&&("string"==typeof e.meta?s.meta=JSON.parse(e.meta):s.meta=e.meta),(null==e?void 0:e.data)&&("string"==typeof e.data?s.pages=JSON.parse(e.data):s.pages=e.data)}catch(e){console.error("获取装修数据失败:",e)}})()})),(t,a)=>{const y=n(r("page-meta"),e),g=n(r("w-user-info"),W),x=n(r("w-my-service"),X),k=n(r("w-user-banner"),Y),w=n(r("w-order-quick-entry"),U),h=n(r("w-quick-entry"),J),j=n(r("w-coupon-receive"),N),C=n(r("w-data-stats"),T),I=n(r("w-faq"),V),O=n(r("w-service-process"),D),q=n(r("w-notice-bar"),G),z=n(r("w-hot-topics"),$),B=n(r("w-store-map"),H),L=n(r("w-wedding-countdown"),K),S=n(r("w-customer-service"),Q),E=b,M=n(r("tabbar"),R);return l(),_(v,null,[u(y,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),u(E,{class:"user-page"},{default:c((()=>[i(" 动态装修组件渲染 "),(l(!0),_(v,null,F(s.pages,((e,t)=>(l(),_(v,{key:t},[i(" 用户信息组件 "),"user-info"==e.name?(l(),o(g,{key:0,pageMeta:s.meta,content:e.content,styles:e.styles,user:d(p),isLogin:d(m)},null,8,["pageMeta","content","styles","user","isLogin"])):i("v-if",!0),i(" 我的服务组件 "),"my-service"==e.name&&f(e)?(l(),o(x,{key:1,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 用户banner组件 "),"user-banner"==e.name&&f(e)?(l(),o(k,{key:2,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 订单快捷入口组件 "),"order-quick-entry"==e.name&&f(e)?(l(),o(w,{key:3,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 快捷入口组件 "),"quick-entry"==e.name&&f(e)?(l(),o(h,{key:4,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 优惠券领取组件 "),"coupon-receive"==e.name&&f(e)?(l(),o(j,{key:5,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 数据统计卡片组件 "),"data-stats"==e.name&&f(e)?(l(),o(C,{key:6,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 常见问题组件 "),"faq"==e.name&&f(e)?(l(),o(I,{key:7,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 服务流程组件 "),"service-process"==e.name&&f(e)?(l(),o(O,{key:8,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 公告通知组件 "),"notice-bar"==e.name&&f(e)?(l(),o(q,{key:9,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 热门话题组件 "),"hot-topics"==e.name&&f(e)?(l(),o(z,{key:10,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 门店地图组件 "),"store-map"==e.name&&f(e)?(l(),o(B,{key:11,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 婚礼倒计时组件 "),"wedding-countdown"==e.name&&f(e)?(l(),o(L,{key:12,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0),i(" 客服组件 "),"customer-service"==e.name&&f(e)?(l(),o(S,{key:13,content:e.content,styles:e.styles},null,8,["content","styles"])):i("v-if",!0)],64)))),128)),u(E,{class:"safe-bottom"}),u(M)])),_:1})],64)}}}),[["__scopeId","data-v-951003ba"]]);export{Z as default};
