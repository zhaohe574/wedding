import{d as a,u as e,s as t,P as s,o as l,h as r,e as o,w as c,g as i,b as n,F as d,j as f,t as u,i as _,aD as m,aT as p,r as g,a as v,m as y,l as h,A as k,n as b,aP as C,k as $,G as x}from"./index-e3492752.js";import{_ as j}from"./navigation-bar.2687311c.js";import{_ as w}from"./page-meta.a4be6114.js";import{_ as z}from"./loading.2b80eb94.js";import{_ as D}from"./icon.e613abcd.js";import{d as F,t as B}from"./staff.2454008a.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";import"./index.89b6df5d.js";const P=E(a({__name:"staff_favorite",setup(a){e();const E=t(!0),P=t([]),I=()=>{p({url:"/pages/index/index"})};return s((()=>{(async()=>{E.value=!0;try{const a=await F();P.value=a||[]}catch(a){console.error(a),m({title:"加载失败，请重试",icon:"none"})}finally{E.value=!1}})()})),(a,e)=>{const t=g(v("navigation-bar"),j),s=g(v("page-meta"),w),p=g(v("tn-loading"),z),F=y,M=g(v("tn-icon"),D),V=h,A=x;return l(),r(d,null,[o(s,{"page-style":a.$theme.pageStyle},{default:c((()=>[o(t,{title:"我的收藏","front-color":a.$theme.navColor,"background-color":a.$theme.navBgColor},null,8,["front-color","background-color"])])),_:1},8,["page-style"]),o(F,{class:"staff-favorite"},{default:c((()=>[i(" 加载状态 "),E.value?(l(),n(F,{key:0,class:"loading-container"},{default:c((()=>[o(p,{mode:"circle"})])),_:1})):P.value.length?(l(),r(d,{key:2},[i(" 收藏列表 "),o(F,{class:"favorite-list"},{default:c((()=>[i(" 统计信息 "),o(F,{class:"stats-bar"},{default:c((()=>[o(V,{class:"stats-text"},{default:c((()=>[f("共收藏 "+u(P.value.length)+" 位服务人员",1)])),_:1})])),_:1}),i(" 人员卡片 "),(l(!0),r(d,null,_(P.value,(e=>(l(),n(F,{key:e.id,class:"staff-card",onClick:a=>{return t=e.id,void $({url:`/packages/pages/staff_detail/staff_detail?id=${t}`});var t}},{default:c((()=>[i(" 卡片内容 "),o(F,{class:"card-content"},{default:c((()=>[i(" 左侧头像 "),o(F,{class:"avatar-wrapper"},{default:c((()=>[o(A,{class:"avatar",src:e.avatar||"/static/images/default-avatar.png",mode:"aspectFill","lazy-load":""},null,8,["src"]),i(" VIP标识 "),e.is_vip?(l(),n(F,{key:0,class:"vip-badge"},{default:c((()=>[o(M,{name:"vip-fill",size:"24",color:"#FFD700"})])),_:1})):i("v-if",!0)])),_:2},1024),i(" 右侧信息 "),o(F,{class:"info-wrapper"},{default:c((()=>[i(" 顶部：姓名和收藏按钮 "),o(F,{class:"info-header"},{default:c((()=>[o(F,{class:"name-row"},{default:c((()=>[o(V,{class:"staff-name"},{default:c((()=>[f(u(e.name),1)])),_:2},1024),i(" 认证标识 "),e.is_verified?(l(),n(F,{key:0,class:"verified-badge"},{default:c((()=>[o(M,{name:"check-circle-fill",size:"28",color:a.$theme.primaryColor},null,8,["color"])])),_:1})):i("v-if",!0)])),_:2},1024),i(" 收藏按钮 "),o(F,{class:"favorite-btn",onClick:k((a=>(async a=>{C({title:"提示",content:`确定取消收藏 ${a.name} 吗？`,success:async e=>{if(e.confirm)try{await B({id:a.id}),P.value=P.value.filter((e=>e.id!==a.id)),m({title:"已取消收藏",icon:"success"})}catch(t){m({title:t.msg||"操作失败",icon:"none"})}}})})(e)),["stop"])},{default:c((()=>[o(M,{name:"star-fill",size:"44",color:a.$theme.secondaryColor},null,8,["color"])])),_:2},1032,["onClick"])])),_:2},1024),i(" 分类标签 "),o(F,{class:"category-tag"},{default:c((()=>[o(V,{class:"category-text"},{default:c((()=>[f(u(e.category_name),1)])),_:2},1024)])),_:2},1024),i(" 评分和服务次数 "),o(F,{class:"rating-row"},{default:c((()=>[o(F,{class:"rating-stars"},{default:c((()=>[(l(),r(d,null,_(5,(t=>o(M,{key:t,name:t<=Math.floor(e.rating)?"star-fill":"star",size:"24",color:t<=Math.floor(e.rating)?a.$theme.accentColor:"#E5E7EB"},null,8,["name","color"]))),64))])),_:2},1024),o(V,{class:"rating-score"},{default:c((()=>[f(u(e.rating),1)])),_:2},1024),o(V,{class:"rating-divider"},{default:c((()=>[f("|")])),_:1}),o(V,{class:"order-count"},{default:c((()=>[f(u(e.order_count)+"单",1)])),_:2},1024)])),_:2},1024),i(" 底部：价格和操作 "),o(F,{class:"info-footer"},{default:c((()=>[o(F,{class:"price-wrapper"},{default:c((()=>[o(V,{class:"price-symbol"},{default:c((()=>[f("¥")])),_:1}),o(V,{class:"price-value"},{default:c((()=>[f(u(e.price),1)])),_:2},1024),o(V,{class:"price-unit"},{default:c((()=>[f("/次")])),_:1})])),_:2},1024),o(F,{class:"action-btn",style:b({background:`linear-gradient(135deg, ${a.$theme.primaryColor} 0%, ${a.$theme.primaryColor} 100%)`}),onClick:k((a=>(a=>{a.id?$({url:`/packages/pages/schedule_calendar/schedule_calendar?staff_id=${a.id}`}):m({title:"服务人员信息错误",icon:"none"})})(e)),["stop"])},{default:c((()=>[o(V,{class:"action-text"},{default:c((()=>[f("立即预约")])),_:1})])),_:2},1032,["style","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})],2112)):(l(),r(d,{key:1},[i(" 空状态 "),o(F,{class:"empty-container"},{default:c((()=>[o(F,{class:"empty-icon"},{default:c((()=>[o(M,{name:"star",size:"160",color:"#D1D5DB"})])),_:1}),o(V,{class:"empty-text"},{default:c((()=>[f("还没有收藏任何服务人员")])),_:1}),o(V,{class:"empty-hint"},{default:c((()=>[f("快去发现心仪的服务人员吧")])),_:1}),o(F,{class:"empty-btn",onClick:I},{default:c((()=>[o(V,{class:"empty-btn-text"},{default:c((()=>[f("去看看")])),_:1})])),_:1})])),_:1})],2112))])),_:1})],64)}}}),[["__scopeId","data-v-801d5c19"]]);export{P as default};
