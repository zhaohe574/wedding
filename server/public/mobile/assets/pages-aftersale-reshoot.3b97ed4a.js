import{d as a,$ as s,s as e,O as t,o as l,b as o,w as c,e as u,y as i,j as r,h as n,i as d,F as f,g as _,k as p,m as v,l as m,r as h,a as y,t as k,A as g,aP as b,aD as x}from"./index-e3492752.js";import{_ as C}from"./icon.e613abcd.js";import{_ as j}from"./z-paging.18d58ff3.js";import{h as w,i as z}from"./aftersale.1766d410.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";const $=V(a({__name:"reshoot",setup(a){const V=s(),$=e([]),I=e(""),A=a=>{var s;I.value=a,null==(s=V.value)||s.reload()},D=async(a,s)=>{var e,t,l;try{const l={page:a,limit:s};""!==I.value&&(l.status=I.value);const o=await w(l),c=(null==(e=null==o?void 0:o.data)?void 0:e.lists)||(null==o?void 0:o.lists)||[];null==(t=V.value)||t.complete(c)}catch(o){null==(l=V.value)||l.complete(!1)}},F=a=>({0:"待审核",1:"已通过",2:"已拒绝",3:"已完成"}[a]||"未知"),O=()=>{p({url:"/pages/aftersale/apply_reshoot"})};return t((a=>{(null==a?void 0:a.status)&&(I.value=parseInt(a.status))})),(a,s)=>{const e=v,t=m,w=h(y("tn-icon"),C),P=h(y("z-paging"),j);return l(),o(e,{class:"reshoot-page"},{default:c((()=>[u(P,{ref_key:"paging",ref:V,modelValue:$.value,"onUpdate:modelValue":s[4]||(s[4]=a=>$.value=a),onQuery:D},{top:c((()=>[u(e,{class:"filter-tabs"},{default:c((()=>[u(e,{class:i(["tab-item",{active:""===I.value}]),onClick:s[0]||(s[0]=a=>A(""))},{default:c((()=>[r("全部")])),_:1},8,["class"]),u(e,{class:i(["tab-item",{active:0===I.value}]),onClick:s[1]||(s[1]=a=>A(0))},{default:c((()=>[r("待审核")])),_:1},8,["class"]),u(e,{class:i(["tab-item",{active:1===I.value}]),onClick:s[2]||(s[2]=a=>A(1))},{default:c((()=>[r("已通过")])),_:1},8,["class"]),u(e,{class:i(["tab-item",{active:2===I.value}]),onClick:s[3]||(s[3]=a=>A(2))},{default:c((()=>[r("已拒绝")])),_:1},8,["class"])])),_:1})])),empty:c((()=>[u(e,{class:"empty-state"},{default:c((()=>[u(w,{name:"camera",size:"120",color:"#ccc"}),u(t,{class:"empty-text"},{default:c((()=>[r("暂无补拍申请")])),_:1})])),_:1})])),default:c((()=>[u(e,{class:"reshoot-list"},{default:c((()=>[(l(!0),n(f,null,d($.value,(a=>(l(),o(e,{class:"reshoot-item",key:a.id,onClick:s=>(a=>{p({url:`/pages/aftersale/index?action=reshoot_detail&id=${a.id}`})})(a)},{default:c((()=>[u(e,{class:"reshoot-header"},{default:c((()=>{return[u(t,{class:"reshoot-sn"},{default:c((()=>[r(k(a.reshoot_sn||`补拍#${a.id}`),1)])),_:2},1024),u(e,{class:i(["reshoot-status",(s=a.status,{0:"status-pending",1:"status-approved",2:"status-rejected",3:"status-completed"}[s]||"")])},{default:c((()=>[r(k(a.status_desc||F(a.status)),1)])),_:2},1032,["class"])];var s})),_:2},1024),u(e,{class:"reshoot-info"},{default:c((()=>[u(e,{class:"info-row"},{default:c((()=>[u(t,{class:"info-label"},{default:c((()=>[r("补拍类型：")])),_:1}),u(t,{class:"info-value"},{default:c((()=>{return[r(k(a.type_desc||(s=a.type,{1:"全部重拍",2:"部分重拍",3:"补拍加片"}[s]||"其他")),1)];var s})),_:2},1024)])),_:2},1024),u(e,{class:"info-row"},{default:c((()=>[u(t,{class:"info-label"},{default:c((()=>[r("申请原因：")])),_:1}),u(t,{class:"info-value"},{default:c((()=>{return[r(k(a.reason_type_desc||(s=a.reason_type,{1:"拍摄效果不满意",2:"照片质量问题",3:"服务态度问题",4:"天气原因",5:"其他原因"}[s]||"其他")),1)];var s})),_:2},1024)])),_:2},1024),a.expect_date?(l(),o(e,{key:0,class:"info-row"},{default:c((()=>[u(t,{class:"info-label"},{default:c((()=>[r("期望日期：")])),_:1}),u(t,{class:"info-value"},{default:c((()=>[r(k(a.expect_date),1)])),_:2},1024)])),_:2},1024)):_("v-if",!0)])),_:2},1024),u(e,{class:"reshoot-footer"},{default:c((()=>[u(t,{class:"reshoot-time"},{default:c((()=>[r(k(a.create_time),1)])),_:2},1024),0===a.status?(l(),o(t,{key:0,class:"reshoot-action",onClick:g((s=>(async a=>{b({title:"确认取消",content:"确定要取消此补拍申请吗？",success:async s=>{var e;if(s.confirm)try{await z(a),x({title:"取消成功"}),null==(e=V.value)||e.reload()}catch(t){x({title:"取消失败",icon:"none"})}}})})(a.id)),["stop"])},{default:c((()=>[r("取消申请")])),_:2},1032,["onClick"])):_("v-if",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),_(" 提交补拍按钮 "),u(e,{class:"create-btn",onClick:O},{default:c((()=>[u(w,{name:"plus",size:"40",color:"#fff"})])),_:1})])),_:1})}}}),[["__scopeId","data-v-9e26e24b"]]);export{$ as default};
