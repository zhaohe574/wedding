import{T as o,c as l,s as e,x as a,X as n,V as i,d as r,o as d,b as u,w as t,g as s,y as v,f as g,e as b,h as c,F as C,z as p,b1 as f,b2 as m,n as h,G as y,m as x}from"./index-e3492752.js";import{b as w,c as z,d as S,e as I,_}from"./icon.e613abcd.js";import{T as j}from"./badge.46a4bc76.js";import{b as k,d as B,u as G,a as M,f as T,g as $}from"./index.f1be293a.js";import{a as N,i as F}from"./is-empty.c0d66e4a.js";import"./index.89b6df5d.js";import{u as P}from"./index.04c93aab.js";import{_ as L}from"./_plugin-vue_export-helper.1b428a4d.js";const O=Symbol("avatarGroupContextKey"),W=k({url:String,icon:String,iconConfig:{type:B(Object),default:()=>({})},type:{type:String,values:w,default:""},size:{type:[String,Number]},shape:{type:String,values:["circle","square"],default:"circle"},imgMode:{type:String,values:z,default:"aspectFill"},bgColor:String,border:S,borderColor:String,borderBold:S,shadow:S,shadowColor:String,badge:{type:[String,Number]},badgeConfig:{type:B(Object),default:()=>({})}}),q=e=>{const a=o(O,void 0);return{type:l((()=>N(null==e?void 0:e.type,null==a?void 0:a.type,""))),size:l((()=>N(null==e?void 0:e.size,null==a?void 0:a.size,""))),shape:l((()=>N(null==e?void 0:e.shape,null==a?void 0:a.shape,"circle"))),imgMode:l((()=>N(null==e?void 0:e.imgMode,null==a?void 0:a.imgMode,"aspectFill"))),bgColor:l((()=>N(null==e?void 0:e.bgColor,null==a?void 0:a.bgColor,"tn-gray-light"))),border:l((()=>N(null==e?void 0:e.border,null==a?void 0:a.border,!1))),borderColor:l((()=>N(null==e?void 0:e.borderColor,null==a?void 0:a.borderColor,""))),borderBold:l((()=>N(null==e?void 0:e.borderBold,null==a?void 0:a.borderBold,!1))),shadow:l((()=>N(null==e?void 0:e.shadow,null==a?void 0:a.shadow,!1))),shadowColor:l((()=>N(null==e?void 0:e.shadowColor,null==a?void 0:a.shadowColor,""))),avatarGap:l((()=>{let o=Number(F(null==a?void 0:a.gap,0));return o<0&&(o=0),o>1&&(o=1),o}))}},A=L(r({__name:"avatar",props:W,emits:{click:()=>!0},setup(r,{emit:w}){const z=r,{componentId:S,avatarGroupIndex:k,avatarWidth:B,avatarClick:L}=((r,d)=>{const u=i(),{uid:t}=u,s=o(O,void 0);null==s||s.addItem({uid:t});const v=`ta-${$()}`,{getSelectorNodeInfo:g}=P(u),b=l((()=>F(null==s?void 0:s.avatarItems.length,0))),c=e(-1);a((()=>{const o=null==s?void 0:s.avatarItems.findIndex((o=>o.uid===t));c.value=F(o,-1),C.value||-1===c.value||f()}));const C=e(0);let p=0;const f=async()=>{try{const o=await g(`#${v}`);if(!o.width)throw new Error("获取头像宽度信息失败");C.value=o.width||0}catch(o){if(p>10)return void(p=0);p++,setTimeout((()=>{f()}),150)}};return n((()=>{null==s||s.removeItem(t)})),{componentId:v,groupAvatarCount:b,avatarGroupIndex:c,avatarWidth:C,avatarClick:()=>{null==s||s.handleItemClick(t),d("click")}}})(0,w),{ns:W,avatarClass:A,avatarStyle:E}=((o,e,a)=>{const n=G("avatar"),{type:i,size:r,shape:d,bgColor:u,border:t,borderColor:s,shadow:v,shadowColor:g,avatarGap:b}=q(o),[c,C]=M(u,"bg"),[p,f]=M(s,"border"),[m]=M(g,"shadow"),{sizeType:h}=I(r.value),y=l((()=>{const o=[];return o.push(n.b()),i.value&&o.push(`tn-type-${i.value}_bg`),!i.value&&c.value&&o.push(c.value),"inner"===h.value&&o.push(n.m(r.value)),d.value&&o.push(n.m(d.value)),t.value&&(o.push("tn-border"),p.value&&o.push(p.value)),v.value&&(o.push("tn-shadow"),m.value&&o.push(m.value)),o.join(" ")})),x=l((()=>{const o={};return"custom"===h.value&&(o.width=T(r.value),o.height=o.width),C.value&&(o.backgroundColor=C.value),t.value&&f.value&&(o.borderColor=f.value),-1!=e.value&&(o.zIndex=e.value+1,e.value>0?o.marginLeft=`calc(-${a.value*b.value}px)`:o.marginLeft="0px"),o}));return{ns:n,avatarClass:y,avatarStyle:x}})(z,k,B),{imgMode:K}=q(z),{iconSize:V,iconColor:X,iconBold:D}=(e=>{const a=o(O,void 0);return{iconColor:l((()=>{var o;return(null==e?void 0:e.color)||(null==(o=null==a?void 0:a.iconConfig)?void 0:o.color)||""})),iconSize:l((()=>{var o;return(null==e?void 0:e.size)||(null==(o=null==a?void 0:a.iconConfig)?void 0:o.size)||""})),iconBold:l((()=>{var o;return(null==e?void 0:e.bold)||(null==(o=null==a?void 0:a.iconConfig)?void 0:o.bold)||!1}))}})(z.iconConfig),{badgeConfig:H}=(e=>{const a=o(O,void 0),n=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.max,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.max)})),i=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.type,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.type,"primary")})),r=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.bgColor,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.bgColor)})),d=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.textColor,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.textColor)})),u=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.fontSize,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.fontSize)})),t=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.size,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.size)})),s=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.bold,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.bold,!1)})),v=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.dot,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.dot,!1)})),g=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.absolutePosition,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.absolutePosition,{})})),b=l((()=>{var o,l;return N(null==(o=null==e?void 0:e.badgeConfig)?void 0:o.absoluteCenter,null==(l=null==a?void 0:a.badgeConfig)?void 0:l.absoluteCenter,!0)}));return{badgeConfig:l((()=>({value:e.badge,max:n.value,type:i.value,bgColor:r.value,textColor:d.value,fontSize:u.value,size:t.value,bold:s.value,customClass:"",customStyle:{},dot:v.value,absolute:!0,absolutePosition:g.value,absoluteCenter:b.value,index:""})))}})(z);return(o,l)=>{const e=y,a=x;return d(),u(a,{id:g(S),class:v([g(A)]),style:h(g(E)),onClick:g(L)},{default:t((()=>[s(" 图片头像 "),o.url?(d(),u(a,{key:0,class:v([g(W).e("image")])},{default:t((()=>[b(e,{class:"image",src:o.url,mode:g(K)},null,8,["src","mode"])])),_:1},8,["class"])):o.icon?(d(),c(C,{key:1},[s(" 图标头像 "),b(a,{class:v([g(W).e("icon")])},{default:t((()=>[b(_,{name:o.icon,color:g(X),size:g(V),bold:g(D)},null,8,["name","color","size","bold"])])),_:1},8,["class"])],2112)):(d(),c(C,{key:2},[s(" 自定义 "),b(a,{class:v([g(W).e("custom")])},{default:t((()=>[p(o.$slots,"default",{},void 0,!0)])),_:3},8,["class"])],2112)),s(" 角标 "),b(j,f(m(g(H))),null,16)])),_:3},8,["id","class","style","onClick"])}}}),[["__scopeId","data-v-b0a0329e"]]);export{A as T,O as a,W as b};
