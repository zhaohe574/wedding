import{d as a,$ as e,s as l,O as t,o as s,b as c,w as i,e as n,y as o,j as u,h as d,i as r,F as m,g as p,k as f,m as v,l as _,r as g,a as y,t as k}from"./index-e3492752.js";import{_ as b}from"./icon.e613abcd.js";import{_ as x}from"./z-paging.18d58ff3.js";import{f as j}from"./aftersale.1766d410.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";const h=C(a({__name:"complaint",setup(a){const C=e(),h=l([]),w=l(""),z=a=>{var e;w.value=a,null==(e=C.value)||e.reload()},V=async(a,e)=>{var l,t,s;try{const s={page:a,limit:e};""!==w.value&&(s.status=w.value);const c=await j(s),i=(null==(l=null==c?void 0:c.data)?void 0:l.lists)||(null==c?void 0:c.lists)||[];null==(t=C.value)||t.complete(i)}catch(c){null==(s=C.value)||s.complete(!1)}},I=a=>({0:"待处理",1:"处理中",2:"已处理"}[a]||"未知"),$=a=>({1:"一般",2:"重要",3:"紧急"}[a]||"一般"),F=()=>{f({url:"/pages/aftersale/index?action=submit_complaint"})};return t((a=>{(null==a?void 0:a.status)&&(w.value=parseInt(a.status))})),(a,e)=>{const l=v,t=_,j=g(y("tn-icon"),b),O=g(y("z-paging"),x);return s(),c(l,{class:"complaint-page"},{default:i((()=>[n(O,{ref_key:"paging",ref:C,modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=a=>h.value=a),onQuery:V},{top:i((()=>[n(l,{class:"filter-tabs"},{default:i((()=>[n(l,{class:o(["tab-item",{active:""===w.value}]),onClick:e[0]||(e[0]=a=>z(""))},{default:i((()=>[u("全部")])),_:1},8,["class"]),n(l,{class:o(["tab-item",{active:0===w.value}]),onClick:e[1]||(e[1]=a=>z(0))},{default:i((()=>[u("待处理")])),_:1},8,["class"]),n(l,{class:o(["tab-item",{active:1===w.value}]),onClick:e[2]||(e[2]=a=>z(1))},{default:i((()=>[u("处理中")])),_:1},8,["class"]),n(l,{class:o(["tab-item",{active:2===w.value}]),onClick:e[3]||(e[3]=a=>z(2))},{default:i((()=>[u("已处理")])),_:1},8,["class"])])),_:1})])),empty:i((()=>[n(l,{class:"empty-state"},{default:i((()=>[n(j,{name:"warning",size:"120",color:"#ccc"}),n(t,{class:"empty-text"},{default:i((()=>[u("暂无投诉记录")])),_:1})])),_:1})])),default:i((()=>[n(l,{class:"complaint-list"},{default:i((()=>[(s(!0),d(m,null,r(h.value,(a=>(s(),c(l,{class:"complaint-item",key:a.id,onClick:e=>{return l=a.id,void f({url:`/pages/aftersale/index?action=complaint_detail&id=${l}`});var l}},{default:i((()=>[n(l,{class:"complaint-header"},{default:i((()=>{return[n(l,{class:o(["complaint-level",(t=a.level,{1:"level-low",2:"level-medium",3:"level-high"}[t]||"")])},{default:i((()=>[u(k($(a.level)),1)])),_:2},1032,["class"]),n(l,{class:o(["complaint-status",(e=a.status,{0:"status-pending",1:"status-processing",2:"status-completed"}[e]||"")])},{default:i((()=>[u(k(a.status_desc||I(a.status)),1)])),_:2},1032,["class"])];var e,t})),_:2},1024),n(l,{class:"complaint-title"},{default:i((()=>[u(k(a.title),1)])),_:2},1024),a.content?(s(),c(l,{key:0,class:"complaint-content"},{default:i((()=>[u(k(a.content),1)])),_:2},1024)):p("v-if",!0),n(l,{class:"complaint-footer"},{default:i((()=>[n(t,{class:"complaint-type"},{default:i((()=>{return[u(k(a.type_desc||(e=a.type,{1:"服务态度",2:"服务质量",3:"虚假宣传",4:"价格问题",5:"其他"}[e]||"其他")),1)];var e})),_:2},1024),n(t,{class:"complaint-time"},{default:i((()=>[u(k(a.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),p(" 提交投诉按钮 "),n(l,{class:"create-btn",onClick:F},{default:i((()=>[n(j,{name:"plus",size:"40",color:"#fff"})])),_:1})])),_:1})}}}),[["__scopeId","data-v-87c6e254"]]);export{h as default};
