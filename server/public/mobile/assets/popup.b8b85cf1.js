import{c as e,d as o,o as t,b as s,w as a,z as i,y as n,f as r,n as l,A as p,m as u,q as c,W as d,s as m,v,V as y,g as f,e as h}from"./index-e3492752.js";import{Z as b}from"./z-index.5f93cfb9.js";import{b as g,u as C,a as D,f as x}from"./index.f1be293a.js";import{i as k}from"./is-boolean.00bf65dc.js";import{i as w}from"./is-empty.c0d66e4a.js";import"./index.89b6df5d.js";import{_ as B}from"./_plugin-vue_export-helper.1b428a4d.js";import{j as _,_ as I}from"./icon.e613abcd.js";import{U as z}from"./event.5568c9d8.js";import{a as j}from"./install.8446dea8.js";const R=g({show:{type:Boolean,default:!1},duration:{type:Number,default:300},opacity:{type:Number,default:.5},zIndex:{type:Number,default:b.mask}}),N=B(o({__name:"overlay",props:R,emits:{"update:show":e=>k(e),click:()=>!0},setup(o,{emit:c}){const d=o,{overlayClass:m,overlayStyle:v,overlayClick:y}=((o,t)=>{const s=C("overlay"),a=e((()=>{const e=[s.b()];return o.show&&e.push(s.m("show")),e.join(" ")})),i=e((()=>{const e={};return e.transitionDuration=`${w(o.duration,300)}ms`,e.backgroundColor=`rgba(0, 0, 0, ${w(o.opacity,.5)})`,o.zIndex&&(e.zIndex=o.zIndex),e}));return{ns:s,overlayClass:a,overlayStyle:i,overlayClick:()=>{t("update:show",!1),t("click")}}})(d,c);return(e,o)=>{const c=u;return t(),s(c,{class:n([r(m)]),style:l(r(v)),onClick:p(r(y),["stop"]),onTouchmove:o[0]||(o[0]=p((()=>{}),["stop","prevent"]))},{default:a((()=>[i(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])}}}),[["__scopeId","data-v-c16721ff"]]);j(N);const S=g({modelValue:Boolean,openDirection:{type:String,values:["top","bottom","left","right","center"],default:"center"},width:{type:[String,Number]},height:{type:[String,Number]},bgColor:{type:String,default:"#fff"},radius:{type:[String,Number],default:15},overlay:{type:Boolean,default:!0},overlayOpacity:R.opacity,overlayCloseable:{type:Boolean,default:!0},closeBtn:Boolean,closeBtnPosition:{type:String,values:["left-top","right-top","left-bottom","right-bottom"],default:"right-top"},safeAreaInsetBottom:_,zIndex:{type:Number,default:b.popup},top:{type:[String,Number]}}),T=B(o({__name:"popup",props:S,emits:{[z]:e=>k(e),open:()=>!0,close:()=>!0,"overlay-click":()=>!0},setup(o){const b=o,{iosDevice:g,showOverlay:k,showPopup:w,visiblePopup:B,onClickCloseBtn:_,onClickOverlay:j}=(o=>{const{emit:t}=y(),s=e((()=>{const e=d();return"ios"===e.osName||"macos"===e.osName})),a=m(!1),i=m(!1),n=m(!1);let r=!1;v((()=>o.modelValue),(e=>{e?(n.value=!0,s.value?setTimeout((()=>{i.value=!0,o.overlay&&(a.value=!0),r&&t("open")}),0):(i.value=!0,o.overlay&&(a.value=!0),r&&t("open"))):(i.value=!1,a.value=!1,setTimeout((()=>{n.value=!1}),250),r&&t("close")),r=!0}),{immediate:!0});const l=e=>{t(z,e)};return{iosDevice:s,showOverlay:a,showPopup:i,visiblePopup:n,updateModelValue:l,onClickCloseBtn:()=>{l(!1),t("close")},onClickOverlay:()=>{o.overlayCloseable&&(l(!1),t("close"),t("overlay-click"))}}})(b),{ns:R,overlayZIndex:S,zIndex:T,popupContentClass:O,popupContentStyle:P}=(o=>{const t=C("popup"),s=e((()=>Number(o.zIndex))),a=e((()=>s.value-1)),[i,n]=D(c(o,"bgColor"),"bg"),r=e((()=>{const e=[t.e("content")];return o.openDirection&&e.push(t.em("content",o.openDirection)),"bottom"===o.openDirection&&o.safeAreaInsetBottom&&e.push("tn-u-safe-area"),i.value&&e.push(i.value),e.join(" ")})),l=e((()=>{const e={};return n.value&&(e.backgroundColor=n.value),o.radius&&(e.overflow="hidden","center"===o.openDirection&&(e.borderRadius=x(o.radius)),"top"===o.openDirection&&(e.borderBottomLeftRadius=x(o.radius),e.borderBottomRightRadius=x(o.radius)),"left"===o.openDirection&&(e.borderTopRightRadius=x(o.radius),e.borderBottomRightRadius=x(o.radius)),"right"===o.openDirection&&(e.borderTopLeftRadius=x(o.radius),e.borderBottomLeftRadius=x(o.radius)),"bottom"===o.openDirection&&(e.borderTopLeftRadius=x(o.radius),e.borderTopRightRadius=x(o.radius))),!o.top||"top"!==o.openDirection&&"left"!==o.openDirection&&"right"!==o.openDirection||(e.top=x(o.top,"px")),!o.width||"left"!==o.openDirection&&"right"!==o.openDirection&&"center"!==o.openDirection||(e.width=x(o.width)),!o.height||"top"!==o.openDirection&&"bottom"!==o.openDirection&&"center"!==o.openDirection||(e.height=x(o.height)),"left"!==o.openDirection&&"right"!==o.openDirection||o.top&&(e.height=`calc(100% - ${x(o.top,"px")})`),e.zIndex=s.value,e}));return{ns:t,zIndex:s,overlayZIndex:a,popupContentClass:r,popupContentStyle:l}})(b);return(e,o)=>{const c=u;return!r(g)||r(g)&&r(B)?(t(),s(c,{key:0,class:n([r(R).b(),r(R).is("show",r(w)),r(R).is("visible",r(B))]),style:l({zIndex:r(T)})},{default:a((()=>[f(" 遮罩层 "),h(N,{show:r(k),"z-index":r(S),opacity:e.overlayOpacity,onClick:r(j)},null,8,["show","z-index","opacity","onClick"]),f(" 弹框内容 "),h(c,{class:n([r(O)]),style:l(r(P))},{default:a((()=>[i(e.$slots,"default",{},void 0,!0),f(" 关闭按钮 "),e.closeBtn?(t(),s(c,{key:0,class:n([r(R).e("close-btn"),r(R).em("close-btn",e.closeBtnPosition)]),onClick:p(r(_),["stop"])},{default:a((()=>[i(e.$slots,"closeBtn",{},(()=>[h(I,{name:"close"})]),!0)])),_:3},8,["class","onClick"])):f("v-if",!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])):f("v-if",!0)}}}),[["__scopeId","data-v-774ac790"]]);export{T as _};
