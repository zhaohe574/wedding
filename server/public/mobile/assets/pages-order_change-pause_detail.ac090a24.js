import{d as e,s as a,c as t,O as l,o as s,h as u,e as r,w as d,b as c,j as _,F as i,g as f,y as o,t as n,f as v,i as m,k as g,aP as p,aD as y,r as b,a as x,m as w,l as k,aJ as h,J as j,G as C}from"./index-e3492752.js";import{_ as $}from"./navigation-bar.2687311c.js";import{_ as D}from"./page-meta.a4be6114.js";import{n as F,e as J}from"./orderChange.66dcaaa9.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";const B=T(e({__name:"pause_detail",setup(e){const T=a(!0),B=a(null),G=a(0),H=t((()=>{if(!B.value||1!==B.value.pause_status)return-1;const e=new Date(B.value.pause_end_date),a=new Date;a.setHours(0,0,0,0);return Math.ceil((e.getTime()-a.getTime())/864e5)})),I=e=>({0:"您的暂停申请正在等待审核中",1:"订单已暂停，到期后请及时申请恢复",2:"订单已恢复正常状态",3:"很抱歉，您的暂停申请未通过审核",4:"该暂停申请已取消"}[e]||""),M=async()=>{T.value=!0;try{const e=await F({id:G.value});B.value=e}catch(e){console.error(e)}finally{T.value=!1}},N=async()=>{if((await p({title:"提示",content:"确定要取消该暂停申请吗？"})).confirm)try{await J({id:G.value}),y({title:"已取消"}),M()}catch(e){y({title:e.message||"操作失败",icon:"none"})}};return l((e=>{e.id&&(G.value=Number(e.id),M())})),(e,a)=>{const t=b(x("navigation-bar"),$),l=b(x("page-meta"),D),p=w,y=k,F=C,J=h;return s(),u(i,null,[r(l,{"page-style":e.$theme.pageStyle},{default:d((()=>[r(t,{title:"暂停详情","front-color":e.$theme.navColor,"background-color":e.$theme.navBgColor},null,8,["front-color","background-color"])])),_:1},8,["page-style"]),r(p,{class:"pause-detail"},{default:d((()=>{return[T.value?(s(),c(p,{key:0,class:"py-20 text-center text-gray-400"},{default:d((()=>[_(" 加载中... ")])),_:1})):B.value?(s(),u(i,{key:1},[f(" 状态卡片 "),r(p,{class:o(["status-card",(e=B.value.pause_status,{0:"bg-orange",1:"bg-blue",2:"bg-green",3:"bg-red",4:"bg-gray"}[e]||"bg-gray")])},{default:d((()=>[r(p,{class:"text-lg font-bold"},{default:d((()=>[_(n(B.value.pause_status_desc),1)])),_:1}),r(p,{class:"text-sm mt-1 opacity-80"},{default:d((()=>[_(n(I(B.value.pause_status)),1)])),_:1}),f(" 剩余天数 "),1===B.value.pause_status&&v(H)>=0?(s(),c(p,{key:0,class:"remain-days"},{default:d((()=>[v(H)>0?(s(),c(y,{key:0},{default:d((()=>[_("剩余 "+n(v(H))+" 天",1)])),_:1})):(s(),c(y,{key:1,class:"text-yellow-300"},{default:d((()=>[_("今日到期")])),_:1}))])),_:1})):f("v-if",!0)])),_:1},8,["class"]),f(" 暂停信息 "),r(p,{class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("暂停信息")])),_:1}),r(p,{class:"info-row"},{default:d((()=>[r(y,{class:"label"},{default:d((()=>[_("暂停单号")])),_:1}),r(y,{class:"value"},{default:d((()=>[_(n(B.value.pause_sn),1)])),_:1})])),_:1}),r(p,{class:"info-row"},{default:d((()=>{return[r(y,{class:"label"},{default:d((()=>[_("暂停类型")])),_:1}),r(p,{class:o(["tag",(e=B.value.pause_type,{1:"bg-red-100 text-red-600",2:"bg-orange-100 text-orange-600",3:"bg-blue-100 text-blue-600",4:"bg-gray-100 text-gray-600"}[e]||"bg-gray-100 text-gray-600")])},{default:d((()=>[_(n(B.value.pause_type_desc),1)])),_:1},8,["class"])];var e})),_:1}),r(p,{class:"info-row"},{default:d((()=>[r(y,{class:"label"},{default:d((()=>[_("申请时间")])),_:1}),r(y,{class:"value"},{default:d((()=>[_(n(B.value.create_time),1)])),_:1})])),_:1}),B.value.audit_time?(s(),c(p,{key:0,class:"info-row"},{default:d((()=>[r(y,{class:"label"},{default:d((()=>[_("审核时间")])),_:1}),r(y,{class:"value"},{default:d((()=>[_(n(B.value.audit_time),1)])),_:1})])),_:1})):f("v-if",!0),B.value.resume_time?(s(),c(p,{key:1,class:"info-row"},{default:d((()=>[r(y,{class:"label"},{default:d((()=>[_("恢复时间")])),_:1}),r(y,{class:"value"},{default:d((()=>[_(n(B.value.resume_time),1)])),_:1})])),_:1})):f("v-if",!0)])),_:1}),f(" 暂停时间 "),r(p,{class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("暂停时间")])),_:1}),r(p,{class:"pause-time-card"},{default:d((()=>[r(p,{class:"time-item"},{default:d((()=>[r(p,{class:"time-label"},{default:d((()=>[_("开始日期")])),_:1}),r(p,{class:"time-value"},{default:d((()=>[_(n(B.value.pause_start_date),1)])),_:1})])),_:1}),r(p,{class:"time-divider"},{default:d((()=>[_("~")])),_:1}),r(p,{class:"time-item"},{default:d((()=>[r(p,{class:"time-label"},{default:d((()=>[_("结束日期")])),_:1}),r(p,{class:"time-value"},{default:d((()=>[_(n(B.value.pause_end_date),1)])),_:1})])),_:1})])),_:1}),r(p,{class:"pause-days-info"},{default:d((()=>[r(p,{class:"days-item"},{default:d((()=>[r(y,{class:"days-label"},{default:d((()=>[_("计划天数")])),_:1}),r(y,{class:"days-value"},{default:d((()=>[_(n(B.value.pause_days)+"天",1)])),_:1})])),_:1}),B.value.actual_pause_days?(s(),c(p,{key:0,class:"days-item"},{default:d((()=>[r(y,{class:"days-label"},{default:d((()=>[_("实际天数")])),_:1}),r(y,{class:"days-value"},{default:d((()=>[_(n(B.value.actual_pause_days)+"天",1)])),_:1})])),_:1})):f("v-if",!0)])),_:1})])),_:1}),f(" 暂停原因 "),r(p,{class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("暂停原因")])),_:1}),r(p,{class:"text-gray-600 text-sm"},{default:d((()=>[_(n(B.value.pause_reason),1)])),_:1})])),_:1}),f(" 证明材料 "),B.value.proof_images&&B.value.proof_images.length>0?(s(),c(p,{key:0,class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("证明材料")])),_:1}),r(p,{class:"image-list"},{default:d((()=>[(s(!0),u(i,null,m(B.value.proof_images,((e,a)=>(s(),c(F,{key:a,src:e,class:"proof-image",mode:"aspectFill",onClick:e=>(e=>{j({current:e,urls:B.value.proof_images})})(a)},null,8,["src","onClick"])))),128))])),_:1})])),_:1})):f("v-if",!0),f(" 审核结果 "),B.value.pause_status>=3&&B.value.reject_reason?(s(),c(p,{key:1,class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("拒绝原因")])),_:1}),r(p,{class:"text-red-500 text-sm"},{default:d((()=>[_(n(B.value.reject_reason),1)])),_:1})])),_:1})):f("v-if",!0),f(" 服务日期变更 "),B.value.original_service_date||B.value.new_service_date?(s(),c(p,{key:2,class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("服务日期")])),_:1}),B.value.original_service_date?(s(),c(p,{key:0,class:"info-row"},{default:d((()=>[r(y,{class:"label"},{default:d((()=>[_("原服务日期")])),_:1}),r(y,{class:"value"},{default:d((()=>[_(n(B.value.original_service_date),1)])),_:1})])),_:1})):f("v-if",!0),B.value.new_service_date?(s(),c(p,{key:1,class:"info-row"},{default:d((()=>[r(y,{class:"label"},{default:d((()=>[_("新服务日期")])),_:1}),r(y,{class:"value text-primary"},{default:d((()=>[_(n(B.value.new_service_date),1)])),_:1})])),_:1})):f("v-if",!0)])),_:1})):f("v-if",!0),f(" 关联订单 "),B.value.order?(s(),c(p,{key:3,class:"bg-white mt-3 p-4"},{default:d((()=>[r(p,{class:"section-title"},{default:d((()=>[_("关联订单")])),_:1}),r(p,{class:"order-card",onClick:a[0]||(a[0]=e=>{return a=B.value.order.id,void g({url:`/pages/order_detail/order_detail?id=${a}`});var a})},{default:d((()=>[r(p,{class:"flex justify-between items-center"},{default:d((()=>[r(y,{class:"text-sm text-gray-500"},{default:d((()=>[_(n(B.value.order.order_sn),1)])),_:1}),r(y,{class:"text-sm text-primary"},{default:d((()=>[_("查看订单 >")])),_:1})])),_:1}),r(p,{class:"flex justify-between mt-2"},{default:d((()=>[r(y,{class:"text-sm text-gray-600"},{default:d((()=>[_("服务日期: "+n(B.value.order.service_date),1)])),_:1}),r(y,{class:"text-primary font-bold"},{default:d((()=>[_("¥"+n(B.value.order.pay_amount),1)])),_:1})])),_:1})])),_:1})])),_:1})):f("v-if",!0),f(" 底部操作 "),0===B.value.pause_status?(s(),c(p,{key:4,class:"bottom-actions"},{default:d((()=>[r(J,{class:"btn-cancel",onClick:N},{default:d((()=>[_("取消申请")])),_:1})])),_:1})):f("v-if",!0)],64)):(s(),c(p,{key:2,class:"py-20 text-center text-gray-400"},{default:d((()=>[_(" 数据不存在 ")])),_:1}))];var e})),_:1})],64)}}}),[["__scopeId","data-v-eb215479"]]);export{B as default};
