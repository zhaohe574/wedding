import{d as a,u as e,c as s,s as l,M as t,o,h as r,e as u,w as i,g as c,f as n,j as p,y as d,t as m,F as f,aq as _,aj as b,ak as w,av as j,r as h,a as v,m as g,l as $}from"./index-e3492752.js";import{_ as y}from"./page-meta.a4be6114.js";import{_ as V}from"./icon.e613abcd.js";import{_ as x}from"./input.1776ceae.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";import"./is-number.7ef6fec2.js";import"./_objectToString.c905654b.js";import"./event.5568c9d8.js";import"./index.23c2867d.js";import"./install.8446dea8.js";import"./is-empty.c0d66e4a.js";import"./is-boolean.00bf65dc.js";import"./index.89b6df5d.js";import"./index.04c93aab.js";import"./debounce.096fb07a.js";import"./clone-deep.2124c060.js";const z=k(a({__name:"forget_pwd",setup(a){const k=e(),z=s((()=>k.primaryColor)),I=l("获取验证码"),C=l(!0),S=t({mobile:"",code:"",password:"",password_confirm:""}),U=s((()=>S.mobile&&S.code&&S.password&&S.password_confirm)),D=()=>{_()},F=async()=>{if(!S.mobile)return uni.$u.toast("请输入手机号码");C.value&&(await b({scene:w.FIND_PASSWORD,mobile:S.mobile}),uni.$u.toast("发送成功"),(()=>{let a=60;C.value=!1,I.value=`${a}秒`;const e=setInterval((()=>{a--,a>0?I.value=`${a}秒`:(clearInterval(e),I.value="获取验证码",C.value=!0)}),1e3)})())},T=async()=>{if(!S.mobile)return uni.$u.toast("请输入手机号码");if(!S.code)return uni.$u.toast("请输入验证码");if(!S.password)return uni.$u.toast("请输入密码");if(S.password.length<6)return uni.$u.toast("密码至少6位字符");if(!S.password_confirm)return uni.$u.toast("请输入确认密码");if(S.password!=S.password_confirm)return uni.$u.toast("两次输入的密码不一致");try{await j(S),uni.$u.toast("密码重置成功"),setTimeout((()=>{_()}),1500)}catch(a){uni.$u.toast(a||"重置失败")}};return(a,e)=>{const s=h(v("page-meta"),y),l=g,t=h(v("tn-icon"),V),_=h(v("tn-input"),x),b=$;return o(),r(f,null,[u(s,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),u(l,{class:"forget-pwd-container"},{default:i((()=>[c(" 背景装饰 "),u(l,{class:"bg-decoration"},{default:i((()=>[u(l,{class:"circle circle-1"}),u(l,{class:"circle circle-2"})])),_:1}),c(" 主内容区 "),u(l,{class:"content"},{default:i((()=>[c(" 头部区域 "),u(l,{class:"header-section"},{default:i((()=>[u(l,{class:"back-btn",onClick:D},{default:i((()=>[u(t,{name:"left",size:"40",color:n(z)},null,8,["color"])])),_:1}),u(l,{class:"title-text"},{default:i((()=>[p("忘记密码")])),_:1}),u(l,{class:"subtitle-text"},{default:i((()=>[p("通过手机号重置您的密码")])),_:1})])),_:1}),c(" 表单卡片 "),u(l,{class:"form-card"},{default:i((()=>[c(" 手机号 "),u(l,{class:"input-group"},{default:i((()=>[u(l,{class:"input-label"},{default:i((()=>[p("手机号")])),_:1}),u(l,{class:"input-wrapper"},{default:i((()=>[u(t,{name:"phone",size:"36",color:"#9ca3af",class:"input-icon"}),u(_,{modelValue:S.mobile,"onUpdate:modelValue":e[0]||(e[0]=a=>S.mobile=a),border:!1,placeholder:"请输入手机号码",class:"custom-input"},null,8,["modelValue"])])),_:1})])),_:1}),c(" 验证码 "),u(l,{class:"input-group"},{default:i((()=>[u(l,{class:"input-label"},{default:i((()=>[p("验证码")])),_:1}),u(l,{class:"input-wrapper"},{default:i((()=>[u(t,{name:"shield-check",size:"36",color:"#9ca3af",class:"input-icon"}),u(_,{class:"custom-input",modelValue:S.code,"onUpdate:modelValue":e[1]||(e[1]=a=>S.code=a),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),u(l,{class:d(["code-btn",{"code-btn-active":C.value&&S.mobile}]),onClick:F},{default:i((()=>[p(m(I.value),1)])),_:1},8,["class"])])),_:1})])),_:1}),c(" 新密码 "),u(l,{class:"input-group"},{default:i((()=>[u(l,{class:"input-label"},{default:i((()=>[p("新密码")])),_:1}),u(l,{class:"input-wrapper"},{default:i((()=>[u(t,{name:"lock",size:"36",color:"#9ca3af",class:"input-icon"}),u(_,{type:"password",modelValue:S.password,"onUpdate:modelValue":e[2]||(e[2]=a=>S.password=a),placeholder:"6-20位数字+字母或符号组合",border:!1,class:"custom-input"},null,8,["modelValue"])])),_:1})])),_:1}),c(" 确认密码 "),u(l,{class:"input-group"},{default:i((()=>[u(l,{class:"input-label"},{default:i((()=>[p("确认密码")])),_:1}),u(l,{class:"input-wrapper"},{default:i((()=>[u(t,{name:"shield-check",size:"36",color:"#9ca3af",class:"input-icon"}),u(_,{type:"password",modelValue:S.password_confirm,"onUpdate:modelValue":e[3]||(e[3]=a=>S.password_confirm=a),placeholder:"再次输入新密码",border:!1,class:"custom-input"},null,8,["modelValue"])])),_:1})])),_:1}),c(" 确定按钮 "),u(l,{class:"btn-wrapper"},{default:i((()=>[u(l,{class:d(["btn-primary",{"btn-disabled":!n(U)}]),onClick:T,"hover-class":"btn-hover"},{default:i((()=>[u(b,{class:"btn-text"},{default:i((()=>[p("确定")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-1e3e9841"]]);export{z as default};
