import{d as a,C as t,s as e,M as o,P as s,k as n,o as l,h as i,e as r,w as d,j as m,F as p,aD as u,aq as c,r as g,a as f,m as _}from"./index-e3492752.js";import{_ as j}from"./navigation-bar.2687311c.js";import{_ as x}from"./page-meta.a4be6114.js";import{_ as b}from"./input.1776ceae.js";import{_ as h}from"./button.c1dc664f.js";import{u as v}from"./admin.5b05ff33.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./icon.e613abcd.js";import"./index.f1be293a.js";import"./is-number.7ef6fec2.js";import"./_objectToString.c905654b.js";import"./event.5568c9d8.js";import"./index.23c2867d.js";import"./install.8446dea8.js";import"./is-empty.c0d66e4a.js";import"./is-boolean.00bf65dc.js";import"./index.89b6df5d.js";import"./index.04c93aab.js";import"./debounce.096fb07a.js";import"./clone-deep.2124c060.js";import"./loading.2b80eb94.js";const y=a({__name:"admin_login",setup(a){const y=v(),w=t(),V=e(!1),k=o({account:"",password:""}),C=async()=>{if(k.account.trim())if(k.password.trim()){V.value=!0;try{await y.login({account:k.account.trim(),password:k.password}),u({title:"登录成功",icon:"success"}),setTimeout((()=>{n({url:"/packages/pages/admin_dashboard/admin_dashboard"})}),300)}catch(a){const t="string"==typeof a?a:(null==a?void 0:a.msg)||(null==a?void 0:a.message)||"登录失败";u({title:t,icon:"none"})}finally{V.value=!1}}else u({title:"请输入密码",icon:"none"});else u({title:"请输入账号",icon:"none"})};return s((async()=>{await(async()=>{var a,t,e;return(null==(a=w.config)?void 0:a.feature_switch)||await w.getConfig(),1===(null==(e=null==(t=w.config)?void 0:t.feature_switch)?void 0:e.admin_dashboard)||(u({title:"管理员看板已关闭",icon:"none"}),setTimeout((()=>c()),1200),!1)})()&&y.isLogin&&n({url:"/packages/pages/admin_dashboard/admin_dashboard"})})),(a,t)=>{const e=g(f("navigation-bar"),j),o=g(f("page-meta"),x),s=_,n=g(f("tn-input"),b),u=g(f("tn-button"),h);return l(),i(p,null,[r(o,{"page-style":a.$theme.pageStyle},{default:d((()=>[r(e,{title:"管理员登录","front-color":a.$theme.navColor,"background-color":a.$theme.navBgColor},null,8,["front-color","background-color"])])),_:1},8,["page-style"]),r(s,{class:"min-h-screen bg-[#f6f6f6]"},{default:d((()=>[r(s,{class:"bg-white mx-[24rpx] mt-[40rpx] rounded-lg p-[32rpx]"},{default:d((()=>[r(s,{class:"text-lg font-semibold text-center"},{default:d((()=>[m("管理员看板登录")])),_:1}),r(s,{class:"mt-[30rpx]"},{default:d((()=>[r(s,{class:"text-sm text-gray-500 mb-[10rpx]"},{default:d((()=>[m("账号")])),_:1}),r(n,{modelValue:k.account,"onUpdate:modelValue":t[0]||(t[0]=a=>k.account=a),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),r(s,{class:"mt-[20rpx]"},{default:d((()=>[r(s,{class:"text-sm text-gray-500 mb-[10rpx]"},{default:d((()=>[m("密码")])),_:1}),r(n,{modelValue:k.password,"onUpdate:modelValue":t[1]||(t[1]=a=>k.password=a),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),r(s,{class:"mt-[30rpx]"},{default:d((()=>[r(u,{type:"primary",shape:"round",size:"lg",loading:V.value,onClick:C},{default:d((()=>[m(" 登录 ")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})],64)}}});export{y as default};
