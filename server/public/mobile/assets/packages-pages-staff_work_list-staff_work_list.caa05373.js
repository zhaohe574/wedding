import{d as a,s as e,P as t,o as s,h as l,e as o,w as r,j as i,F as n,i as p,k as u,r as d,a as c,m as f,b as m,t as g,aP as _,aD as x,G as v}from"./index-e3492752.js";import{_ as y}from"./navigation-bar.2687311c.js";import{_ as b}from"./page-meta.a4be6114.js";import{_ as k}from"./button.c1dc664f.js";import{_ as h}from"./z-paging.18d58ff3.js";import{e as j,b as w,c as C}from"./staff-center.563e3f5c.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./icon.e613abcd.js";import"./index.f1be293a.js";import"./loading.2b80eb94.js";import"./index.89b6df5d.js";import"./debounce.096fb07a.js";const z=a({__name:"staff_work_list",setup(a){const z=e(null),V=e([]),$=async(a,e)=>{try{const t=await w({page:a,page_size:e}),s=(null==t?void 0:t.data)||[];z.value.complete(s)}catch(t){z.value.complete(!1)}},P=()=>{u({url:"/packages/pages/staff_work_edit/staff_work_edit"})};return t((async()=>{var a;await j()&&(null==(a=z.value)||a.reload())})),(a,e)=>{const t=d(c("navigation-bar"),y),j=d(c("page-meta"),b),w=d(c("tn-button"),k),F=f,R=v,B=d(c("z-paging"),h);return s(),l(n,null,[o(j,{"page-style":a.$theme.pageStyle},{default:r((()=>[o(t,{title:"作品管理","front-color":a.$theme.navColor,"background-color":a.$theme.navBgColor},null,8,["front-color","background-color"])])),_:1},8,["page-style"]),o(F,{class:"min-h-screen bg-[#f6f6f6]"},{default:r((()=>[o(B,{ref_key:"pagingRef",ref:z,modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),onQuery:$,auto:!0},{top:r((()=>[o(F,{class:"bg-white px-[24rpx] py-[20rpx]"},{default:r((()=>[o(w,{type:"primary",shape:"round",size:"md",onClick:P},{default:r((()=>[i(" 新增作品 ")])),_:1})])),_:1})])),default:r((()=>[o(F,{class:"px-[24rpx] pb-[24rpx]"},{default:r((()=>[(s(!0),l(n,null,p(V.value,(a=>(s(),m(F,{key:a.id,class:"bg-white rounded-lg p-[20rpx] mb-[20rpx]"},{default:r((()=>[o(F,{class:"flex items-center"},{default:r((()=>{var e;return[o(R,{class:"w-[140rpx] h-[140rpx] rounded-lg bg-[#f2f2f2]",src:a.cover||(null==(e=a.images)?void 0:e[0])||"/static/images/default-avatar.png",mode:"aspectFill"},null,8,["src"]),o(F,{class:"flex-1 ml-[20rpx]"},{default:r((()=>[o(F,{class:"text-base font-semibold text-[#333]"},{default:r((()=>[i(g(a.title||"未命名作品"),1)])),_:2},1024),o(F,{class:"text-xs text-gray-400 mt-[6rpx]"},{default:r((()=>{return[i(" 审核："+g((e=a.audit_status,{0:"待审核",1:"已通过",2:"已拒绝"}[e]||"未知"))+" · "+g(a.is_show?"显示":"隐藏"),1)];var e})),_:2},1024)])),_:2},1024)]})),_:2},1024),o(F,{class:"flex justify-end gap-[16rpx] mt-[20rpx]"},{default:r((()=>[o(w,{size:"sm",type:"primary",shape:"round",plain:!0,onClick:e=>(a=>{u({url:`/packages/pages/staff_work_edit/staff_work_edit?id=${a.id}`})})(a)},{default:r((()=>[i(" 编辑 ")])),_:2},1032,["onClick"]),o(w,{size:"sm",type:"danger",shape:"round",plain:!0,onClick:e=>(a=>{_({title:"确认删除",content:"删除后不可恢复，是否继续？",success:async e=>{if(e.confirm)try{await C({id:a.id}),x({title:"删除成功",icon:"success"}),z.value.reload()}catch(t){const a="string"==typeof t?t:(null==t?void 0:t.msg)||(null==t?void 0:t.message)||"删除失败";x({title:a,icon:"none"})}}})})(a)},{default:r((()=>[i(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})],64)}}});export{z as default};
