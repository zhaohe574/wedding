import{_ as e}from"./page-meta.a4be6114.js";import{d as t,s as a,T as l,U as s,c as o,v as n,o as i,b as u,w as r,z as c,g as d,y as p,n as f,V as v,m as h,W as m,x as y,X as b,e as g,f as _,M as x,Y as S,r as w,a as k,h as j,F as C,i as $,j as z,t as T,Z as I,_ as F,K as X,I as Y,$ as B,O as R,p as W}from"./index-e3492752.js";import{_ as M}from"./search-box.5072d83b.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";import{T as O}from"./badge.46a4bc76.js";import{Z as V}from"./z-index.5f93cfb9.js";import{b as H,u as D,f as E,g as U}from"./index.f1be293a.js";import{i as Z}from"./is-boolean.00bf65dc.js";import"./index.89b6df5d.js";import{i as A}from"./is-empty.c0d66e4a.js";import{u as K}from"./index.04c93aab.js";import{u as L}from"./index.cf579d2e.js";import{_ as Q}from"./tabbar.vue_vue_type_script_setup_true_lang.d2dbfaf9.js";import{_ as q}from"./news-card.c15da655.js";import{_ as G}from"./z-paging.18d58ff3.js";import{g as J,a as P}from"./news.5e7d2215.js";import"./icon.e613abcd.js";import"./event.5568c9d8.js";import"./debounce.096fb07a.js";import"./is-number.7ef6fec2.js";import"./_objectToString.c905654b.js";import"./u-icon.c576501f.js";import"./icon_visit.713e13e8.js";const ee=N(t({__name:"tab",props:{dot:{type:[Boolean,String],default:!1},name:{type:[Boolean,String],default:""},info:null},setup(e){const t=e,m=a(!1),y=a(!1),b=a(!1),g=a(void 0),_=l("updateTabs"),x=l("handleChange"),S=()=>{_&&_()},w=v();console.log(w),x(null==w?void 0:w.props,(e=>{g.value=g.value||e,m.value=e,b.value=g.value,y.value=e})),s((()=>{S()}));const k=o((()=>{const{dot:e,info:a}=t;return{dot:e,info:a}}));return n((()=>k.value),(()=>{S()})),n((()=>t.name),(e=>{S()})),(e,t)=>{const a=h;return i(),u(a,{class:p({active:m.value,inactive:!m.value,tab:!0}),style:f(y.value?"":"display: none;")},{default:r((()=>[b.value?c(e.$slots,"default",{key:0},void 0,!0):d("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-a5e2333b"]]),te=H({enabled:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},zIndex:{type:Number,default:V.sticky}}),ae=()=>{const e=a(null);return{supportCSSSticky:e,checkCSSStickySupport:async t=>{(()=>{const t=["","-webkit-","-ms-","-moz-","-o-"],a=t.length,l=document.createElement("div");for(let s=0;s<a;s++)if(l.style.position=`${t[s]}sticky`,""!==l.style.position)return void(e.value=!0);e.value=!1})(),e.value||(()=>{const{platform:t,system:a}=m(),l=t.toLowerCase();"android"===l&&Number(a.replace("Android",""))>8||"ios"===l?e.value=!0:e.value=!1})(),e.value}}},le=N(t({__name:"sticky",props:te,emits:{change:e=>Z(e)},setup(e){const t=e,{componentId:l,supportCSSSticky:d,stickyStatus:m,stickyDistance:x,stickyContainerRect:S}=(e=>{const t=v(),{emit:l}=t,i=`ts-${U()}`,{supportCSSSticky:u,checkCSSStickySupport:r}=ae(),{connectObserver:c,disconnectObserver:d}=L(t),{getSelectorNodeInfo:p}=K(t),f=o((()=>A(null==e?void 0:e.offsetTop,0))),h=a(!1),m=e=>{e?l("change",!0):h.value&&l("change",!1),h.value=e};let g=0;const _=a({width:"auto",height:"auto",left:0}),x=()=>{c(`#${i}`,(t=>{e.enabled&&m(t.boundingClientRect.top<=f.value)}),{type:"relativeToViewport",margins:{top:-f.value}},{thresholds:[.95,.98,1]})},S=async()=>{d();try{const e=await p(`#${i}`);g=0,_.value.width=e.width||0,_.value.height=e.height||0,_.value.left=e.left||0,y((()=>{x()}))}catch(e){if(g>10)return void(g=0);g++,setTimeout((()=>{S()}),150)}};n((()=>u.value),(t=>{!1===t&&e.enabled&&S()})),n((()=>e.offsetTop),(()=>{y((()=>{w()}))})),n((()=>e.enabled),(e=>{e?(d(),x()):(m(!1),d())}));const w=()=>{r(`#${i}`)};return s((()=>{y((()=>{w()}))})),b((()=>{d()})),{componentId:i,supportCSSSticky:u,stickyStatus:h,stickyContainerRect:_,stickyDistance:f}})(t),{ns:w,stickyStyle:k,stickyContentStyle:j}=((e,t,a,l,s)=>({ns:D("sticky"),stickyStyle:o((()=>{const o={};return e.zIndex&&(o.zIndex=e.zIndex),e.enabled?t.value?(o.position="sticky",o.top=`${a.value}px`):o.height=l.value?E(s.value.height,"px"):"auto":o.position="static",o})),stickyContentStyle:o((()=>{const e={};return t.value||(e.position=l.value?"fixed":"static",e.top=`${a.value}px`,e.left=`${s.value.left}px`,e.width=E(s.value.width,"px")),a.value>0&&(e.top=`${a.value}px`),e}))}))(t,d,x,m,S);return(e,t)=>{const a=h;return i(),u(a,{id:_(l),class:p([_(w).b()]),style:f(_(k))},{default:r((()=>[g(a,{class:p([_(w).e("content")]),style:f(_(j))},{default:r((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["id","class","style"])}}}),[["__scopeId","data-v-20cca05e"]]);const se=N(t({__name:"tabs",props:{isScroll:{type:Boolean,default:!0},current:{default:0},height:{default:80},fontSize:{default:28},duration:{default:.3},activeColor:{default:"var(--color-primary)"},inactiveColor:{default:"#333"},barWidth:{default:40},barHeight:{default:4},gutter:{default:30},bgColor:{default:"#FFFFFF"},name:{default:"name"},count:{default:"count"},offset:{default:[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{default:{}},showBar:{type:Boolean,default:!0},barStyle:{default:{}},itemWidth:{default:"auto"},isFixed:{type:Boolean,default:!1},top:{default:0},stickyBgColor:{default:"#FFFFFF"},swipeable:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const l=e,{touch:m,resetTouchStatus:b,touchStart:B,touchMove:R}=function(){const e=x({direction:"",deltaX:0,deltaY:0,offsetX:0,offsetY:0}),t=()=>{e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0};return{touch:e,resetTouchStatus:t,touchStart:a=>{t();const l=a.touches[0];e.startX=l.clientX,e.startY=l.clientY},touchMove:t=>{const a=t.touches[0];var l,s;e.deltaX=a.clientX-e.startX,e.deltaY=a.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY),e.direction=e.direction||((l=e.offsetX)>(s=e.offsetY)&&l>10?"horizontal":s>l&&s>10?"vertical":"")}}}(),W=a([]),M=a([]),N=a(0),V=a([]),H=a(0),D=a(0),E=a(0),U=a("cu-tab"),Z=a(l.current),A=a(!0),K=a(!1),L=v();n((()=>W.value),(async(e,t)=>{A.value||e.length===t.length||(Z.value=0),await y(),J()})),n((()=>l.current),((e,t)=>{y((()=>{Z.value=e,ee()}))}),{immediate:!0});const Q=o((()=>{const e={width:l.barWidth+"rpx",transform:`translate(${D.value}px, -100%)`,"transition-duration":`${A.value?0:l.duration}s`,"background-color":l.activeColor,height:l.barHeight+"rpx",opacity:A.value?0:1,"border-radius":l.barHeight/2+"px"};return Object.assign(e,l.barStyle),e})),q=o((()=>e=>{let t={height:l.height+"rpx","line-height":l.height+"rpx","font-size":l.fontSize+"rpx",padding:l.isScroll?`0 ${l.gutter}rpx`:"",flex:l.isScroll?"auto":"1",width:`${l.itemWidth}rpx`};return e==Z.value&&l.bold&&(t.fontWeight="bold"),e==Z.value?(t.color=l.activeColor,t=Object.assign(t,l.activeItemStyle)):t.color=l.inactiveColor,t})),G=()=>{W.value=M.value.map((e=>{const{name:t,dot:a,active:l,inited:s}=e.event,{updateRender:o}=e;return{name:t,dot:a,active:l,inited:s,updateRender:o}}))},J=async()=>{const e=await I("#"+U.value,!1,L);E.value=e.left,H.value=e.width,P()},P=()=>{const e=F().in(L);for(let t=0;t<W.value.length;t++)e.select(`#tab-item-${t}`).fields({size:!0,rect:!0});e.exec((e=>{V.value=e,ee()}))},ee=()=>{const e=V.value[Z.value];if(!e)return;const t=e.width,a=e.left-E.value-(H.value-t)/2;N.value=a<0?0:a;const s=e.left+e.width/2-E.value;D.value=s-X(l.barWidth)/2,1==A.value&&setTimeout((()=>{A.value=!1}),100),M.value.forEach(((e,t)=>{const a=t===Z.value;a===e.event.active&&e.event.inited||e.updateRender(a)}))},te=e=>{l.swipeable&&(K.value=!0,B(e))},ae=e=>{l.swipeable&&K.value&&R(e)},se=()=>{if(!l.swipeable||!K.value)return;if("horizontal"===m.direction&&m.offsetX>=50){let e,a=W.value.length,l=Z.value;e=m.deltaX<=0?l>=a-1?0:l+1:l<=0?a-1:l-1,y((()=>{Z.value=e,ee()})),t("change",e)}K.value=!1};return s((()=>{G()})),S("handleChange",((e,t)=>{M.value.push({event:e,updateRender:t})})),S("updateTabs",G),(a,l)=>{const s=w(k("tn-badge"),O),o=h,n=Y,v=w(k("tn-sticky"),le);return i(),u(o,{class:"tabs"},{default:r((()=>[g(v,{enable:e.isFixed,"bg-color":e.stickyBgColor,"offset-top":e.top,"h5-nav-height":0},{default:r((()=>[g(o,{id:U.value,style:f({background:e.bgColor})},{default:r((()=>[g(n,{style:f({height:e.height+"rpx"}),"scroll-x":"",class:"scroll-view","scroll-left":N.value,"scroll-with-animation":""},{default:r((()=>[g(o,{class:p(["scroll-box",{"tabs-scorll-flex":!e.isScroll}])},{default:r((()=>[(i(!0),j(C,null,$(W.value,((a,l)=>(i(),u(o,{class:"tab-item line1",id:"tab-item-"+l,key:l,onClick:e=>(e=>{e!=Z.value&&(y((()=>{Z.value=e,ee()})),t("change",e))})(l),style:f([_(q)(l)])},{default:r((()=>[g(s,{count:a[e.count]||a.dot||0,offset:e.offset,size:"sm"},null,8,["count","offset"]),z(" "+T(a[e.name]||a.name),1)])),_:2},1032,["id","onClick","style"])))),128)),e.showBar?(i(),u(o,{key:0,class:"tab-bar",style:f([_(Q)])},null,8,["style"])):d("v-if",!0)])),_:1},8,["class"])])),_:1},8,["style","scroll-left"])])),_:1},8,["id","style"])])),_:1},8,["enable","bg-color","offset-top"]),g(o,{class:"tab-content",onTouchstart:te,onTouchmove:ae,onTouchcancel:se,onTouchend:se},{default:r((()=>[d(' <view class="tab-track" :class="{\'tab-animated\': animated}" :style="[trackStyle]"> '),g(o,null,{default:r((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3}),d(" </view> ")])),_:3})])),_:3})}}}),[["__scopeId","data-v-a34a58ae"]]),oe=t({__name:"news-list",props:{cid:{default:0},i:null,index:null},setup(e){const t=e,l=B(null),s=a([]),o=a(!0);n((()=>t.index),(async()=>{var e;await y(),t.i==t.index&&o.value&&(o.value=!1,null==(e=l.value)||e.reload())}),{immediate:!0});const c=async(e,a)=>{try{const{lists:s}=await J({cid:t.cid,page_no:e,page_size:a});l.value.complete(s)}catch(s){console.log("报错=>",s),l.value.complete(!1)}};return(t,a)=>{const o=w(k("news-card"),q),n=w(k("z-paging"),G);return i(),u(n,{"auto-show-back-to-top":"",auto:e.i==e.index,ref_key:"paging",ref:l,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),"data-key":e.i,onQuery:c,fixed:!1,height:"100%"},{default:r((()=>[(i(!0),j(C,null,$(s.value,((e,t)=>(i(),u(o,{key:t,item:e,newsId:e.id},null,8,["item","newsId"])))),128))])),_:1},8,["auto","modelValue","data-key"])}}}),ne=N(t({__name:"news",setup(t){const l=a([]),s=a(0),o=e=>{console.log(e),s.value=Number(e)};return R((e=>{(async()=>{const e=await P();l.value=[{name:"全部",id:""}].concat(e)})()})),(t,a)=>{const n=w(k("page-meta"),e),c=w(k("tn-search-box"),M),p=W,f=h,v=w(k("tab"),ee),m=w(k("tabs"),se),y=w(k("tabbar"),Q);return i(),j(C,null,[g(n,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),g(f,{class:"news"},{default:r((()=>[d(" 搜索 "),g(p,{class:"news-search px-[24rpx] py-[14rpx] bg-white",url:"/pages/search/search"},{default:r((()=>[g(c,{placeholder:"请输入关键词搜索",disabled:!0})])),_:1}),d(" 内容 "),g(m,{current:s.value,onChange:o,height:"80","bar-width":"60",barStyle:{bottom:"0"}},{default:r((()=>[(i(!0),j(C,null,$(l.value,((e,t)=>(i(),u(v,{key:t,name:e.name},{default:r((()=>[g(f,{class:"news-list pt-[20rpx]"},{default:r((()=>[g(oe,{cid:e.id,i:t,index:s.value},null,8,["cid","i","index"])])),_:2},1024)])),_:2},1032,["name"])))),128))])),_:1},8,["current"]),g(y)])),_:1})],64)}}}),[["__scopeId","data-v-24bea59a"]]);export{ne as default};
