import{d as s,u as a,s as e,M as l,c as o,O as t,o as r,h as u,e as d,f as i,w as p,g as c,n,j as m,t as f,b as _,F as y,af as w,aC as b,ag as g,aD as j,aq as h,r as v,a as x,m as C,l as k}from"./index-e3492752.js";import{_ as $}from"./page-meta.a4be6114.js";import{_ as V}from"./icon.e613abcd.js";import{_ as F}from"./input.1776ceae.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";import"./is-number.7ef6fec2.js";import"./_objectToString.c905654b.js";import"./event.5568c9d8.js";import"./index.23c2867d.js";import"./install.8446dea8.js";import"./is-empty.c0d66e4a.js";import"./is-boolean.00bf65dc.js";import"./index.89b6df5d.js";import"./index.04c93aab.js";import"./debounce.096fb07a.js";import"./clone-deep.2124c060.js";const S=z(s({__name:"change_password",setup(s){const z=a(),S=e(""),U=l({password:"",password_confirm:""}),D=o((()=>({fontSize:"30rpx",color:"#333333"}))),I=async()=>{if("set"==S.value||U.old_password?U.password?U.password.length<6||U.password.length>20?(uni.$u.toast("密码长度应为6-20位"),0):U.password_confirm?U.password==U.password_confirm||(uni.$u.toast("两次输入的密码不一致"),0):(uni.$u.toast("请输入确认密码"),0):(uni.$u.toast("请输入新密码"),0):(uni.$u.toast("请输入原密码"),0))try{w({title:"处理中...",mask:!0}),await b(U),g(),j({title:"操作成功",icon:"success",duration:1500}),setTimeout((()=>{h()}),1500)}catch(s){g(),uni.$u.toast(s||"操作失败")}};return t((s=>{S.value=s.type||""})),(s,a)=>{const e=v(x("page-meta"),$),l=v(x("tn-icon"),V),o=C,t=k,w=v(x("tn-input"),F);return r(),u(y,null,[d(e,{"page-style":i(z).pageStyle},null,8,["page-style"]),d(o,{class:"change-password-page"},{default:p((()=>[c(" 顶部图标区域 "),d(o,{class:"header-section"},{default:p((()=>[d(o,{class:"icon-wrapper",style:n({background:`linear-gradient(135deg, ${z.primaryColor} 0%, ${z.primaryColor} 100%)`})},{default:p((()=>[d(l,{name:"lock",size:64,color:"#FFFFFF"})])),_:1},8,["style"]),d(o,{class:"header-title"},{default:p((()=>[m(f("set"==S.value?"设置登录密码":"修改登录密码"),1)])),_:1}),d(o,{class:"header-subtitle"},{default:p((()=>[m(f("set"==S.value?"为了您的账号安全，请设置登录密码":"请输入原密码和新密码"),1)])),_:1})])),_:1}),c(" 表单卡片 "),d(o,{class:"form-card"},{default:p((()=>[c(" 原密码 "),"set"!=S.value?(r(),_(o,{key:0,class:"form-item"},{default:p((()=>[d(o,{class:"form-label"},{default:p((()=>[d(l,{name:"lock",size:28,color:i(z).primaryColor},null,8,["color"]),d(t,{class:"label-text"},{default:p((()=>[m("原密码")])),_:1})])),_:1}),d(o,{class:"input-wrapper"},{default:p((()=>[d(w,{modelValue:U.old_password,"onUpdate:modelValue":a[0]||(a[0]=s=>U.old_password=s),type:"password",placeholder:"请输入原来的密码",border:!1,"custom-style":i(D)},null,8,["modelValue","custom-style"])])),_:1})])),_:1})):c("v-if",!0),c(" 新密码 "),d(o,{class:"form-item"},{default:p((()=>[d(o,{class:"form-label"},{default:p((()=>[d(l,{name:"key",size:28,color:i(z).primaryColor},null,8,["color"]),d(t,{class:"label-text"},{default:p((()=>[m("新密码")])),_:1})])),_:1}),d(o,{class:"input-wrapper"},{default:p((()=>[d(w,{modelValue:U.password,"onUpdate:modelValue":a[1]||(a[1]=s=>U.password=s),type:"password",placeholder:"6-20位数字+字母或符号组合",border:!1,"custom-style":i(D)},null,8,["modelValue","custom-style"])])),_:1})])),_:1}),c(" 确认密码 "),d(o,{class:"form-item"},{default:p((()=>[d(o,{class:"form-label"},{default:p((()=>[d(l,{name:"check-circle",size:28,color:i(z).primaryColor},null,8,["color"]),d(t,{class:"label-text"},{default:p((()=>[m("确认密码")])),_:1})])),_:1}),d(o,{class:"input-wrapper"},{default:p((()=>[d(w,{modelValue:U.password_confirm,"onUpdate:modelValue":a[2]||(a[2]=s=>U.password_confirm=s),type:"password",placeholder:"再次输入新密码",border:!1,"custom-style":i(D)},null,8,["modelValue","custom-style"])])),_:1})])),_:1})])),_:1}),c(" 确认按钮 "),d(o,{class:"submit-section"},{default:p((()=>[d(o,{class:"submit-btn",style:n({background:`linear-gradient(135deg, ${i(z).primaryColor} 0%, ${i(z).primaryColor} 100%)`,color:i(z).btnColor}),"hover-class":"submit-btn-hover",onClick:I},{default:p((()=>[d(l,{name:"check",size:32,color:i(z).btnColor},null,8,["color"]),d(t,{class:"submit-text"},{default:p((()=>[m("确认"+f("set"==S.value?"设置":"修改"),1)])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-648f8f64"]]);export{S as default};
