import{d as a,$ as l,s,O as e,o as t,b as c,w as u,e as o,y as i,j as d,h as f,i as r,F as n,m as _,l as m,r as v,a as p,t as k,g as b,k as g}from"./index-e3492752.js";import{_ as y}from"./icon.e613abcd.js";import{_ as j}from"./z-paging.18d58ff3.js";import{k as x}from"./aftersale.1766d410.js";import{_ as h}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";const z=h(a({__name:"callback",setup(a){const h=l(),z=s([]),C=s(""),w=a=>{var l;C.value=a,null==(l=h.value)||l.reload()},F=async(a,l)=>{var s,e,t;try{const t={page:a,limit:l};""!==C.value&&(t.status=C.value);const c=await x(t),u=(null==(s=null==c?void 0:c.data)?void 0:s.lists)||(null==c?void 0:c.lists)||[];null==(e=h.value)||e.complete(u)}catch(c){null==(t=h.value)||t.complete(!1)}};return e((a=>{(null==a?void 0:a.status)&&(C.value=parseInt(a.status))})),(a,l)=>{const s=_,e=m,x=v(p("tn-icon"),y),V=v(p("z-paging"),j);return t(),c(s,{class:"callback-page"},{default:u((()=>[o(V,{ref_key:"paging",ref:h,modelValue:z.value,"onUpdate:modelValue":l[3]||(l[3]=a=>z.value=a),onQuery:F},{top:u((()=>[o(s,{class:"filter-tabs"},{default:u((()=>[o(s,{class:i(["tab-item",{active:""===C.value}]),onClick:l[0]||(l[0]=a=>w(""))},{default:u((()=>[d("全部")])),_:1},8,["class"]),o(s,{class:i(["tab-item",{active:0===C.value}]),onClick:l[1]||(l[1]=a=>w(0))},{default:u((()=>[d("待填写")])),_:1},8,["class"]),o(s,{class:i(["tab-item",{active:1===C.value}]),onClick:l[2]||(l[2]=a=>w(1))},{default:u((()=>[d("已完成")])),_:1},8,["class"])])),_:1})])),empty:u((()=>[o(s,{class:"empty-state"},{default:u((()=>[o(x,{name:"edit",size:"120",color:"#ccc"}),o(e,{class:"empty-text"},{default:u((()=>[d("暂无回访问卷")])),_:1})])),_:1})])),default:u((()=>[o(s,{class:"callback-list"},{default:u((()=>[(t(!0),f(n,null,r(z.value,(a=>(t(),c(s,{class:"callback-item",key:a.id,onClick:l=>(a=>{0===a.status?g({url:`/pages/aftersale/callback_fill?id=${a.id}`}):g({url:`/pages/aftersale/callback_detail?id=${a.id}`})})(a)},{default:u((()=>[o(s,{class:"callback-header"},{default:u((()=>{return[o(s,{class:"callback-order"},{default:u((()=>[o(e,{class:"order-label"},{default:u((()=>[d("订单编号：")])),_:1}),o(e,{class:"order-sn"},{default:u((()=>[d(k(a.order_sn),1)])),_:2},1024)])),_:2},1024),o(s,{class:i(["callback-status",(l=a.status,0===l?"status-pending":"status-completed")])},{default:u((()=>[d(k(0===a.status?"待填写":"已完成"),1)])),_:2},1032,["class"])];var l})),_:2},1024),o(s,{class:"callback-info"},{default:u((()=>[o(s,{class:"info-row"},{default:u((()=>[o(e,{class:"info-label"},{default:u((()=>[d("服务日期：")])),_:1}),o(e,{class:"info-value"},{default:u((()=>[d(k(a.service_date),1)])),_:2},1024)])),_:2},1024),a.staff_name?(t(),c(s,{key:0,class:"info-row"},{default:u((()=>[o(e,{class:"info-label"},{default:u((()=>[d("服务人员：")])),_:1}),o(e,{class:"info-value"},{default:u((()=>[d(k(a.staff_name),1)])),_:2},1024)])),_:2},1024)):b("v-if",!0)])),_:2},1024),o(s,{class:"callback-footer"},{default:u((()=>[o(e,{class:"callback-time"},{default:u((()=>[d(k(a.create_time),1)])),_:2},1024),0===a.status?(t(),c(s,{key:0,class:"callback-action"},{default:u((()=>[o(e,null,{default:u((()=>[d("立即填写")])),_:1}),o(x,{name:"right",size:"24",color:"#4facfe"})])),_:1})):a.score?(t(),c(s,{key:1,class:"callback-score"},{default:u((()=>[o(x,{name:"star-fill",size:"28",color:"#FFB800"}),o(e,null,{default:u((()=>[d(k(a.score)+"分",1)])),_:2},1024)])),_:2},1024)):b("v-if",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-82cf8861"]]);export{z as default};
