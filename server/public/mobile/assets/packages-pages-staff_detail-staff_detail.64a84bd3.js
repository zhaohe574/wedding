import{d as e,u as a,s as l,c as t,v as s,o as n,b as r,w as c,g as i,e as o,f as u,h as d,i as f,F as _,j as v,t as g,n as m,y as p,G as y,m as b,r as k,a as h,B as C,l as w,J as x,a$ as F,S as $,O as L,aM as z,aN as j,aD as I,a1 as O,k as D,I as P}from"./index-e3492752.js";import{_ as A}from"./navigation-bar.2687311c.js";import{_ as B}from"./page-meta.a4be6114.js";import{_ as N}from"./icon.e613abcd.js";import{_ as S}from"./loading.2b80eb94.js";import{b as T,t as V,c as E}from"./staff.2454008a.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";import"./index.89b6df5d.js";const J=G(e({__name:"staff-banner",props:{bannerList:{default:()=>[]},config:{default:()=>({banner_mode:1,banner_small_height:400,banner_large_height:600,banner_indicator_style:1,banner_autoplay:1,banner_interval:3e3})},defaultImage:{default:""}},emits:["update:expanded"],setup(e,{emit:L}){const z=e,j=a(),I=l(!1),O=l(0),D=l(!1),P=t((()=>{const e=z.config.banner_mode,a=z.config.banner_small_height||400;let l=z.config.banner_large_height||600;return 1!==e||I.value||(l=a),{height:`${l}rpx`}})),A=t((()=>1===z.config.banner_indicator_style&&z.bannerList.length>1)),B=t((()=>"rgba(255, 255, 255, 0.5)")),S=t((()=>j.primaryColor)),T=t((()=>0===z.bannerList.length?"0%":(O.value+1)/z.bannerList.length*100+"%")),V=()=>{I.value=!I.value,L("update:expanded",I.value)},E=e=>{O.value=e.detail.current},G=e=>{if(1!==z.config.banner_mode||I.value){if(1===z.bannerList[e].type){const a=z.bannerList.filter((e=>1===e.type)).map((e=>e.file_url)),l=a.indexOf(z.bannerList[e].file_url);x({urls:a,current:l>=0?l:0})}}else I.value=!0,L("update:expanded",I.value)};s((()=>z.bannerList),(()=>{O.value=0,I.value=!1}),{deep:!0});const J=()=>{D.value=!0},M=()=>{D.value=!1},R=()=>{D.value=!1};return(a,l)=>{const t=y,s=b,x=F,L=k(h("tn-icon"),N),z=$,j=C,U=w;return n(),r(s,{class:"staff-banner-wrapper"},{default:c((()=>[i(" 轮播图容器 "),o(s,{class:p(["banner-container",{"is-expanded":I.value}]),style:m(u(P))},{default:c((()=>[e.bannerList.length?(n(),r(j,{key:0,class:"banner-swiper","indicator-dots":u(A),"indicator-color":u(B),"indicator-active-color":u(S),autoplay:1===e.config.banner_autoplay&&!D.value,interval:e.config.banner_interval||3e3,circular:!0,current:O.value,onChange:E},{default:c((()=>[(n(!0),d(_,null,f(e.bannerList,((e,a)=>(n(),r(z,{key:e.id},{default:c((()=>[i(" 图片 "),1===e.type?(n(),r(s,{key:0,class:"media-container"},{default:c((()=>[o(t,{src:e.file_url,mode:"aspectFill",class:"banner-media",onClick:e=>G(a),"lazy-load":""},null,8,["src","onClick"])])),_:2},1024)):(n(),d(_,{key:1},[i(" 视频 "),o(s,{class:"media-container video-wrapper",onClick:e=>G(a)},{default:c((()=>[O.value===a?(n(),r(x,{key:0,id:`video-${a}`,src:e.file_url,poster:e.cover_url,autoplay:1===e.is_autoplay,controls:!0,"show-center-play-btn":!0,"enable-progress-gesture":!0,class:"banner-video","object-fit":"cover",onPlay:J,onEnded:M,onPause:R},null,8,["id","src","poster","autoplay"])):(n(),r(t,{key:1,src:e.cover_url,mode:"aspectFill",class:"banner-media"},null,8,["src"])),i(" 播放按钮遮罩 "),O.value!==a||1!==e.is_autoplay?(n(),r(s,{key:2,class:"play-overlay"},{default:c((()=>[o(s,{class:"play-icon"},{default:c((()=>[o(L,{name:"play-circle-fill",size:"80",color:"rgba(255, 255, 255, 0.9)"})])),_:1})])),_:1})):i("v-if",!0)])),_:2},1032,["onClick"])],2112))])),_:2},1024)))),128))])),_:1},8,["indicator-dots","indicator-color","indicator-active-color","autoplay","interval","current"])):e.defaultImage?(n(),d(_,{key:1},[i(" 默认图片（无轮播图时） "),o(t,{src:e.defaultImage,mode:"aspectFill",class:"banner-media default-image"},null,8,["src"])],2112)):i("v-if",!0),i(" 自定义指示器 "),e.bannerList.length>1&&2===e.config.banner_indicator_style?(n(),r(s,{key:2,class:"custom-indicator"},{default:c((()=>[o(U,{class:"indicator-text"},{default:c((()=>[v(g(O.value+1)+"/"+g(e.bannerList.length),1)])),_:1})])),_:1})):i("v-if",!0),i(" 进度条指示器 "),e.bannerList.length>1&&3===e.config.banner_indicator_style?(n(),r(s,{key:3,class:"progress-indicator"},{default:c((()=>[o(s,{class:"progress-bar",style:m({width:u(T)})},null,8,["style"])])),_:1})):i("v-if",!0),i(" 小图模式：底部渐变遮罩 + 展开提示 "),1===e.config.banner_mode&&!I.value&&e.bannerList.length?(n(),r(s,{key:4,class:"bottom-gradient",onClick:V},{default:c((()=>[o(s,{class:"expand-hint-inline"},{default:c((()=>[o(L,{name:"arrow-down",size:"28",color:"#FFFFFF"}),o(U,{class:"hint-text"},{default:c((()=>[v("点击查看完整图片")])),_:1})])),_:1})])),_:1})):i("v-if",!0),i(" 展开/收起按钮（小图模式已展开时） "),1===e.config.banner_mode&&I.value&&e.bannerList.length?(n(),r(s,{key:5,class:"collapse-btn",onClick:V},{default:c((()=>[o(L,{name:"up-arrow",size:"32",color:"#FFFFFF"})])),_:1})):i("v-if",!0)])),_:1},8,["class","style"])])),_:1})}}}),[["__scopeId","data-v-373a66fa"]]),M=G(e({__name:"staff_detail",setup(e){const a=l(0),t=l(null),u=l("intro"),C=l(!1),F=l(""),$=l([]),G=l({banner_mode:1,banner_small_height:400,banner_large_height:600,banner_indicator_style:1,banner_autoplay:1,banner_interval:3e3}),M=l([]),R=l(!1),U=l([]),q=l(!1),H=[{key:"intro",label:"简介"},{key:"works",label:"作品"},{key:"reviews",label:"评价"}];s(u,(e=>{"works"===e&&0===M.value.length?K():"reviews"===e&&0===U.value.length&&Q()}));const K=async()=>{if(!R.value){R.value=!0;try{const e=await E({staff_id:a.value});M.value=e||[]}catch(e){const a="string"==typeof e?e:e.msg||e.message||"加载作品失败";I({title:a,icon:"none"})}finally{R.value=!1}}},Q=async()=>{if(!q.value){q.value=!0;try{U.value=[]}catch(e){const a="string"==typeof e?e:e.msg||e.message||"加载评价失败";I({title:a,icon:"none"})}finally{q.value=!1}}},W=async()=>{if(!O().isLogin)return I({title:"请先登录",icon:"none"}),void setTimeout((()=>{D({url:"/pages/login/login"})}),1500);try{await V({id:a.value}),t.value.is_favorite=!t.value.is_favorite,I({title:t.value.is_favorite?"收藏成功":"已取消收藏",icon:"success"})}catch(e){const a="string"==typeof e?e:e.msg||e.message||"操作失败";I({title:a,icon:"none"})}},X=()=>{D({url:"/pages/customer_service/customer_service"})},Y=()=>{if(!a.value||0===a.value)return void I({title:"服务人员信息错误",icon:"none"});let e=`/packages/pages/schedule_calendar/schedule_calendar?staff_id=${a.value}`;F.value&&(e+=`&date=${F.value}`),D({url:e})};return L((e=>{(null==e?void 0:e.id)&&(a.value=Number(e.id),(async()=>{try{const e=await T({id:a.value});t.value=e,void 0!==e.banner_mode&&(G.value={banner_mode:e.banner_mode||1,banner_small_height:e.banner_small_height||400,banner_large_height:e.banner_large_height||600,banner_indicator_style:void 0!==e.banner_indicator_style?e.banner_indicator_style:1,banner_autoplay:void 0!==e.banner_autoplay?e.banner_autoplay:1,banner_interval:e.banner_interval||3e3}),e.banners&&Array.isArray(e.banners)&&($.value=e.banners)}catch(e){const a="string"==typeof e?e:e.msg||e.message||"获取详情失败";I({title:a,icon:"none"})}})()),(null==e?void 0:e.date)&&(F.value=e.date)})),(e,a)=>{const l=k(h("navigation-bar"),A),s=k(h("page-meta"),B),F=y,L=w,I=k(h("tn-icon"),N),O=b,D=k(h("tn-loading"),S),T=P;return n(),d(_,null,[o(s,{"page-style":e.$theme.pageStyle},{default:c((()=>[o(l,{title:"服务人员详情","front-color":e.$theme.navColor,"background-color":e.$theme.navBgColor},null,8,["front-color","background-color"])])),_:1},8,["page-style"]),t.value?(n(),r(O,{key:0,class:"staff-detail"},{default:c((()=>[i(" 头图轮播 "),o(J,{"banner-list":$.value,config:G.value,"default-image":t.value.avatar||"/static/images/default-avatar.png","onUpdate:expanded":a[0]||(a[0]=e=>C.value=e)},null,8,["banner-list","config","default-image"]),i(" 人员信息卡片 "),o(O,{class:p(["info-card",{"card-overlap":1===G.value.banner_mode&&!C.value}])},{default:c((()=>[o(O,{class:"card-header"},{default:c((()=>[o(F,{class:"staff-avatar",src:t.value.avatar||"/static/images/default-avatar.png",mode:"aspectFill"},null,8,["src"]),o(O,{class:"header-info"},{default:c((()=>[o(O,{class:"name-row"},{default:c((()=>[o(L,{class:"staff-name"},{default:c((()=>[v(g(t.value.name),1)])),_:1}),i(" 认证标识 "),t.value.is_verified?(n(),r(O,{key:0,class:"verified-badge"},{default:c((()=>[o(I,{name:"check-circle-fill",size:"32",color:e.$theme.primaryColor},null,8,["color"])])),_:1})):i("v-if",!0),i(" VIP标识 "),t.value.is_vip?(n(),r(O,{key:1,class:"vip-badge"},{default:c((()=>[o(I,{name:"vip-fill",size:"32",color:"#FFD700"})])),_:1})):i("v-if",!0),i(" 推荐标识 "),t.value.is_recommend?(n(),r(O,{key:2,class:"recommend-badge"},{default:c((()=>[o(L,null,{default:c((()=>[v("推荐")])),_:1})])),_:1})):i("v-if",!0)])),_:1}),o(O,{class:"category-row"},{default:c((()=>[o(L,{class:"category-text"},{default:c((()=>{var e;return[v(g(null==(e=t.value.category)?void 0:e.name),1)]})),_:1}),t.value.experience_years?(n(),r(L,{key:0,class:"experience-text"},{default:c((()=>[v(g(t.value.experience_years)+"年经验 ",1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1}),i(" 评分统计 "),o(O,{class:"stats-row"},{default:c((()=>[o(O,{class:"stat-item"},{default:c((()=>[o(O,{class:"stat-value"},{default:c((()=>[o(I,{name:"star-fill",size:"32",color:e.$theme.accentColor},null,8,["color"]),o(L,{style:m({color:e.$theme.accentColor})},{default:c((()=>[v(g(t.value.rating),1)])),_:1},8,["style"])])),_:1}),o(L,{class:"stat-label"},{default:c((()=>[v("评分")])),_:1})])),_:1}),o(O,{class:"stat-divider"}),o(O,{class:"stat-item"},{default:c((()=>[o(L,{class:"stat-value"},{default:c((()=>[v(g(t.value.order_count),1)])),_:1}),o(L,{class:"stat-label"},{default:c((()=>[v("服务次数")])),_:1})])),_:1}),o(O,{class:"stat-divider"}),o(O,{class:"stat-item"},{default:c((()=>[o(L,{class:"stat-value"},{default:c((()=>[v(g(t.value.view_count||0),1)])),_:1}),o(L,{class:"stat-label"},{default:c((()=>[v("浏览量")])),_:1})])),_:1})])),_:1}),i(" 价格和收藏 "),o(O,{class:"price-row"},{default:c((()=>[o(O,{class:"price-wrapper"},{default:c((()=>[o(L,{class:"price-label"},{default:c((()=>[v("服务价格")])),_:1}),o(O,{class:"price-amount"},{default:c((()=>[o(L,{class:"price-symbol"},{default:c((()=>[v("¥")])),_:1}),o(L,{class:"price-value"},{default:c((()=>[v(g(t.value.price),1)])),_:1}),o(L,{class:"price-unit"},{default:c((()=>[v("/次起")])),_:1})])),_:1})])),_:1}),o(O,{class:"favorite-btn",onClick:W},{default:c((()=>[o(I,{name:t.value.is_favorite?"star-fill":"star",size:"48",color:t.value.is_favorite?e.$theme.secondaryColor:"#CCCCCC"},null,8,["name","color"])])),_:1})])),_:1})])),_:1},8,["class"]),i(" 标签页切换 "),o(O,{class:"tabs-section"},{default:c((()=>[o(O,{class:"tabs-wrapper"},{default:c((()=>[(n(),d(_,null,f(H,(a=>o(O,{key:a.key,class:p(["tab-item",{active:u.value===a.key}]),onClick:e=>u.value=a.key},{default:c((()=>[o(L,{class:"tab-text",style:m(u.value===a.key?{color:e.$theme.primaryColor}:{})},{default:c((()=>[v(g(a.label),1)])),_:2},1032,["style"]),u.value===a.key?(n(),r(O,{key:0,class:"tab-indicator",style:m({background:e.$theme.primaryColor})},null,8,["style"])):i("v-if",!0)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1}),i(" 标签页内容 "),o(O,{class:"tab-content"},{default:c((()=>[i(" 简介标签页 "),z(o(O,{class:"content-section"},{default:c((()=>[i(" 擅长风格 "),t.value.tags&&t.value.tags.length?(n(),r(O,{key:0,class:"content-block"},{default:c((()=>[o(O,{class:"block-title"},{default:c((()=>[v("擅长风格")])),_:1}),o(O,{class:"tags-wrapper"},{default:c((()=>[(n(!0),d(_,null,f(t.value.tags,((e,a)=>(n(),r(O,{key:a,class:"tag-item"},{default:c((()=>[o(L,{class:"tag-text"},{default:c((()=>[v(g(e),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):i("v-if",!0),i(" 个人简介 "),o(O,{class:"content-block"},{default:c((()=>[o(O,{class:"block-title"},{default:c((()=>[v("个人简介")])),_:1}),o(L,{class:"block-content"},{default:c((()=>[v(g(t.value.profile||"暂无简介"),1)])),_:1})])),_:1}),i(" 服务说明 "),t.value.service_desc?(n(),r(O,{key:1,class:"content-block"},{default:c((()=>[o(O,{class:"block-title"},{default:c((()=>[v("服务说明")])),_:1}),o(L,{class:"block-content"},{default:c((()=>[v(g(t.value.service_desc),1)])),_:1})])),_:1})):i("v-if",!0),i(" 服务套餐 "),t.value.packages&&t.value.packages.length?(n(),r(O,{key:2,class:"content-block"},{default:c((()=>[o(O,{class:"block-title"},{default:c((()=>[v("服务套餐")])),_:1}),o(O,{class:"packages-list"},{default:c((()=>[(n(!0),d(_,null,f(t.value.packages,(e=>(n(),r(O,{key:e.package_id,class:"package-item"},{default:c((()=>[o(O,{class:"package-info"},{default:c((()=>[o(L,{class:"package-name"},{default:c((()=>{var a;return[v(g(null==(a=e.package)?void 0:a.name),1)]})),_:2},1024)])),_:2},1024),o(O,{class:"package-price-group"},{default:c((()=>{var a;return[e.original_price||(null==(a=e.package)?void 0:a.original_price)?(n(),r(L,{key:0,class:"package-original-price"},{default:c((()=>{var a;return[v(" ¥"+g(e.original_price||(null==(a=e.package)?void 0:a.original_price)),1)]})),_:2},1024)):i("v-if",!0),o(L,{class:"package-price"},{default:c((()=>{var a;return[v("¥"+g(e.custom_price||e.price||(null==(a=e.package)?void 0:a.price)),1)]})),_:2},1024)]})),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):i("v-if",!0)])),_:1},512),[[j,"intro"===u.value]]),i(" 作品标签页 "),z(o(O,{class:"content-section"},{default:c((()=>[i(" 加载状态 "),R.value?(n(),r(O,{key:0,class:"loading-state"},{default:c((()=>[o(D,{mode:"circle"})])),_:1})):M.value.length?(n(),d(_,{key:1},[i(" 作品列表 "),o(O,{class:"works-grid"},{default:c((()=>[(n(!0),d(_,null,f(M.value,(e=>(n(),r(O,{key:e.id,class:"work-item",onClick:a=>(e=>{const a=e.images||[e.cover];x({urls:a,current:a[0]})})(e)},{default:c((()=>{var a;return[o(F,{src:e.cover||(null==(a=e.images)?void 0:a[0]),mode:"aspectFill",class:"work-image","lazy-load":""},null,8,["src"]),o(O,{class:"work-overlay"},{default:c((()=>[o(L,{class:"work-title"},{default:c((()=>[v(g(e.title),1)])),_:2},1024)])),_:2},1024)]})),_:2},1032,["onClick"])))),128))])),_:1})],2112)):(n(),d(_,{key:2},[i(" 空状态 "),o(O,{class:"empty-state"},{default:c((()=>[o(I,{name:"image",size:"120",color:"#CCCCCC"}),o(L,{class:"empty-text"},{default:c((()=>[v("暂无作品")])),_:1})])),_:1})],2112))])),_:1},512),[[j,"works"===u.value]]),i(" 评价标签页 "),z(o(O,{class:"content-section"},{default:c((()=>[i(" 资质证书 "),t.value.certificates&&t.value.certificates.length?(n(),r(O,{key:0,class:"content-block"},{default:c((()=>[o(O,{class:"block-title"},{default:c((()=>[v("资质证书")])),_:1}),o(T,{"scroll-x":"",class:"certs-scroll"},{default:c((()=>[o(O,{class:"certs-wrapper"},{default:c((()=>[(n(!0),d(_,null,f(t.value.certificates,(e=>(n(),r(O,{key:e.id,class:"cert-item",onClick:a=>{return l=e.image,void x({urls:[l]});var l}},{default:c((()=>[o(F,{src:e.image,mode:"aspectFill",class:"cert-image"},null,8,["src"]),o(L,{class:"cert-name"},{default:c((()=>[v(g(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})):i("v-if",!0),i(" 加载状态 "),q.value?(n(),r(O,{key:1,class:"loading-state"},{default:c((()=>[o(D,{mode:"circle"})])),_:1})):U.value.length?(n(),d(_,{key:2},[i(" 用户评价列表（预留） "),o(O,{class:"reviews-list"},{default:c((()=>[i(" TODO: 评价列表组件 ")])),_:1})],2112)):(n(),d(_,{key:3},[i(" 空状态 "),o(O,{class:"empty-state"},{default:c((()=>[o(I,{name:"chat",size:"120",color:"#CCCCCC"}),o(L,{class:"empty-text"},{default:c((()=>[v("暂无评价")])),_:1})])),_:1})],2112))])),_:1},512),[[j,"reviews"===u.value]])])),_:1}),i(" 底部占位 "),o(O,{class:"bottom-placeholder"}),i(" 底部操作栏 "),o(O,{class:"bottom-bar"},{default:c((()=>[o(O,{class:"action-btns"},{default:c((()=>[o(O,{class:"action-item",onClick:X},{default:c((()=>[o(I,{name:"chat",size:"48",color:"#666666"}),o(L,{class:"action-text"},{default:c((()=>[v("咨询")])),_:1})])),_:1}),o(O,{class:"action-item",onClick:W},{default:c((()=>[o(I,{name:t.value.is_favorite?"star-fill":"star",size:"48",color:t.value.is_favorite?e.$theme.secondaryColor:"#666666"},null,8,["name","color"]),o(L,{class:"action-text"},{default:c((()=>[v(g(t.value.is_favorite?"已收藏":"收藏"),1)])),_:1})])),_:1})])),_:1}),o(O,{class:"book-btn",style:m({background:`linear-gradient(135deg, ${e.$theme.primaryColor} 0%, ${e.$theme.primaryColor} 100%)`}),onClick:Y},{default:c((()=>[o(I,{name:"calendar",size:"32",color:"#FFFFFF"}),o(L,{class:"book-text"},{default:c((()=>[v("立即预约")])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})):(n(),d(_,{key:1},[i(" 加载状态 "),o(O,{class:"loading-container"},{default:c((()=>[o(D,{mode:"circle"})])),_:1})],2112))],64)}}}),[["__scopeId","data-v-b8625209"]]);export{M as default};
