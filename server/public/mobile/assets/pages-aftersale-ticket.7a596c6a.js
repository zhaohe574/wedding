import{d as t,$ as a,s as e,O as s,o as l,b as c,w as i,e as u,y as o,j as n,h as d,i as r,F as f,g as _,k as p,m,l as v,r as k,a as g,t as y}from"./index-e3492752.js";import{_ as x}from"./icon.e613abcd.js";import{_ as b}from"./z-paging.18d58ff3.js";import{a as j}from"./aftersale.1766d410.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import"./index.f1be293a.js";const h=C(t({__name:"ticket",setup(t){const C=a(),h=e([]),z=e(""),V=t=>{var a;z.value=t,null==(a=C.value)||a.reload()},w=async(t,a)=>{var e,s,l;try{const l={page:t,limit:a};""!==z.value&&(l.status=z.value);const c=await j(l),i=(null==(e=null==c?void 0:c.data)?void 0:e.lists)||(null==c?void 0:c.lists)||[];null==(s=C.value)||s.complete(i)}catch(c){null==(l=C.value)||l.complete(!1)}},I=t=>({0:"待处理",1:"处理中",2:"已完成",3:"已关闭"}[t]||"未知"),$=()=>{p({url:"/pages/aftersale/index?action=create_ticket"})};return s((t=>{(null==t?void 0:t.status)&&(z.value=parseInt(t.status))})),(t,a)=>{const e=m,s=v,j=k(g("tn-icon"),x),F=k(g("z-paging"),b);return l(),c(e,{class:"ticket-page"},{default:i((()=>[u(F,{ref_key:"paging",ref:C,modelValue:h.value,"onUpdate:modelValue":a[4]||(a[4]=t=>h.value=t),onQuery:w},{top:i((()=>[u(e,{class:"filter-tabs"},{default:i((()=>[u(e,{class:o(["tab-item",{active:""===z.value}]),onClick:a[0]||(a[0]=t=>V(""))},{default:i((()=>[n("全部")])),_:1},8,["class"]),u(e,{class:o(["tab-item",{active:0===z.value}]),onClick:a[1]||(a[1]=t=>V(0))},{default:i((()=>[n("待处理")])),_:1},8,["class"]),u(e,{class:o(["tab-item",{active:1===z.value}]),onClick:a[2]||(a[2]=t=>V(1))},{default:i((()=>[n("处理中")])),_:1},8,["class"]),u(e,{class:o(["tab-item",{active:2===z.value}]),onClick:a[3]||(a[3]=t=>V(2))},{default:i((()=>[n("已完成")])),_:1},8,["class"])])),_:1})])),empty:i((()=>[u(e,{class:"empty-state"},{default:i((()=>[u(j,{name:"file-text",size:"120",color:"#ccc"}),u(s,{class:"empty-text"},{default:i((()=>[n("暂无工单记录")])),_:1})])),_:1})])),default:i((()=>[u(e,{class:"ticket-list"},{default:i((()=>[(l(!0),d(f,null,r(h.value,(t=>(l(),c(e,{class:"ticket-item",key:t.id,onClick:a=>{return e=t.id,void p({url:`/pages/aftersale/ticket_detail?id=${e}`});var e}},{default:i((()=>[u(e,{class:"ticket-header"},{default:i((()=>{return[u(s,{class:"ticket-sn"},{default:i((()=>[n(y(t.ticket_sn),1)])),_:2},1024),u(e,{class:o(["ticket-status",(a=t.status,{0:"status-pending",1:"status-processing",2:"status-completed",3:"status-closed"}[a]||"")])},{default:i((()=>[n(y(t.status_desc||I(t.status)),1)])),_:2},1032,["class"])];var a})),_:2},1024),u(e,{class:"ticket-title"},{default:i((()=>[n(y(t.title),1)])),_:2},1024),t.content?(l(),c(e,{key:0,class:"ticket-content"},{default:i((()=>[n(y(t.content),1)])),_:2},1024)):_("v-if",!0),u(e,{class:"ticket-footer"},{default:i((()=>[u(s,{class:"ticket-type"},{default:i((()=>{return[n(y(t.type_desc||(a=t.type,{1:"服务咨询",2:"订单问题",3:"技术问题",4:"投诉建议",5:"其他"}[a]||"其他")),1)];var a})),_:2},1024),u(s,{class:"ticket-time"},{default:i((()=>[n(y(t.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),_(" 创建工单按钮 "),u(e,{class:"create-btn",onClick:$},{default:i((()=>[u(j,{name:"plus",size:"40",color:"#fff"})])),_:1})])),_:1})}}}),[["__scopeId","data-v-aa41fdfa"]]);export{h as default};
