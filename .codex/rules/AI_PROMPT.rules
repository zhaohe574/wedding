# LikeAdmin PHP 项目规则（AI_PROMPT）

## 项目概览
- LikeAdmin PHP 是前后端分离的快速开发框架。
- 后端：ThinkPHP 8.0。
- 管理端：Vue 3 + Element Plus。
- 移动端：UniApp（支持微信小程序、H5、App）。
- PC 端：Nuxt 3（SSR）。

## 技术栈
- 后端：PHP >= 8.0、MySQL、Redis、topthink/framework、topthink/think-orm、topthink/think-multi-app、w7corp/easywechat。
- 管理端：Vue 3.5 + Vite、Element Plus 2.9、Tailwind CSS + SCSS、Pinia、Vue Router、Axios。
- 移动端：UniApp（Vue 3）、vk-uview-ui、Tailwind CSS + SCSS。
- PC 端：Nuxt 3.6、Element Plus、Tailwind CSS。

## 目录结构
- 根目录：server/、admin/、uniapp/、pc/、docker/。
- server/：app/（adminapi、api、common）、config/、public/、.env。
- admin/src/：api/、views/、components/、layout/、router/、stores/、utils/。
- uniapp/src/：pages/、api/、components/、uni_modules/、manifest.json、pages.json。

## 后端开发规范（ThinkPHP）
- 架构分层：Controller -> Logic -> Service -> Model，职责分离。
- 路由定义：app/adminapi/config/route.php、app/api/config/route.php。
- 统一响应结构：code、msg、data、show。
- 认证方式：AdminToken、UserToken。
- Admin API 控制器必须继承 app\adminapi\controller\BaseAdminController。
- 业务逻辑写在 Logic 类中，不放在 Controller。
- 配置获取：使用 ConfigService::get('group','name')。
- 文件地址：使用 FileService::getFileUrl($path)。
- 需要软删除时使用 SoftDelete trait。
- 命名规范：控制器 PascalCase，表名 snake_case。
- 返回格式：使用 BaseLikeAdminController 的 success($msg, $data) 或 fail($msg)。
- 中间件在 app/adminapi/config/route.php 中配置（InitMiddleware、LoginMiddleware、AuthMiddleware）。
- 验证规则：继承 app\adminapi\validate\BaseValidate，定义场景并支持自定义校验。
- 枚举：使用 app/common/enum 下的 Enum，禁止魔法数字。

## 管理端开发规范（Vue 3）
- 组件使用 Composition API，推荐 <script setup lang="ts">。
- 组件名 PascalCase，文件名 kebab-case。
- 接口定义放在 admin/src/api/，页面内通过 @/utils/request 的 request.get/post 调用。
- 状态管理使用 @/stores 中的 Pinia。
- 路由定义在 @/router。
- 全局组件：material-picker、editor、dict-value、daterange-picker、upload。
- 图标使用 src/assets/icons 或 Element Plus 图标。

## 移动端开发规范（UniApp）
- 请求封装使用 @/utils/request，按需传入 isAuth。
- UI 组件使用 vk-uview-ui。
- 平台差异通过 #ifdef / #endif 条件编译处理。
- 全局配置在 src/config/index.ts。

## 通用业务模式
- 配置读取：后端 ConfigService::get('website','name')；前端接口 /config/getConfig；管理端 useAppStore().config；UniApp appConfig。
- 图片/文件：后端 FileService::getFileUrl；管理端 <upload type="image" /> 或 <material-picker />；移动端 uni.uploadFile 或 uView 的 <u-upload>。
- 认证：管理端 useUserStore().token；移动端 getToken()。

## 环境与配置
- 后端：复制 .example.env 为 .env，配置数据库与 Redis。
- 前端：使用 .env.development、.env.production；核心变量 VITE_APP_BASE_URL。

## 部署与构建
- Nginx root 指向 server/public，启用 URL Rewrite，PHP-FPM 处理 PHP。
- 构建命令：管理端 npm run build（输出 server/public/admin），UniApp H5 npm run build:h5，PC 端 npm run build。

## 参考文档
- 官方文档：https://doc.likeadmin.cn/
- PHP 文档：https://doc.likeadmin.cn/php/
