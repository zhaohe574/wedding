# 实施计划: 优惠券列表Bug修复

## 概述

修复优惠券管理列表中的创建时间显示错误和编辑功能报错问题，通过添加类型检查和转换逻辑确保PHP 8环境下的类型一致性。

## 任务

- [x] 1. 修复CouponLists列表类中的时间字段处理
  - 在`lists()`方法中修复create_time的类型转换和格式化
  - 修复valid_start_time和valid_end_time的类型转换
  - 确保所有时间戳在格式化前都进行类型检查
  - _需求: 1.1, 1.2, 1.3, 1.4_

- [x] 2. 修复CouponLogic逻辑层中的详情方法
  - 在`detail()`方法中添加时间字段的类型转换
  - 修复valid_start_time_text和valid_end_time_text的生成逻辑
  - 确保所有数值字段都进行显式类型转换
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 3. 验证Coupon模型中的获取器
  - 检查`getValidPeriodAttr()`获取器的类型转换
  - 确保所有时间相关获取器都正确处理类型
  - _需求: 3.1, 3.2, 3.3_

- [ ] 4. 测试修复效果
  - 测试列表页面创建时间显示
  - 测试编辑功能是否正常工作
  - 测试各种边界情况（时间为0、字符串类型等）
  - _需求: 1.1, 2.1_

- [x] 5. 更新进展文档
  - 记录修复的问题和解决方案
  - 更新到doc目录
  - _需求: 所有_

## 注意事项

- 所有时间字段处理都需要先进行类型检查
- 使用`is_numeric()`检查后再转换为整数
- 时间戳为0时应返回空字符串而不是1970-01-01
- 确保PHP 8的严格类型检查不会导致错误
